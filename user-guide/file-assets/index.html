
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://informatics-isi-edu.github.io/deriva-ml/user-guide/file-assets/">
      
      
        <link rel="prev" href="../features/">
      
      
        <link rel="next" href="../annotations/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>File Assets - DerivaML</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#file-assets" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="DerivaML" class="md-header__button md-logo" aria-label="DerivaML" data-md-component="logo">
      
  <img src="../../assets/deriva-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DerivaML
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              File Assets
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="DerivaML" class="md-nav__button md-logo" aria-label="DerivaML" data-md-component="logo">
      
  <img src="../../assets/deriva-logo.png" alt="logo">

    </a>
    DerivaML
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview of DerivaML
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deriva_ml_structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DerivaML Structure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installing deriva-ml
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../identifiers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Identifying things in deriva-ml
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Datasets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    File Assets
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    File Assets
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-an-asset-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is an Asset Table?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asset-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Asset Types
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-asset-tables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating Asset Tables
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating Asset Tables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-asset-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Asset Table
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asset-table-with-metadata-columns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Asset Table with Metadata Columns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asset-table-with-references" class="md-nav__link">
    <span class="md-ellipsis">
      
        Asset Table with References
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uploading-assets-in-executions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Uploading Assets in Executions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Uploading Assets in Executions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-upload-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Upload Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registering-existing-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Registering Existing Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applying-asset-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Applying Asset Types
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listing-assets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Listing Assets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assets-and-provenance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Assets and Provenance
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assets-in-datasets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Assets in Datasets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-directory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Working Directory
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-organization" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Organization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#large-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Large Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provenance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Provenance
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../annotations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Catalog Annotations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../execution-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuring an Execution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hydra-zen-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hydra-zen Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../running-models-and-notebooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Running Models and Notebooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Using DerivaML with Jupyter Notebooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Sample Notebooks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Sample Notebooks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Notebooks/DerivaML%20Dataset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DerivaML Dataset
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Notebooks/DerivaML%20Execution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DerivaML Execution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Notebooks/DerivaML%20Features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DerivaML Features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Notebooks/DerivaML%20Vocabulary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DerivaML Vocabulary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Library Documentation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Library Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Core Classes
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core Classes
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code-docs/deriva_ml_base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DerivaML
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code-docs/deriva_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DerivaModel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Datasets
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Datasets
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code-docs/dataset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dataset
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code-docs/dataset_bag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DatasetBag
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code-docs/dataset_split/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dataset Splitting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code-docs/dataset_aux_classes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dataset Auxiliary Classes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Execution
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Execution
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code-docs/execution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Execution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code-docs/execution_configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ExecutionConfiguration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code-docs/workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Features
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Features
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code-docs/feature/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Feature
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Utilities
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Utilities
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code-docs/deriva_definitions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Definitions & Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code-docs/exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exceptions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code-docs/upload/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Upload
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Release Notes
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-an-asset-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is an Asset Table?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asset-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Asset Types
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-asset-tables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating Asset Tables
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating Asset Tables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-asset-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Asset Table
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asset-table-with-metadata-columns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Asset Table with Metadata Columns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asset-table-with-references" class="md-nav__link">
    <span class="md-ellipsis">
      
        Asset Table with References
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uploading-assets-in-executions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Uploading Assets in Executions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Uploading Assets in Executions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-upload-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Upload Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registering-existing-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Registering Existing Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applying-asset-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Applying Asset Types
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listing-assets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Listing Assets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assets-and-provenance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Assets and Provenance
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assets-in-datasets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Assets in Datasets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-directory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Working Directory
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-organization" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Organization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#large-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Large Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provenance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Provenance
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="file-assets">File Assets</h1>
<p>File assets are tables that manage files (images, models, data files, etc.) in DerivaML. They provide automatic tracking of file metadata, integration with the Hatrac object store, and provenance linking through executions.</p>
<h2 id="what-is-an-asset-table">What is an Asset Table?</h2>
<p>An <strong>asset table</strong> is a special table type that includes standard columns for file management:</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>URL</code></td>
<td>text</td>
<td>Hatrac object store URL for the file</td>
</tr>
<tr>
<td><code>Filename</code></td>
<td>text</td>
<td>Original filename</td>
</tr>
<tr>
<td><code>Length</code></td>
<td>int8</td>
<td>File size in bytes</td>
</tr>
<tr>
<td><code>MD5</code></td>
<td>text</td>
<td>MD5 checksum for integrity verification</td>
</tr>
<tr>
<td><code>Description</code></td>
<td>text</td>
<td>Optional description</td>
</tr>
</tbody>
</table>
<p>You can add additional columns for domain-specific metadata (e.g., <code>Width</code>, <code>Height</code> for images).</p>
<h2 id="asset-types">Asset Types</h2>
<p>Assets are categorized using the <code>Asset_Type</code> controlled vocabulary. This enables:</p>
<ul>
<li>Filtering assets by type in queries</li>
<li>Organizing assets in the Chaise UI</li>
<li>Consistent categorization across the catalog</li>
</ul>
<pre><code class="language-python"># List available asset types
types = ml.list_vocabulary_terms(&quot;Asset_Type&quot;)
for t in types:
    print(f&quot;{t.name}: {t.description}&quot;)

# Add a new asset type
ml.add_term(
    table=&quot;Asset_Type&quot;,
    term_name=&quot;Segmentation_Mask&quot;,
    description=&quot;Binary mask images for segmentation tasks&quot;
)
</code></pre>
<h2 id="creating-asset-tables">Creating Asset Tables</h2>
<h3 id="basic-asset-table">Basic Asset Table</h3>
<pre><code class="language-python">from deriva_ml import DerivaML

ml = DerivaML(hostname, catalog_id)

# Create a simple asset table
ml.create_asset(
    asset_name=&quot;Model&quot;,
    comment=&quot;Trained ML model files&quot;
)
</code></pre>
<h3 id="asset-table-with-metadata-columns">Asset Table with Metadata Columns</h3>
<pre><code class="language-python">from deriva_ml import ColumnDefinition, BuiltinTypes

# Create an image asset table with additional metadata
ml.create_asset(
    asset_name=&quot;Image&quot;,
    column_defs=[
        ColumnDefinition(name=&quot;Width&quot;, type=BuiltinTypes.int4, comment=&quot;Image width in pixels&quot;),
        ColumnDefinition(name=&quot;Height&quot;, type=BuiltinTypes.int4, comment=&quot;Image height in pixels&quot;),
        ColumnDefinition(name=&quot;Format&quot;, type=BuiltinTypes.text, comment=&quot;Image format (PNG, JPEG, etc.)&quot;),
    ],
    comment=&quot;Training and evaluation images&quot;
)
</code></pre>
<h3 id="asset-table-with-references">Asset Table with References</h3>
<p>Link assets to other domain tables:</p>
<pre><code class="language-python"># Create image asset that references Subject
ml.create_asset(
    asset_name=&quot;Image&quot;,
    referenced_tables=[&quot;Subject&quot;],  # Creates foreign key to Subject table
    comment=&quot;Medical images linked to subjects&quot;
)
</code></pre>
<h2 id="uploading-assets-in-executions">Uploading Assets in Executions</h2>
<p>Assets are uploaded through the execution workflow using <code>asset_file_path()</code>. This:</p>
<ol>
<li>Stages files in a local working directory</li>
<li>Associates files with the correct asset table</li>
<li>Applies asset type labels</li>
<li>Links files to the execution for provenance</li>
</ol>
<h3 id="basic-upload-pattern">Basic Upload Pattern</h3>
<pre><code class="language-python">from deriva_ml.execution import ExecutionConfiguration

config = ExecutionConfiguration(
    workflow=ml.create_workflow(&quot;Training&quot;, &quot;Training&quot;),
    datasets=[DatasetSpec(rid=dataset_rid)],
)

with ml.create_execution(config) as exe:
    # Train your model...
    model = train_model(data)

    # Register the model file for upload
    model_path = exe.asset_file_path(
        asset_name=&quot;Model&quot;,           # Target asset table
        file_name=&quot;best_model.pt&quot;     # Filename to use
    )

    # Save the model to the registered path
    torch.save(model.state_dict(), model_path)

# Upload all registered assets to the catalog
exe.upload_execution_outputs()
</code></pre>
<h3 id="registering-existing-files">Registering Existing Files</h3>
<pre><code class="language-python">with ml.create_execution(config) as exe:
    # Stage an existing file for upload
    exe.asset_file_path(
        asset_name=&quot;Image&quot;,
        file_name=&quot;/path/to/existing/image.png&quot;,  # Source file path
        copy_file=True,                           # Copy instead of symlink
        rename_file=&quot;processed_image.png&quot;         # Optional: rename during upload
    )

exe.upload_execution_outputs()
</code></pre>
<h3 id="applying-asset-types">Applying Asset Types</h3>
<pre><code class="language-python">with ml.create_execution(config) as exe:
    # Register with specific asset types
    exe.asset_file_path(
        asset_name=&quot;Image&quot;,
        file_name=&quot;mask.png&quot;,
        asset_types=[&quot;Segmentation_Mask&quot;, &quot;Derived&quot;]  # Multiple types
    )

exe.upload_execution_outputs()
</code></pre>
<h2 id="listing-assets">Listing Assets</h2>
<pre><code class="language-python"># List all assets in a table
assets = ml.list_assets(&quot;Image&quot;)
for asset in assets:
    print(f&quot;RID: {asset['RID']}&quot;)
    print(f&quot;  Filename: {asset['Filename']}&quot;)
    print(f&quot;  URL: {asset['URL']}&quot;)
    print(f&quot;  Size: {asset['Length']} bytes&quot;)
    print(f&quot;  MD5: {asset['MD5']}&quot;)
    print(f&quot;  Types: {asset.get('Asset_Type', [])}&quot;)
</code></pre>
<h2 id="assets-and-provenance">Assets and Provenance</h2>
<p>Every asset uploaded through an execution is linked via an association table:</p>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{Asset}_Execution</code></td>
<td>Links assets to executions with role (Input/Output)</td>
</tr>
</tbody>
</table>
<p>This enables:
- Finding which execution produced an asset
- Tracking which assets were used as inputs
- Full lineage from raw data to final outputs</p>
<pre><code class="language-python"># Query assets produced by an execution
pb = ml.pathBuilder()
asset_execution = pb.schemas[ml.ml_schema].Image_Execution
results = asset_execution.filter(
    asset_execution.Execution == execution_rid
).filter(
    asset_execution.Asset_Role == &quot;Output&quot;
).entities().fetch()
</code></pre>
<h2 id="assets-in-datasets">Assets in Datasets</h2>
<p>Assets can be included in datasets as dataset elements:</p>
<pre><code class="language-python"># Enable Image table as dataset element type
ml.add_dataset_element_type(&quot;Image&quot;)

# Add images to a dataset
dataset = ml.lookup_dataset(dataset_rid)
dataset.add_dataset_members(image_rids)
</code></pre>
<p>When you download a dataset bag, asset files are fetched based on the <code>materialize</code> option:</p>
<pre><code class="language-python"># Download with all asset files
bag = exe.download_dataset_bag(
    DatasetSpec(rid=dataset_rid, materialize=True)
)

# Download metadata only (faster, smaller)
bag = exe.download_dataset_bag(
    DatasetSpec(rid=dataset_rid, materialize=False)
)
</code></pre>
<h2 id="working-directory">Working Directory</h2>
<p>Each execution has a temporary working directory for staging files:</p>
<pre><code class="language-python">with ml.create_execution(config) as exe:
    # Get the working directory path
    work_dir = exe.working_dir
    print(f&quot;Working directory: {work_dir}&quot;)

    # Files registered with asset_file_path are staged here
    # They're uploaded when upload_execution_outputs() is called
</code></pre>
<p>The working directory is cleaned up after <code>upload_execution_outputs(clean_folder=True)</code> (default).</p>
<h2 id="best-practices">Best Practices</h2>
<h3 id="file-organization">File Organization</h3>
<ul>
<li>Use descriptive filenames that include relevant identifiers</li>
<li>Apply consistent asset types for filtering</li>
<li>Include meaningful descriptions in asset records</li>
</ul>
<h3 id="large-files">Large Files</h3>
<ul>
<li>Consider compression for large files</li>
<li>Use <code>materialize=False</code> when you only need metadata</li>
<li>Monitor disk space in working directories</li>
</ul>
<h3 id="provenance">Provenance</h3>
<ul>
<li>Always upload assets through executions for provenance</li>
<li>Use meaningful workflow types and descriptions</li>
<li>Include input datasets for complete lineage</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../features/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Features">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Features
              </div>
            </div>
          </a>
        
        
          
          <a href="../annotations/" class="md-footer__link md-footer__link--next" aria-label="Next: Catalog Annotations">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Catalog Annotations
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.expand", "navigation.footer"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>