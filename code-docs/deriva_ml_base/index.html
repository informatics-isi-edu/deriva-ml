
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://informatics-isi-edu.github.io/deriva-ml/code-docs/deriva_ml_base/">
      
      
        <link rel="prev" href="../../Notebooks/DerivaML%20Vocabulary/">
      
      
        <link rel="next" href="../dataset_aux_classes/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>DerivaML - DerivaML</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#derivaml-class" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="DerivaML" class="md-header__button md-logo" aria-label="DerivaML" data-md-component="logo">
      
  <img src="../../assets/deriva-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DerivaML
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              DerivaML
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="DerivaML" class="md-nav__button md-logo" aria-label="DerivaML" data-md-component="logo">
      
  <img src="../../assets/deriva-logo.png" alt="logo">

    </a>
    DerivaML
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview of DerivaML
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/deriva_ml_structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DerivaML Structure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing deriva-ml
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/identifiers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Identifying things in deriva-ml
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Datasets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/notebooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using DerivaML with Jupiter Notebooks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/execution-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuring an Execution
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sample Notebooks
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Sample Notebooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Notebooks/DerivaML%20Dataset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DerivaML Dataset
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Notebooks/DerivaML%20Execution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DerivaML Execution
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Notebooks/DerivaML%20Features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DerivaML Features
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Notebooks/DerivaML%20Vocabulary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DerivaML Vocabulary
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Library Documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Library Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    DerivaML
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    DerivaML
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core" class="md-nav__link">
    <span class="md-ellipsis">
      core
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.BuiltinTypes" class="md-nav__link">
    <span class="md-ellipsis">
      BuiltinTypes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.ColumnDefinition" class="md-nav__link">
    <span class="md-ellipsis">
      ColumnDefinition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML" class="md-nav__link">
    <span class="md-ellipsis">
      DerivaML
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DerivaML">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.domain_path" class="md-nav__link">
    <span class="md-ellipsis">
      domain_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.pathBuilder" class="md-nav__link">
    <span class="md-ellipsis">
      pathBuilder
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.__del__" class="md-nav__link">
    <span class="md-ellipsis">
      __del__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.add_dataset_element_type" class="md-nav__link">
    <span class="md-ellipsis">
      add_dataset_element_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.add_dataset_members" class="md-nav__link">
    <span class="md-ellipsis">
      add_dataset_members
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.add_files" class="md-nav__link">
    <span class="md-ellipsis">
      add_files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.add_page" class="md-nav__link">
    <span class="md-ellipsis">
      add_page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.add_term" class="md-nav__link">
    <span class="md-ellipsis">
      add_term
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.add_workflow" class="md-nav__link">
    <span class="md-ellipsis">
      add_workflow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.chaise_url" class="md-nav__link">
    <span class="md-ellipsis">
      chaise_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.cite" class="md-nav__link">
    <span class="md-ellipsis">
      cite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.create_asset" class="md-nav__link">
    <span class="md-ellipsis">
      create_asset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.create_dataset" class="md-nav__link">
    <span class="md-ellipsis">
      create_dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.create_execution" class="md-nav__link">
    <span class="md-ellipsis">
      create_execution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.create_feature" class="md-nav__link">
    <span class="md-ellipsis">
      create_feature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.create_table" class="md-nav__link">
    <span class="md-ellipsis">
      create_table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.create_vocabulary" class="md-nav__link">
    <span class="md-ellipsis">
      create_vocabulary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.create_workflow" class="md-nav__link">
    <span class="md-ellipsis">
      create_workflow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.dataset_history" class="md-nav__link">
    <span class="md-ellipsis">
      dataset_history
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.dataset_version" class="md-nav__link">
    <span class="md-ellipsis">
      dataset_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.delete_dataset" class="md-nav__link">
    <span class="md-ellipsis">
      delete_dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.delete_dataset_members" class="md-nav__link">
    <span class="md-ellipsis">
      delete_dataset_members
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.delete_feature" class="md-nav__link">
    <span class="md-ellipsis">
      delete_feature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.download_dataset_bag" class="md-nav__link">
    <span class="md-ellipsis">
      download_dataset_bag
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.download_dir" class="md-nav__link">
    <span class="md-ellipsis">
      download_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.feature_record_class" class="md-nav__link">
    <span class="md-ellipsis">
      feature_record_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.find_datasets" class="md-nav__link">
    <span class="md-ellipsis">
      find_datasets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.globus_login" class="md-nav__link">
    <span class="md-ellipsis">
      globus_login
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.increment_dataset_version" class="md-nav__link">
    <span class="md-ellipsis">
      increment_dataset_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_assets" class="md-nav__link">
    <span class="md-ellipsis">
      list_assets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_dataset_children" class="md-nav__link">
    <span class="md-ellipsis">
      list_dataset_children
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_dataset_element_types" class="md-nav__link">
    <span class="md-ellipsis">
      list_dataset_element_types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_dataset_members" class="md-nav__link">
    <span class="md-ellipsis">
      list_dataset_members
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_dataset_parents" class="md-nav__link">
    <span class="md-ellipsis">
      list_dataset_parents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_feature_values" class="md-nav__link">
    <span class="md-ellipsis">
      list_feature_values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_files" class="md-nav__link">
    <span class="md-ellipsis">
      list_files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_vocabulary_terms" class="md-nav__link">
    <span class="md-ellipsis">
      list_vocabulary_terms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_workflows" class="md-nav__link">
    <span class="md-ellipsis">
      list_workflows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.lookup_feature" class="md-nav__link">
    <span class="md-ellipsis">
      lookup_feature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.lookup_term" class="md-nav__link">
    <span class="md-ellipsis">
      lookup_term
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.lookup_workflow" class="md-nav__link">
    <span class="md-ellipsis">
      lookup_workflow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.resolve_rid" class="md-nav__link">
    <span class="md-ellipsis">
      resolve_rid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.restore_execution" class="md-nav__link">
    <span class="md-ellipsis">
      restore_execution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.retrieve_rid" class="md-nav__link">
    <span class="md-ellipsis">
      retrieve_rid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.table_path" class="md-nav__link">
    <span class="md-ellipsis">
      table_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.user_list" class="md-nav__link">
    <span class="md-ellipsis">
      user_list
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaMLException" class="md-nav__link">
    <span class="md-ellipsis">
      DerivaMLException
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaMLInvalidTerm" class="md-nav__link">
    <span class="md-ellipsis">
      DerivaMLInvalidTerm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DerivaMLInvalidTerm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaMLInvalidTerm.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaMLTableTypeError" class="md-nav__link">
    <span class="md-ellipsis">
      DerivaMLTableTypeError
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DerivaMLTableTypeError">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaMLTableTypeError.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.ExecAssetType" class="md-nav__link">
    <span class="md-ellipsis">
      ExecAssetType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.ExecMetadataType" class="md-nav__link">
    <span class="md-ellipsis">
      ExecMetadataType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.FileSpec" class="md-nav__link">
    <span class="md-ellipsis">
      FileSpec
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FileSpec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.FileSpec.create_filespecs" class="md-nav__link">
    <span class="md-ellipsis">
      create_filespecs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.FileSpec.read_filespec" class="md-nav__link">
    <span class="md-ellipsis">
      read_filespec
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.FileSpec.validate_file_url" class="md-nav__link">
    <span class="md-ellipsis">
      validate_file_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.FileUploadState" class="md-nav__link">
    <span class="md-ellipsis">
      FileUploadState
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.MLAsset" class="md-nav__link">
    <span class="md-ellipsis">
      MLAsset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.MLVocab" class="md-nav__link">
    <span class="md-ellipsis">
      MLVocab
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.TableDefinition" class="md-nav__link">
    <span class="md-ellipsis">
      TableDefinition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.UploadState" class="md-nav__link">
    <span class="md-ellipsis">
      UploadState
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataset_aux_classes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DatasetBag Auxiliary Classes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataset_bag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DatasetBag
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deriva_definitions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Helper Classes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deriva_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DerivaModel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../execution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Execution
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../execution_configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ExecutionConfiguration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../feature/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Feature
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../upload/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upload
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release Notes
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core" class="md-nav__link">
    <span class="md-ellipsis">
      core
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.BuiltinTypes" class="md-nav__link">
    <span class="md-ellipsis">
      BuiltinTypes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.ColumnDefinition" class="md-nav__link">
    <span class="md-ellipsis">
      ColumnDefinition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML" class="md-nav__link">
    <span class="md-ellipsis">
      DerivaML
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DerivaML">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.domain_path" class="md-nav__link">
    <span class="md-ellipsis">
      domain_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.pathBuilder" class="md-nav__link">
    <span class="md-ellipsis">
      pathBuilder
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.__del__" class="md-nav__link">
    <span class="md-ellipsis">
      __del__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.add_dataset_element_type" class="md-nav__link">
    <span class="md-ellipsis">
      add_dataset_element_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.add_dataset_members" class="md-nav__link">
    <span class="md-ellipsis">
      add_dataset_members
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.add_files" class="md-nav__link">
    <span class="md-ellipsis">
      add_files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.add_page" class="md-nav__link">
    <span class="md-ellipsis">
      add_page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.add_term" class="md-nav__link">
    <span class="md-ellipsis">
      add_term
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.add_workflow" class="md-nav__link">
    <span class="md-ellipsis">
      add_workflow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.chaise_url" class="md-nav__link">
    <span class="md-ellipsis">
      chaise_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.cite" class="md-nav__link">
    <span class="md-ellipsis">
      cite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.create_asset" class="md-nav__link">
    <span class="md-ellipsis">
      create_asset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.create_dataset" class="md-nav__link">
    <span class="md-ellipsis">
      create_dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.create_execution" class="md-nav__link">
    <span class="md-ellipsis">
      create_execution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.create_feature" class="md-nav__link">
    <span class="md-ellipsis">
      create_feature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.create_table" class="md-nav__link">
    <span class="md-ellipsis">
      create_table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.create_vocabulary" class="md-nav__link">
    <span class="md-ellipsis">
      create_vocabulary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.create_workflow" class="md-nav__link">
    <span class="md-ellipsis">
      create_workflow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.dataset_history" class="md-nav__link">
    <span class="md-ellipsis">
      dataset_history
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.dataset_version" class="md-nav__link">
    <span class="md-ellipsis">
      dataset_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.delete_dataset" class="md-nav__link">
    <span class="md-ellipsis">
      delete_dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.delete_dataset_members" class="md-nav__link">
    <span class="md-ellipsis">
      delete_dataset_members
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.delete_feature" class="md-nav__link">
    <span class="md-ellipsis">
      delete_feature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.download_dataset_bag" class="md-nav__link">
    <span class="md-ellipsis">
      download_dataset_bag
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.download_dir" class="md-nav__link">
    <span class="md-ellipsis">
      download_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.feature_record_class" class="md-nav__link">
    <span class="md-ellipsis">
      feature_record_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.find_datasets" class="md-nav__link">
    <span class="md-ellipsis">
      find_datasets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.globus_login" class="md-nav__link">
    <span class="md-ellipsis">
      globus_login
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.increment_dataset_version" class="md-nav__link">
    <span class="md-ellipsis">
      increment_dataset_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_assets" class="md-nav__link">
    <span class="md-ellipsis">
      list_assets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_dataset_children" class="md-nav__link">
    <span class="md-ellipsis">
      list_dataset_children
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_dataset_element_types" class="md-nav__link">
    <span class="md-ellipsis">
      list_dataset_element_types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_dataset_members" class="md-nav__link">
    <span class="md-ellipsis">
      list_dataset_members
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_dataset_parents" class="md-nav__link">
    <span class="md-ellipsis">
      list_dataset_parents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_feature_values" class="md-nav__link">
    <span class="md-ellipsis">
      list_feature_values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_files" class="md-nav__link">
    <span class="md-ellipsis">
      list_files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_vocabulary_terms" class="md-nav__link">
    <span class="md-ellipsis">
      list_vocabulary_terms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.list_workflows" class="md-nav__link">
    <span class="md-ellipsis">
      list_workflows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.lookup_feature" class="md-nav__link">
    <span class="md-ellipsis">
      lookup_feature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.lookup_term" class="md-nav__link">
    <span class="md-ellipsis">
      lookup_term
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.lookup_workflow" class="md-nav__link">
    <span class="md-ellipsis">
      lookup_workflow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.resolve_rid" class="md-nav__link">
    <span class="md-ellipsis">
      resolve_rid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.restore_execution" class="md-nav__link">
    <span class="md-ellipsis">
      restore_execution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.retrieve_rid" class="md-nav__link">
    <span class="md-ellipsis">
      retrieve_rid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.table_path" class="md-nav__link">
    <span class="md-ellipsis">
      table_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaML.user_list" class="md-nav__link">
    <span class="md-ellipsis">
      user_list
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaMLException" class="md-nav__link">
    <span class="md-ellipsis">
      DerivaMLException
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaMLInvalidTerm" class="md-nav__link">
    <span class="md-ellipsis">
      DerivaMLInvalidTerm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DerivaMLInvalidTerm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaMLInvalidTerm.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaMLTableTypeError" class="md-nav__link">
    <span class="md-ellipsis">
      DerivaMLTableTypeError
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DerivaMLTableTypeError">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.DerivaMLTableTypeError.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.ExecAssetType" class="md-nav__link">
    <span class="md-ellipsis">
      ExecAssetType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.ExecMetadataType" class="md-nav__link">
    <span class="md-ellipsis">
      ExecMetadataType
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.FileSpec" class="md-nav__link">
    <span class="md-ellipsis">
      FileSpec
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FileSpec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.FileSpec.create_filespecs" class="md-nav__link">
    <span class="md-ellipsis">
      create_filespecs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.FileSpec.read_filespec" class="md-nav__link">
    <span class="md-ellipsis">
      read_filespec
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriva_ml.core.FileSpec.validate_file_url" class="md-nav__link">
    <span class="md-ellipsis">
      validate_file_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.FileUploadState" class="md-nav__link">
    <span class="md-ellipsis">
      FileUploadState
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.MLAsset" class="md-nav__link">
    <span class="md-ellipsis">
      MLAsset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.MLVocab" class="md-nav__link">
    <span class="md-ellipsis">
      MLVocab
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.TableDefinition" class="md-nav__link">
    <span class="md-ellipsis">
      TableDefinition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriva_ml.core.UploadState" class="md-nav__link">
    <span class="md-ellipsis">
      UploadState
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="derivaml-class"><code>DerivaML</code> Class</h1>
<p>The DerivaML class provides a range of methods to interact with a Deriva catalog.
These methods assume tha tthe catalog contains a <code>deriva-ml</code> and a domain schema.</p>
<p><strong>Data Catalog</strong>: The catalog must include both the domain schema and a standard ML schema for effective data management.</p>
<p><img alt="ERD" src="../../assets/ERD.png" /></p>
<ul>
<li><strong>Domain schema</strong>: The domain schema includes the data collected or generated by domain-specific experiments or systems.</li>
<li><strong>ML schema</strong>: Each entity in the ML schema is designed to capture details of the ML development process. It including the following tables<ul>
<li>A <em>Dataset</em> represents a data collection, such as aggregation identified for training, validation, and testing purposes.</li>
<li>A <em>Workflow</em> represents a specific sequence of computational steps or human interactions.</li>
<li>An <em>Execution</em> is an instance of a workflow that a user instantiates at a specific time. </li>
<li>An <em>Execution Asset</em> is an output file that results from the execution of a workflow.</li>
<li>An <em>Execution Metadata</em> is an asset entity for saving metadata files referencing a given execution.</li>
</ul>
</li>
</ul>


<div class="doc doc-object doc-module">



<a id="deriva_ml.core"></a>
    <div class="doc doc-contents first">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="deriva_ml.core.BuiltinTypes" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">BuiltinTypes</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>ERMrest built-in data types.</p>
<p>Maps ERMrest's built-in data types to their type names. These types are used for defining
column types in tables and for type validation.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.text">text</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text/string type.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.int2">int2</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>16-bit integer.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.jsonb">jsonb</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Binary JSON.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.float8">float8</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>64-bit float.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.timestamp">timestamp</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp without timezone.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.int8">int8</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>64-bit integer.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.boolean">boolean</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Boolean type.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.json">json</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>JSON type.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.float4">float4</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>32-bit float.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.int4">int4</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>32-bit integer.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.timestamptz">timestamptz</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp with timezone.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.date">date</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Date type.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.ermrest_rid">ermrest_rid</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resource identifier.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.ermrest_rcb">ermrest_rcb</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Record created by.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.ermrest_rmb">ermrest_rmb</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Record modified by.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.ermrest_rct">ermrest_rct</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Record creation time.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.ermrest_rmt">ermrest_rmt</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Record modification time.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.markdown">markdown</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Markdown text.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.longtext">longtext</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Long text.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.ermrest_curie">ermrest_curie</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Compact URI.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.ermrest_uri">ermrest_uri</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>URI type.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.color_rgb_hex">color_rgb_hex</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>RGB color in hex.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.serial2">serial2</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>16-bit auto-incrementing.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.serial4">serial4</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>32-bit auto-incrementing.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.BuiltinTypes.serial8">serial8</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>64-bit auto-incrementing.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="quote">
                <summary>Source code in <code>src/deriva_ml/core/enums.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BuiltinTypes</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ERMrest built-in data types.</span>

<span class="sd">    Maps ERMrest&#39;s built-in data types to their type names. These types are used for defining</span>
<span class="sd">    column types in tables and for type validation.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        text (str): Text/string type.</span>
<span class="sd">        int2 (str): 16-bit integer.</span>
<span class="sd">        jsonb (str): Binary JSON.</span>
<span class="sd">        float8 (str): 64-bit float.</span>
<span class="sd">        timestamp (str): Timestamp without timezone.</span>
<span class="sd">        int8 (str): 64-bit integer.</span>
<span class="sd">        boolean (str): Boolean type.</span>
<span class="sd">        json (str): JSON type.</span>
<span class="sd">        float4 (str): 32-bit float.</span>
<span class="sd">        int4 (str): 32-bit integer.</span>
<span class="sd">        timestamptz (str): Timestamp with timezone.</span>
<span class="sd">        date (str): Date type.</span>
<span class="sd">        ermrest_rid (str): Resource identifier.</span>
<span class="sd">        ermrest_rcb (str): Record created by.</span>
<span class="sd">        ermrest_rmb (str): Record modified by.</span>
<span class="sd">        ermrest_rct (str): Record creation time.</span>
<span class="sd">        ermrest_rmt (str): Record modification time.</span>
<span class="sd">        markdown (str): Markdown text.</span>
<span class="sd">        longtext (str): Long text.</span>
<span class="sd">        ermrest_curie (str): Compact URI.</span>
<span class="sd">        ermrest_uri (str): URI type.</span>
<span class="sd">        color_rgb_hex (str): RGB color in hex.</span>
<span class="sd">        serial2 (str): 16-bit auto-incrementing.</span>
<span class="sd">        serial4 (str): 32-bit auto-incrementing.</span>
<span class="sd">        serial8 (str): 64-bit auto-incrementing.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">text</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">int2</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">int2</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">jsonb</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">json</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">float8</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">float8</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">int8</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">int8</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">boolean</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">boolean</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">json</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">json</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">float4</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">float4</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">int4</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">int4</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">timestamptz</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">timestamptz</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">ermrest_rid</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">ermrest_rid</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">ermrest_rcb</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">ermrest_rcb</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">ermrest_rmb</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">ermrest_rmb</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">ermrest_rct</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">ermrest_rct</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">ermrest_rmt</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">ermrest_rmt</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">markdown</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">markdown</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">longtext</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">longtext</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">ermrest_curie</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">ermrest_curie</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">ermrest_uri</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">ermrest_uri</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">color_rgb_hex</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">color_rgb_hex</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">serial2</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">serial2</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">serial4</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">serial4</span><span class="o">.</span><span class="n">typename</span>
    <span class="n">serial8</span> <span class="o">=</span> <span class="n">builtin_types</span><span class="o">.</span><span class="n">serial8</span><span class="o">.</span><span class="n">typename</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="deriva_ml.core.ColumnDefinition" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ColumnDefinition</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Defines a column in an ERMrest table.</p>
<p>Provides a Pydantic model for defining columns with their types, constraints, and metadata.
Maps to deriva_py's Column.define functionality.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.ColumnDefinition.name">name</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.ColumnDefinition.type">type</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="BuiltinTypes (deriva_ml.core.enums.BuiltinTypes)" href="#deriva_ml.core.BuiltinTypes">BuiltinTypes</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ERMrest data type for the column.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.ColumnDefinition.nullok">nullok</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether NULL values are allowed. Defaults to True.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.ColumnDefinition.default">default</span></code></td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Default value for the column.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.ColumnDefinition.comment">comment</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Description of the column's purpose.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.ColumnDefinition.acls">acls</span></code></td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Access control lists.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.ColumnDefinition.acl_bindings">acl_bindings</span></code></td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dynamic access control bindings.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.ColumnDefinition.annotations">annotations</span></code></td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional metadata annotations.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>col = ColumnDefinition(
...     name="score",
...     type=BuiltinTypes.float4,
...     nullok=False,
...     comment="Confidence score between 0 and 1"
... )</p>
</blockquote>
</blockquote>
</blockquote>
</details>







              <details class="quote">
                <summary>Source code in <code>src/deriva_ml/core/ermrest.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ColumnDefinition</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Defines a column in an ERMrest table.</span>

<span class="sd">    Provides a Pydantic model for defining columns with their types, constraints, and metadata.</span>
<span class="sd">    Maps to deriva_py&#39;s Column.define functionality.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name (str): Name of the column.</span>
<span class="sd">        type (BuiltinTypes): ERMrest data type for the column.</span>
<span class="sd">        nullok (bool): Whether NULL values are allowed. Defaults to True.</span>
<span class="sd">        default (Any): Default value for the column.</span>
<span class="sd">        comment (str | None): Description of the column&#39;s purpose.</span>
<span class="sd">        acls (dict): Access control lists.</span>
<span class="sd">        acl_bindings (dict): Dynamic access control bindings.</span>
<span class="sd">        annotations (dict): Additional metadata annotations.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; col = ColumnDefinition(</span>
<span class="sd">        ...     name=&quot;score&quot;,</span>
<span class="sd">        ...     type=BuiltinTypes.float4,</span>
<span class="sd">        ...     nullok=False,</span>
<span class="sd">        ...     comment=&quot;Confidence score between 0 and 1&quot;</span>
<span class="sd">        ... )</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">BuiltinTypes</span>
    <span class="n">nullok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">acls</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">acl_bindings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">annotations</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">extract_type_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">BuiltinTypes</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="s2">&quot;typename&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span>

    <span class="nd">@model_serializer</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">serialize_column_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">em</span><span class="o">.</span><span class="n">Column</span><span class="o">.</span><span class="n">define</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">builtin_types</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">value</span><span class="p">],</span>
            <span class="n">nullok</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nullok</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="p">,</span>
            <span class="n">comment</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">comment</span><span class="p">,</span>
            <span class="n">acls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">acls</span><span class="p">,</span>
            <span class="n">acl_bindings</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">acl_bindings</span><span class="p">,</span>
            <span class="n">annotations</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">annotations</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="deriva_ml.core.DerivaML" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">DerivaML</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="Dataset (deriva_ml.dataset.dataset.Dataset)" href="../dataset/#deriva_ml.dataset.Dataset">Dataset</a></code></p>


        <p>Core class for machine learning operations on a Deriva catalog.</p>
<p>This class provides core functionality for managing ML workflows, features, and datasets in a Deriva catalog.
It handles data versioning, feature management, vocabulary control, and execution tracking.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.DerivaML.host_name">host_name</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Hostname of the Deriva server (e.g., 'deriva.example.org').</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.DerivaML.catalog_id">catalog_id</span></code></td>
            <td>
                  <code><span title="Union">Union</span>[<span title="str">str</span>, <span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Catalog identifier or name.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.DerivaML.domain_schema">domain_schema</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Schema name for domain-specific tables and relationships.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.DerivaML.model">model</span></code></td>
            <td>
                  <code><span title="deriva_ml.model.catalog.DerivaModel">DerivaModel</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ERMRest model for the catalog.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.DerivaML.working_dir">working_dir</span></code></td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Directory for storing computation data and results.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.DerivaML.cache_dir">cache_dir</span></code></td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Directory for caching downloaded datasets.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.DerivaML.ml_schema">ml_schema</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Schema name for ML-specific tables (default: 'deriva_ml').</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.DerivaML.configuration">configuration</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ExecutionConfiguration (deriva_ml.execution.execution_configuration.ExecutionConfiguration)" href="../execution_configuration/#deriva_ml.execution.execution_configuration.ExecutionConfiguration">ExecutionConfiguration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current execution configuration.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.DerivaML.project_name">project_name</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the current project.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.DerivaML.start_time">start_time</span></code></td>
            <td>
                  <code><span title="datetime.datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp when this instance was created.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.DerivaML.status">status</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current status of operations.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>ml = DerivaML('deriva.example.org', 'my_catalog')
ml.create_feature('my_table', 'new_feature')
ml.add_term('vocabulary_table', 'new_term', description='Description of term')</p>
</blockquote>
</blockquote>
</blockquote>
</details>







              <details class="quote">
                <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  86</span>
<span class="normal">  87</span>
<span class="normal">  88</span>
<span class="normal">  89</span>
<span class="normal">  90</span>
<span class="normal">  91</span>
<span class="normal">  92</span>
<span class="normal">  93</span>
<span class="normal">  94</span>
<span class="normal">  95</span>
<span class="normal">  96</span>
<span class="normal">  97</span>
<span class="normal">  98</span>
<span class="normal">  99</span>
<span class="normal"> 100</span>
<span class="normal"> 101</span>
<span class="normal"> 102</span>
<span class="normal"> 103</span>
<span class="normal"> 104</span>
<span class="normal"> 105</span>
<span class="normal"> 106</span>
<span class="normal"> 107</span>
<span class="normal"> 108</span>
<span class="normal"> 109</span>
<span class="normal"> 110</span>
<span class="normal"> 111</span>
<span class="normal"> 112</span>
<span class="normal"> 113</span>
<span class="normal"> 114</span>
<span class="normal"> 115</span>
<span class="normal"> 116</span>
<span class="normal"> 117</span>
<span class="normal"> 118</span>
<span class="normal"> 119</span>
<span class="normal"> 120</span>
<span class="normal"> 121</span>
<span class="normal"> 122</span>
<span class="normal"> 123</span>
<span class="normal"> 124</span>
<span class="normal"> 125</span>
<span class="normal"> 126</span>
<span class="normal"> 127</span>
<span class="normal"> 128</span>
<span class="normal"> 129</span>
<span class="normal"> 130</span>
<span class="normal"> 131</span>
<span class="normal"> 132</span>
<span class="normal"> 133</span>
<span class="normal"> 134</span>
<span class="normal"> 135</span>
<span class="normal"> 136</span>
<span class="normal"> 137</span>
<span class="normal"> 138</span>
<span class="normal"> 139</span>
<span class="normal"> 140</span>
<span class="normal"> 141</span>
<span class="normal"> 142</span>
<span class="normal"> 143</span>
<span class="normal"> 144</span>
<span class="normal"> 145</span>
<span class="normal"> 146</span>
<span class="normal"> 147</span>
<span class="normal"> 148</span>
<span class="normal"> 149</span>
<span class="normal"> 150</span>
<span class="normal"> 151</span>
<span class="normal"> 152</span>
<span class="normal"> 153</span>
<span class="normal"> 154</span>
<span class="normal"> 155</span>
<span class="normal"> 156</span>
<span class="normal"> 157</span>
<span class="normal"> 158</span>
<span class="normal"> 159</span>
<span class="normal"> 160</span>
<span class="normal"> 161</span>
<span class="normal"> 162</span>
<span class="normal"> 163</span>
<span class="normal"> 164</span>
<span class="normal"> 165</span>
<span class="normal"> 166</span>
<span class="normal"> 167</span>
<span class="normal"> 168</span>
<span class="normal"> 169</span>
<span class="normal"> 170</span>
<span class="normal"> 171</span>
<span class="normal"> 172</span>
<span class="normal"> 173</span>
<span class="normal"> 174</span>
<span class="normal"> 175</span>
<span class="normal"> 176</span>
<span class="normal"> 177</span>
<span class="normal"> 178</span>
<span class="normal"> 179</span>
<span class="normal"> 180</span>
<span class="normal"> 181</span>
<span class="normal"> 182</span>
<span class="normal"> 183</span>
<span class="normal"> 184</span>
<span class="normal"> 185</span>
<span class="normal"> 186</span>
<span class="normal"> 187</span>
<span class="normal"> 188</span>
<span class="normal"> 189</span>
<span class="normal"> 190</span>
<span class="normal"> 191</span>
<span class="normal"> 192</span>
<span class="normal"> 193</span>
<span class="normal"> 194</span>
<span class="normal"> 195</span>
<span class="normal"> 196</span>
<span class="normal"> 197</span>
<span class="normal"> 198</span>
<span class="normal"> 199</span>
<span class="normal"> 200</span>
<span class="normal"> 201</span>
<span class="normal"> 202</span>
<span class="normal"> 203</span>
<span class="normal"> 204</span>
<span class="normal"> 205</span>
<span class="normal"> 206</span>
<span class="normal"> 207</span>
<span class="normal"> 208</span>
<span class="normal"> 209</span>
<span class="normal"> 210</span>
<span class="normal"> 211</span>
<span class="normal"> 212</span>
<span class="normal"> 213</span>
<span class="normal"> 214</span>
<span class="normal"> 215</span>
<span class="normal"> 216</span>
<span class="normal"> 217</span>
<span class="normal"> 218</span>
<span class="normal"> 219</span>
<span class="normal"> 220</span>
<span class="normal"> 221</span>
<span class="normal"> 222</span>
<span class="normal"> 223</span>
<span class="normal"> 224</span>
<span class="normal"> 225</span>
<span class="normal"> 226</span>
<span class="normal"> 227</span>
<span class="normal"> 228</span>
<span class="normal"> 229</span>
<span class="normal"> 230</span>
<span class="normal"> 231</span>
<span class="normal"> 232</span>
<span class="normal"> 233</span>
<span class="normal"> 234</span>
<span class="normal"> 235</span>
<span class="normal"> 236</span>
<span class="normal"> 237</span>
<span class="normal"> 238</span>
<span class="normal"> 239</span>
<span class="normal"> 240</span>
<span class="normal"> 241</span>
<span class="normal"> 242</span>
<span class="normal"> 243</span>
<span class="normal"> 244</span>
<span class="normal"> 245</span>
<span class="normal"> 246</span>
<span class="normal"> 247</span>
<span class="normal"> 248</span>
<span class="normal"> 249</span>
<span class="normal"> 250</span>
<span class="normal"> 251</span>
<span class="normal"> 252</span>
<span class="normal"> 253</span>
<span class="normal"> 254</span>
<span class="normal"> 255</span>
<span class="normal"> 256</span>
<span class="normal"> 257</span>
<span class="normal"> 258</span>
<span class="normal"> 259</span>
<span class="normal"> 260</span>
<span class="normal"> 261</span>
<span class="normal"> 262</span>
<span class="normal"> 263</span>
<span class="normal"> 264</span>
<span class="normal"> 265</span>
<span class="normal"> 266</span>
<span class="normal"> 267</span>
<span class="normal"> 268</span>
<span class="normal"> 269</span>
<span class="normal"> 270</span>
<span class="normal"> 271</span>
<span class="normal"> 272</span>
<span class="normal"> 273</span>
<span class="normal"> 274</span>
<span class="normal"> 275</span>
<span class="normal"> 276</span>
<span class="normal"> 277</span>
<span class="normal"> 278</span>
<span class="normal"> 279</span>
<span class="normal"> 280</span>
<span class="normal"> 281</span>
<span class="normal"> 282</span>
<span class="normal"> 283</span>
<span class="normal"> 284</span>
<span class="normal"> 285</span>
<span class="normal"> 286</span>
<span class="normal"> 287</span>
<span class="normal"> 288</span>
<span class="normal"> 289</span>
<span class="normal"> 290</span>
<span class="normal"> 291</span>
<span class="normal"> 292</span>
<span class="normal"> 293</span>
<span class="normal"> 294</span>
<span class="normal"> 295</span>
<span class="normal"> 296</span>
<span class="normal"> 297</span>
<span class="normal"> 298</span>
<span class="normal"> 299</span>
<span class="normal"> 300</span>
<span class="normal"> 301</span>
<span class="normal"> 302</span>
<span class="normal"> 303</span>
<span class="normal"> 304</span>
<span class="normal"> 305</span>
<span class="normal"> 306</span>
<span class="normal"> 307</span>
<span class="normal"> 308</span>
<span class="normal"> 309</span>
<span class="normal"> 310</span>
<span class="normal"> 311</span>
<span class="normal"> 312</span>
<span class="normal"> 313</span>
<span class="normal"> 314</span>
<span class="normal"> 315</span>
<span class="normal"> 316</span>
<span class="normal"> 317</span>
<span class="normal"> 318</span>
<span class="normal"> 319</span>
<span class="normal"> 320</span>
<span class="normal"> 321</span>
<span class="normal"> 322</span>
<span class="normal"> 323</span>
<span class="normal"> 324</span>
<span class="normal"> 325</span>
<span class="normal"> 326</span>
<span class="normal"> 327</span>
<span class="normal"> 328</span>
<span class="normal"> 329</span>
<span class="normal"> 330</span>
<span class="normal"> 331</span>
<span class="normal"> 332</span>
<span class="normal"> 333</span>
<span class="normal"> 334</span>
<span class="normal"> 335</span>
<span class="normal"> 336</span>
<span class="normal"> 337</span>
<span class="normal"> 338</span>
<span class="normal"> 339</span>
<span class="normal"> 340</span>
<span class="normal"> 341</span>
<span class="normal"> 342</span>
<span class="normal"> 343</span>
<span class="normal"> 344</span>
<span class="normal"> 345</span>
<span class="normal"> 346</span>
<span class="normal"> 347</span>
<span class="normal"> 348</span>
<span class="normal"> 349</span>
<span class="normal"> 350</span>
<span class="normal"> 351</span>
<span class="normal"> 352</span>
<span class="normal"> 353</span>
<span class="normal"> 354</span>
<span class="normal"> 355</span>
<span class="normal"> 356</span>
<span class="normal"> 357</span>
<span class="normal"> 358</span>
<span class="normal"> 359</span>
<span class="normal"> 360</span>
<span class="normal"> 361</span>
<span class="normal"> 362</span>
<span class="normal"> 363</span>
<span class="normal"> 364</span>
<span class="normal"> 365</span>
<span class="normal"> 366</span>
<span class="normal"> 367</span>
<span class="normal"> 368</span>
<span class="normal"> 369</span>
<span class="normal"> 370</span>
<span class="normal"> 371</span>
<span class="normal"> 372</span>
<span class="normal"> 373</span>
<span class="normal"> 374</span>
<span class="normal"> 375</span>
<span class="normal"> 376</span>
<span class="normal"> 377</span>
<span class="normal"> 378</span>
<span class="normal"> 379</span>
<span class="normal"> 380</span>
<span class="normal"> 381</span>
<span class="normal"> 382</span>
<span class="normal"> 383</span>
<span class="normal"> 384</span>
<span class="normal"> 385</span>
<span class="normal"> 386</span>
<span class="normal"> 387</span>
<span class="normal"> 388</span>
<span class="normal"> 389</span>
<span class="normal"> 390</span>
<span class="normal"> 391</span>
<span class="normal"> 392</span>
<span class="normal"> 393</span>
<span class="normal"> 394</span>
<span class="normal"> 395</span>
<span class="normal"> 396</span>
<span class="normal"> 397</span>
<span class="normal"> 398</span>
<span class="normal"> 399</span>
<span class="normal"> 400</span>
<span class="normal"> 401</span>
<span class="normal"> 402</span>
<span class="normal"> 403</span>
<span class="normal"> 404</span>
<span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DerivaML</span><span class="p">(</span><span class="n">Dataset</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Core class for machine learning operations on a Deriva catalog.</span>

<span class="sd">    This class provides core functionality for managing ML workflows, features, and datasets in a Deriva catalog.</span>
<span class="sd">    It handles data versioning, feature management, vocabulary control, and execution tracking.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        host_name (str): Hostname of the Deriva server (e.g., &#39;deriva.example.org&#39;).</span>
<span class="sd">        catalog_id (Union[str, int]): Catalog identifier or name.</span>
<span class="sd">        domain_schema (str): Schema name for domain-specific tables and relationships.</span>
<span class="sd">        model (DerivaModel): ERMRest model for the catalog.</span>
<span class="sd">        working_dir (Path): Directory for storing computation data and results.</span>
<span class="sd">        cache_dir (Path): Directory for caching downloaded datasets.</span>
<span class="sd">        ml_schema (str): Schema name for ML-specific tables (default: &#39;deriva_ml&#39;).</span>
<span class="sd">        configuration (ExecutionConfiguration): Current execution configuration.</span>
<span class="sd">        project_name (str): Name of the current project.</span>
<span class="sd">        start_time (datetime): Timestamp when this instance was created.</span>
<span class="sd">        status (str): Current status of operations.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; ml = DerivaML(&#39;deriva.example.org&#39;, &#39;my_catalog&#39;)</span>
<span class="sd">        &gt;&gt;&gt; ml.create_feature(&#39;my_table&#39;, &#39;new_feature&#39;)</span>
<span class="sd">        &gt;&gt;&gt; ml.add_term(&#39;vocabulary_table&#39;, &#39;new_term&#39;, description=&#39;Description of term&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">hostname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">catalog_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">domain_schema</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">project_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cache_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">working_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ml_schema</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ML_SCHEMA</span><span class="p">,</span>
        <span class="n">logging_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>
        <span class="n">credential</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">use_minid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">check_auth</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initializes a DerivaML instance.</span>

<span class="sd">        This method will connect to a catalog and initialize local configuration for the ML execution.</span>
<span class="sd">        This class is intended to be used as a base class on which domain-specific interfaces are built.</span>

<span class="sd">        Args:</span>
<span class="sd">            hostname: Hostname of the Deriva server.</span>
<span class="sd">            catalog_id: Catalog ID. Either an identifier or a catalog name.</span>
<span class="sd">            domain_schema: Schema name for domain-specific tables and relationships. Defaults to the name of the</span>
<span class="sd">                schema that is not one of the standard schemas.  If there is more than one user-defined schema, then</span>
<span class="sd">                this argument must be provided a value.</span>
<span class="sd">            ml_schema: Schema name for ML schema. Used if you have a non-standard configuration of deriva-ml.</span>
<span class="sd">            project_name: Project name. Defaults to name of domain schema.</span>
<span class="sd">            cache_dir: Directory path for caching data downloaded from the Deriva server as bdbag. If not provided,</span>
<span class="sd">                will default to working_dir.</span>
<span class="sd">            working_dir: Directory path for storing data used by or generated by any computations. If no value is</span>
<span class="sd">                provided, will default to  ${HOME}/deriva_ml</span>
<span class="sd">            use_minid: Use the MINID service when downloading dataset bags.</span>
<span class="sd">            check_auth: Check if the user has access to the catalog.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get or use provided credentials for server access</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">credential</span> <span class="o">=</span> <span class="n">credential</span> <span class="ow">or</span> <span class="n">get_credential</span><span class="p">(</span><span class="n">hostname</span><span class="p">)</span>

        <span class="c1"># Initialize server connection and catalog access</span>
        <span class="n">server</span> <span class="o">=</span> <span class="n">DerivaServer</span><span class="p">(</span>
            <span class="s2">&quot;https&quot;</span><span class="p">,</span>
            <span class="n">hostname</span><span class="p">,</span>
            <span class="n">credentials</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">credential</span><span class="p">,</span>
            <span class="n">session_config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_session_config</span><span class="p">(),</span>
        <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">check_auth</span> <span class="ow">and</span> <span class="n">server</span><span class="o">.</span><span class="n">get_authn_session</span><span class="p">():</span>
                <span class="k">pass</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span>
                <span class="s2">&quot;You are not authorized to access this catalog. &quot;</span>
                <span class="s2">&quot;Please check your credentials and make sure you have logged in.&quot;</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">connect_ermrest</span><span class="p">(</span><span class="n">catalog_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">DerivaModel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getCatalogModel</span><span class="p">(),</span> <span class="n">domain_schema</span><span class="o">=</span><span class="n">domain_schema</span><span class="p">)</span>

        <span class="c1"># Set up working and cache directories</span>
        <span class="n">default_workdir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot;_working&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">Path</span><span class="p">(</span><span class="n">working_dir</span><span class="p">)</span> <span class="o">/</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getuser</span><span class="p">()</span> <span class="k">if</span> <span class="n">working_dir</span> <span class="k">else</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;deriva-ml&quot;</span>
        <span class="p">)</span> <span class="o">/</span> <span class="n">default_workdir</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">cache_dir</span><span class="p">)</span> <span class="k">if</span> <span class="n">cache_dir</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span> <span class="o">/</span> <span class="s2">&quot;cache&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Initialize dataset functionality from the parent class</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span><span class="p">,</span> <span class="n">use_minid</span><span class="o">=</span><span class="n">use_minid</span><span class="p">)</span>

        <span class="c1"># Set up logging</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;deriva_ml&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging_level</span><span class="p">)</span>

        <span class="c1"># Store instance configuration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">host_name</span> <span class="o">=</span> <span class="n">hostname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">catalog_id</span> <span class="o">=</span> <span class="n">catalog_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span> <span class="o">=</span> <span class="n">ml_schema</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execution</span><span class="p">:</span> <span class="n">Execution</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">domain_schema</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_name</span> <span class="o">=</span> <span class="n">project_name</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">pending</span><span class="o">.</span><span class="n">value</span>

        <span class="c1"># Configure logging format</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
            <span class="n">level</span><span class="o">=</span><span class="n">logging_level</span><span class="p">,</span>
            <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(asctime)s</span><span class="s2"> - </span><span class="si">%(name)s</span><span class="s2">.</span><span class="si">%(levelname)s</span><span class="s2"> - </span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Set Deriva library logging level</span>
        <span class="n">deriva_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;deriva&quot;</span><span class="p">)</span>
        <span class="n">deriva_logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging_level</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Cleanup method to handle incomplete executions.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Mark execution as aborted if not completed</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execution</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execution</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="n">Status</span><span class="o">.</span><span class="n">completed</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_execution</span><span class="o">.</span><span class="n">update_status</span><span class="p">(</span><span class="n">Status</span><span class="o">.</span><span class="n">aborted</span><span class="p">,</span> <span class="s2">&quot;Execution Aborted&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="n">requests</span><span class="o">.</span><span class="n">HTTPError</span><span class="p">):</span>
            <span class="k">pass</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_get_session_config</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns customized HTTP session configuration.</span>

<span class="sd">        Configures retry behavior and connection settings for HTTP requests to the Deriva server. Settings include:</span>
<span class="sd">        - Idempotent retry behavior for all HTTP methods</span>
<span class="sd">        - Increased retry attempts for read and connect operations</span>
<span class="sd">        - Exponential backoff for retries</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Session configuration dictionary with retry and connection settings.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; config = DerivaML._get_session_config()</span>
<span class="sd">            &gt;&gt;&gt; print(config[&#39;retry_read&#39;]) # 8</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Start with a default configuration</span>
        <span class="n">session_config</span> <span class="o">=</span> <span class="n">DEFAULT_SESSION_CONFIG</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1"># Customize retry behavior for robustness</span>
        <span class="n">session_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="c1"># Allow retries for all HTTP methods (PUT/POST are idempotent)</span>
                <span class="s2">&quot;allow_retry_on_all_methods&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="c1"># Increase retry attempts for better reliability</span>
                <span class="s2">&quot;retry_read&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
                <span class="s2">&quot;retry_connect&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
                <span class="c1"># Use exponential backoff for retries</span>
                <span class="s2">&quot;retry_backoff_factor&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">session_config</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pathBuilder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SchemaWrapper</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns catalog path builder for queries.</span>

<span class="sd">        The path builder provides a fluent interface for constructing complex queries against the catalog.</span>
<span class="sd">        This is a core component used by many other methods to interact with the catalog.</span>

<span class="sd">        Returns:</span>
<span class="sd">            datapath._CatalogWrapper: A new instance of the catalog path builder.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; path = ml.pathBuilder.schemas[&#39;my_schema&#39;].tables[&#39;my_table&#39;]</span>
<span class="sd">            &gt;&gt;&gt; results = path.entities().fetch()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">domain_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datapath</span><span class="o">.</span><span class="n">DataPath</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns path builder for domain schema.</span>

<span class="sd">        Provides a convenient way to access tables and construct queries within the domain-specific schema.</span>

<span class="sd">        Returns:</span>
<span class="sd">            datapath._CatalogWrapper: Path builder object scoped to the domain schema.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; domain = ml.domain_path</span>
<span class="sd">            &gt;&gt;&gt; results = domain.my_table.entities().fetch()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathBuilder</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">table_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a local filesystem path for table CSV files.</span>

<span class="sd">        Generates a standardized path where CSV files should be placed when preparing to upload data to a table.</span>
<span class="sd">        The path follows the project&#39;s directory structure conventions.</span>

<span class="sd">        Args:</span>
<span class="sd">            table: Name of the table or Table object to get the path for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Path: Filesystem path where the CSV file should be placed.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; path = ml.table_path(&quot;experiment_results&quot;)</span>
<span class="sd">            &gt;&gt;&gt; df.to_csv(path) # Save data for upload</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">table_path</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span><span class="p">,</span>
            <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span><span class="p">,</span>
            <span class="n">table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">download_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cached</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the appropriate download directory.</span>

<span class="sd">        Provides the appropriate directory path for storing downloaded files, either in the cache or working directory.</span>

<span class="sd">        Args:</span>
<span class="sd">            cached: If True, returns the cache directory path. If False, returns the working directory path.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Path: Directory path where downloaded files should be stored.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; cache_dir = ml.download_dir(cached=True)</span>
<span class="sd">            &gt;&gt;&gt; work_dir = ml.download_dir(cached=False)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Return cache directory if cached=True, otherwise working directory</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span> <span class="k">if</span> <span class="n">cached</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">globus_login</span><span class="p">(</span><span class="n">host</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Authenticates with Globus for accessing Deriva services.</span>

<span class="sd">        Performs authentication using Globus Auth to access Deriva services. If already logged in, notifies the user.</span>
<span class="sd">        Uses non-interactive authentication flow without a browser or local server.</span>

<span class="sd">        Args:</span>
<span class="sd">            host: The hostname of the Deriva server to authenticate with (e.g., &#39;deriva.example.org&#39;).</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; DerivaML.globus_login(&#39;deriva.example.org&#39;)</span>
<span class="sd">            &#39;Login Successful&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">gnl</span> <span class="o">=</span> <span class="n">GlobusNativeLogin</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">gnl</span><span class="o">.</span><span class="n">is_logged_in</span><span class="p">([</span><span class="n">host</span><span class="p">]):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You are already logged in.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gnl</span><span class="o">.</span><span class="n">login</span><span class="p">(</span>
                <span class="p">[</span><span class="n">host</span><span class="p">],</span>
                <span class="n">no_local_server</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">no_browser</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">refresh_tokens</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">update_bdbag_keychain</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Login Successful&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">chaise_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates Chaise web interface URL.</span>

<span class="sd">        Chaise is Deriva&#39;s web interface for data exploration. This method creates a URL that directly links to</span>
<span class="sd">        the specified table or record.</span>

<span class="sd">        Args:</span>
<span class="sd">            table: Table to generate URL for (name, Table object, or RID).</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: URL in format: https://{host}/chaise/recordset/#{catalog}/{schema}:{table}</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If table or RID cannot be found.</span>

<span class="sd">        Examples:</span>
<span class="sd">            Using table name:</span>
<span class="sd">                &gt;&gt;&gt; ml.chaise_url(&quot;experiment_table&quot;)</span>
<span class="sd">                &#39;https://deriva.org/chaise/recordset/#1/schema:experiment_table&#39;</span>

<span class="sd">            Using RID:</span>
<span class="sd">                &gt;&gt;&gt; ml.chaise_url(&quot;1-abc123&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get the table object and build base URI</span>
        <span class="n">table_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">get_server_uri</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;ermrest/catalog/&quot;</span><span class="p">,</span> <span class="s2">&quot;chaise/recordset/#&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">DerivaMLException</span><span class="p">:</span>
            <span class="c1"># Handle RID case</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cite</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">table</span><span class="p">))</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">uri</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">urlquote</span><span class="p">(</span><span class="n">table_obj</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">urlquote</span><span class="p">(</span><span class="n">table_obj</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">cite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates permanent citation URL.</span>

<span class="sd">        Creates a versioned URL that can be used to reference a specific entity in the catalog. The URL includes</span>
<span class="sd">        the catalog snapshot time to ensure version stability.</span>

<span class="sd">        Args:</span>
<span class="sd">            entity: Either a RID string or a dictionary containing entity data with a &#39;RID&#39; key.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Permanent citation URL in format: https://{host}/id/{catalog}/{rid}@{snapshot_time}</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If an entity doesn&#39;t exist or lacks a RID.</span>

<span class="sd">        Examples:</span>
<span class="sd">            Using a RID string:</span>
<span class="sd">                &gt;&gt;&gt; url = ml.cite(&quot;1-abc123&quot;)</span>
<span class="sd">                &gt;&gt;&gt; print(url)</span>
<span class="sd">                &#39;https://deriva.org/id/1/1-abc123@2024-01-01T12:00:00&#39;</span>

<span class="sd">            Using a dictionary:</span>
<span class="sd">                &gt;&gt;&gt; url = ml.cite({&quot;RID&quot;: &quot;1-abc123&quot;})</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Return if already a citation URL</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host_name</span><span class="si">}</span><span class="s2">/id/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">catalog_id</span><span class="si">}</span><span class="s2">/&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">entity</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Resolve RID and create citation URL with snapshot time</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resolve_rid</span><span class="p">(</span><span class="n">rid</span> <span class="o">:=</span> <span class="n">entity</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">])</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host_name</span><span class="si">}</span><span class="s2">/id/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">catalog_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">rid</span><span class="si">}</span><span class="s2">@</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">latest_snapshot</span><span class="p">()</span><span class="o">.</span><span class="n">snaptime</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entity </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2"> does not have RID column&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">DerivaMLException</span> <span class="k">as</span> <span class="n">_e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="s2">&quot;Entity RID does not exist&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">user_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns catalog user list.</span>

<span class="sd">        Retrieves basic information about all users who have access to the catalog, including their</span>
<span class="sd">        identifiers and full names.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[Dict[str, str]]: List of user information dictionaries, each containing:</span>
<span class="sd">                - &#39;ID&#39;: User identifier</span>
<span class="sd">                - &#39;Full_Name&#39;: User&#39;s full name</span>

<span class="sd">        Examples:</span>

<span class="sd">            &gt;&gt;&gt; users = ml.user_list()</span>
<span class="sd">            &gt;&gt;&gt; for user in users:</span>
<span class="sd">            ...     print(f&quot;{user[&#39;Full_Name&#39;]} ({user[&#39;ID&#39;]})&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get the user table path and fetch basic user info</span>
        <span class="n">user_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathBuilder</span><span class="o">.</span><span class="n">public</span><span class="o">.</span><span class="n">ERMrest_Client</span><span class="o">.</span><span class="n">path</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s2">&quot;ID&quot;</span><span class="p">:</span> <span class="n">u</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">],</span> <span class="s2">&quot;Full_Name&quot;</span><span class="p">:</span> <span class="n">u</span><span class="p">[</span><span class="s2">&quot;Full_Name&quot;</span><span class="p">]}</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">user_path</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">()]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_rid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResolveRidResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resolves RID to catalog location.</span>

<span class="sd">        Looks up a RID and returns information about where it exists in the catalog, including schema,</span>
<span class="sd">        table, and column metadata.</span>

<span class="sd">        Args:</span>
<span class="sd">            rid: Resource Identifier to resolve.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ResolveRidResult: Named tuple containing:</span>
<span class="sd">                - schema: Schema name</span>
<span class="sd">                - table: Table name</span>
<span class="sd">                - columns: Column definitions</span>
<span class="sd">                - datapath: Path builder for accessing the entity</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If RID doesn&#39;t exist in catalog.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; result = ml.resolve_rid(&quot;1-abc123&quot;)</span>
<span class="sd">            &gt;&gt;&gt; print(f&quot;Found in {result.schema}.{result.table}&quot;)</span>
<span class="sd">            &gt;&gt;&gt; data = result.datapath.entities().fetch()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Attempt to resolve RID using catalog model</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">resolve_rid</span><span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">_e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid RID </span><span class="si">{</span><span class="n">rid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">retrieve_rid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieves complete record for RID.</span>

<span class="sd">        Fetches all column values for the entity identified by the RID.</span>

<span class="sd">        Args:</span>
<span class="sd">            rid: Resource Identifier of the record to retrieve.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict[str, Any]: Dictionary containing all column values for the entity.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If the RID doesn&#39;t exist in the catalog.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; record = ml.retrieve_rid(&quot;1-abc123&quot;)</span>
<span class="sd">            &gt;&gt;&gt; print(f&quot;Name: {record[&#39;name&#39;]}, Created: {record[&#39;creation_date&#39;]}&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Resolve RID and fetch the first (only) matching record</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolve_rid</span><span class="p">(</span><span class="n">rid</span><span class="p">)</span><span class="o">.</span><span class="n">datapath</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds page to web interface.</span>

<span class="sd">        Creates a new page in the catalog&#39;s web interface with the specified title and content. The page will be</span>
<span class="sd">        accessible through the catalog&#39;s navigation system.</span>

<span class="sd">        Args:</span>
<span class="sd">            title: The title of the page to be displayed in navigation and headers.</span>
<span class="sd">            content: The main content of the page can include HTML markup.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If the page creation fails or the user lacks necessary permissions.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; ml.add_page(</span>
<span class="sd">            ...     title=&quot;Analysis Results&quot;,</span>
<span class="sd">            ...     content=&quot;&lt;h1&gt;Results&lt;/h1&gt;&lt;p&gt;Analysis completed successfully...&lt;/p&gt;&quot;</span>
<span class="sd">            ... )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Insert page into www tables with title and content</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pathBuilder</span><span class="o">.</span><span class="n">www</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">([{</span><span class="s2">&quot;Title&quot;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span> <span class="s2">&quot;Content&quot;</span><span class="p">:</span> <span class="n">content</span><span class="p">}])</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_vocabulary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vocab_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a controlled vocabulary table.</span>

<span class="sd">        A controlled vocabulary table maintains a list of standardized terms and their definitions. Each term can have</span>
<span class="sd">        synonyms and descriptions to ensure consistent terminology usage across the dataset.</span>

<span class="sd">        Args:</span>
<span class="sd">            vocab_name: Name for the new vocabulary table. Must be a valid SQL identifier.</span>
<span class="sd">            comment: Description of the vocabulary&#39;s purpose and usage. Defaults to empty string.</span>
<span class="sd">            schema: Schema name to create the table in. If None, uses domain_schema.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Table: ERMRest table object representing the newly created vocabulary table.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If vocab_name is invalid or already exists.</span>

<span class="sd">        Examples:</span>
<span class="sd">            Create a vocabulary for tissue types:</span>

<span class="sd">                &gt;&gt;&gt; table = ml.create_vocabulary(</span>
<span class="sd">                ...     vocab_name=&quot;tissue_types&quot;,</span>
<span class="sd">                ...     comment=&quot;Standard tissue classifications&quot;,</span>
<span class="sd">                ...     schema=&quot;bio_schema&quot;</span>
<span class="sd">                ... )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Use domain schema if none specified</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="n">schema</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span>

        <span class="c1"># Create and return vocabulary table with RID-based URI pattern</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vocab_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">schema</span><span class="p">]</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span>
                <span class="n">Table</span><span class="o">.</span><span class="n">define_vocabulary</span><span class="p">(</span><span class="n">vocab_name</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">project_name</span><span class="si">}</span><span class="s2">:</span><span class="se">{{</span><span class="s2">RID</span><span class="se">}}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Table </span><span class="si">{</span><span class="n">vocab_name</span><span class="si">}</span><span class="s2"> already exist&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">vocab_table</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="n">TableDefinition</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a new table in the catalog.</span>

<span class="sd">        Creates a table using the provided TableDefinition object, which specifies the table structure including</span>
<span class="sd">        columns, keys, and foreign key relationships.</span>

<span class="sd">        Args:</span>
<span class="sd">            table: A TableDefinition object containing the complete specification of the table to create.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Table: The newly created ERMRest table object.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If table creation fails or the definition is invalid.</span>

<span class="sd">        Example:</span>

<span class="sd">            &gt;&gt;&gt; table_def = TableDefinition(</span>
<span class="sd">            ...     name=&quot;experiments&quot;,</span>
<span class="sd">            ...     column_definitions=[</span>
<span class="sd">            ...         ColumnDefinition(name=&quot;name&quot;, type=BuiltinTypes.text),</span>
<span class="sd">            ...         ColumnDefinition(name=&quot;date&quot;, type=BuiltinTypes.date)</span>
<span class="sd">            ...     ]</span>
<span class="sd">            ... )</span>
<span class="sd">            &gt;&gt;&gt; new_table = ml.create_table(table_def)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Create table in domain schema using provided definition</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span><span class="p">]</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>

    <span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_asset</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">asset_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">column_defs</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ColumnDefinition</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fkey_defs</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ColumnDefinition</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">referenced_tables</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Table</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">schema</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates an asset table.</span>

<span class="sd">        Args:</span>
<span class="sd">            asset_name: Name of the asset table.</span>
<span class="sd">            column_defs: Iterable of ColumnDefinition objects to provide additional metadata for asset.</span>
<span class="sd">            fkey_defs: Iterable of ForeignKeyDefinition objects to provide additional metadata for asset.</span>
<span class="sd">            referenced_tables: Iterable of Table objects to which asset should provide foreign-key references to.</span>
<span class="sd">            comment: Description of the asset table. (Default value = &#39;&#39;)</span>
<span class="sd">            schema: Schema in which to create the asset table.  Defaults to domain_schema.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Table object for the asset table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Initialize empty collections if None provided</span>
        <span class="n">column_defs</span> <span class="o">=</span> <span class="n">column_defs</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="n">fkey_defs</span> <span class="o">=</span> <span class="n">fkey_defs</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="n">referenced_tables</span> <span class="o">=</span> <span class="n">referenced_tables</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="n">schema</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span>

        <span class="c1"># Add an asset type to vocabulary</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_term</span><span class="p">(</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">asset_type</span><span class="p">,</span> <span class="n">asset_name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;A </span><span class="si">{</span><span class="n">asset_name</span><span class="si">}</span><span class="s2"> asset&quot;</span><span class="p">)</span>

        <span class="c1"># Create the main asset table</span>
        <span class="n">asset_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">schema</span><span class="p">]</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span>
            <span class="n">Table</span><span class="o">.</span><span class="n">define_asset</span><span class="p">(</span>
                <span class="n">schema</span><span class="p">,</span>
                <span class="n">asset_name</span><span class="p">,</span>
                <span class="n">column_defs</span><span class="o">=</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">column_defs</span><span class="p">],</span>
                <span class="n">fkey_defs</span><span class="o">=</span><span class="p">[</span><span class="n">fk</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="k">for</span> <span class="n">fk</span> <span class="ow">in</span> <span class="n">fkey_defs</span><span class="p">],</span>
                <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Create an association table between asset and asset type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span><span class="p">]</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span>
            <span class="n">Table</span><span class="o">.</span><span class="n">define_association</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="p">(</span><span class="n">asset_table</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">asset_table</span><span class="p">),</span>
                    <span class="p">(</span><span class="s2">&quot;Asset_Type&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="s2">&quot;Asset_Type&quot;</span><span class="p">)),</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Create references to other tables if specified</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">referenced_tables</span><span class="p">:</span>
            <span class="n">asset_table</span><span class="o">.</span><span class="n">create_reference</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>

        <span class="c1"># Create an association table for tracking execution</span>
        <span class="n">atable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span><span class="p">]</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span>
            <span class="n">Table</span><span class="o">.</span><span class="n">define_association</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="p">(</span><span class="n">asset_name</span><span class="p">,</span> <span class="n">asset_table</span><span class="p">),</span>
                    <span class="p">(</span>
                        <span class="s2">&quot;Execution&quot;</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="s2">&quot;Execution&quot;</span><span class="p">],</span>
                    <span class="p">),</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">atable</span><span class="o">.</span><span class="n">create_reference</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="s2">&quot;Asset_Role&quot;</span><span class="p">))</span>

        <span class="c1"># Add asset annotations</span>
        <span class="n">asset_annotation</span><span class="p">(</span><span class="n">asset_table</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">asset_table</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">list_assets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">asset_table</span><span class="p">:</span> <span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lists contents of an asset table.</span>

<span class="sd">        Returns a list of assets with their types for the specified asset table.</span>

<span class="sd">        Args:</span>
<span class="sd">            asset_table: Table or name of the asset table to list assets for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[dict[str, Any]]: List of asset records, each containing:</span>
<span class="sd">                - RID: Resource identifier</span>
<span class="sd">                - Type: Asset type</span>
<span class="sd">                - Metadata: Asset metadata</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If the table is not an asset table or doesn&#39;t exist.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; assets = ml.list_assets(&quot;tissue_types&quot;)</span>
<span class="sd">            &gt;&gt;&gt; for asset in assets:</span>
<span class="sd">            ...     print(f&quot;{asset[&#39;RID&#39;]}: {asset[&#39;Type&#39;]}&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Validate and get asset table reference</span>
        <span class="n">asset_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">asset_table</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">is_asset</span><span class="p">(</span><span class="n">asset_table</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Table </span><span class="si">{</span><span class="n">asset_table</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> is not an asset&quot;</span><span class="p">)</span>

        <span class="c1"># Get path builders for asset and type tables</span>
        <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
        <span class="n">asset_path</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">asset_table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">asset_table</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
        <span class="p">(</span>
            <span class="n">asset_type_table</span><span class="p">,</span>
            <span class="n">_</span><span class="p">,</span>
            <span class="n">_</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">find_association</span><span class="p">(</span><span class="n">asset_table</span><span class="p">,</span> <span class="n">MLVocab</span><span class="o">.</span><span class="n">asset_type</span><span class="p">)</span>
        <span class="n">type_path</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">asset_type_table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">asset_type_table</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>

        <span class="c1"># Build a list of assets with their types</span>
        <span class="n">assets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">asset</span> <span class="ow">in</span> <span class="n">asset_path</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">():</span>
            <span class="c1"># Get associated asset types for each asset</span>
            <span class="n">asset_types</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">type_path</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">type_path</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">asset_table</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">==</span> <span class="n">asset</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">])</span>
                <span class="o">.</span><span class="n">attributes</span><span class="p">(</span><span class="n">type_path</span><span class="o">.</span><span class="n">Asset_Type</span><span class="p">)</span>
                <span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="c1"># Combine asset data with its types</span>
            <span class="n">assets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">asset</span> <span class="o">|</span> <span class="p">{</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">asset_type</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="p">[</span><span class="n">asset_type</span><span class="p">[</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">asset_type</span><span class="o">.</span><span class="n">value</span><span class="p">]</span> <span class="k">for</span> <span class="n">asset_type</span> <span class="ow">in</span> <span class="n">asset_types</span><span class="p">]}</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">assets</span>

    <span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_feature</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">target_table</span><span class="p">:</span> <span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">feature_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">terms</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">assets</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ColumnDefinition</span> <span class="o">|</span> <span class="n">Table</span> <span class="o">|</span> <span class="n">Key</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">optional</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">FeatureRecord</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a new feature definition.</span>

<span class="sd">        A feature represents a measurable property or characteristic that can be associated with records in the target</span>
<span class="sd">        table. Features can include vocabulary terms, asset references, and additional metadata.</span>

<span class="sd">        Args:</span>
<span class="sd">            target_table: Table to associate the feature with (name or Table object).</span>
<span class="sd">            feature_name: Unique name for the feature within the target table.</span>
<span class="sd">            terms: Optional vocabulary tables/names whose terms can be used as feature values.</span>
<span class="sd">            assets: Optional asset tables/names that can be referenced by this feature.</span>
<span class="sd">            metadata: Optional columns, tables, or keys to include in a feature definition.</span>
<span class="sd">            optional: Column names that are not required when creating feature instances.</span>
<span class="sd">            comment: Description of the feature&#39;s purpose and usage.</span>

<span class="sd">        Returns:</span>
<span class="sd">            type[FeatureRecord]: Feature class for creating validated instances.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If a feature definition is invalid or conflicts with existing features.</span>

<span class="sd">        Examples:</span>
<span class="sd">            Create a feature with confidence score:</span>
<span class="sd">                &gt;&gt;&gt; feature_class = ml.create_feature(</span>
<span class="sd">                ...     target_table=&quot;samples&quot;,</span>
<span class="sd">                ...     feature_name=&quot;expression_level&quot;,</span>
<span class="sd">                ...     terms=[&quot;expression_values&quot;],</span>
<span class="sd">                ...     metadata=[ColumnDefinition(name=&quot;confidence&quot;, type=BuiltinTypes.float4)],</span>
<span class="sd">                ...     comment=&quot;Gene expression measurement&quot;</span>
<span class="sd">                ... )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Initialize empty collections if None provided</span>
        <span class="n">terms</span> <span class="o">=</span> <span class="n">terms</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="n">assets</span> <span class="o">=</span> <span class="n">assets</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="n">optional</span> <span class="o">=</span> <span class="n">optional</span> <span class="ow">or</span> <span class="p">[]</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">normalize_metadata</span><span class="p">(</span><span class="n">m</span><span class="p">:</span> <span class="n">Key</span> <span class="o">|</span> <span class="n">Table</span> <span class="o">|</span> <span class="n">ColumnDefinition</span> <span class="o">|</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Helper function to normalize metadata references.&quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">ColumnDefinition</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">m</span>

        <span class="c1"># Validate asset and term tables</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">is_asset</span><span class="p">,</span> <span class="n">assets</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="s2">&quot;Invalid create_feature asset table.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">is_vocabulary</span><span class="p">,</span> <span class="n">terms</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="s2">&quot;Invalid create_feature asset table.&quot;</span><span class="p">)</span>

        <span class="c1"># Get references to required tables</span>
        <span class="n">target_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">target_table</span><span class="p">)</span>
        <span class="n">execution</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="s2">&quot;Execution&quot;</span><span class="p">]</span>
        <span class="n">feature_name_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="s2">&quot;Feature_Name&quot;</span><span class="p">]</span>

        <span class="c1"># Add feature name to vocabulary</span>
        <span class="n">feature_name_term</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_term</span><span class="p">(</span><span class="s2">&quot;Feature_Name&quot;</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>
        <span class="n">atable_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Execution_</span><span class="si">{</span><span class="n">target_table</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">feature_name_term</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="c1"># Create an association table implementing the feature</span>
        <span class="n">atable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span><span class="p">]</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span>
            <span class="n">target_table</span><span class="o">.</span><span class="n">define_association</span><span class="p">(</span>
                <span class="n">table_name</span><span class="o">=</span><span class="n">atable_name</span><span class="p">,</span>
                <span class="n">associates</span><span class="o">=</span><span class="p">[</span><span class="n">execution</span><span class="p">,</span> <span class="n">target_table</span><span class="p">,</span> <span class="n">feature_name_table</span><span class="p">],</span>
                <span class="n">metadata</span><span class="o">=</span><span class="p">[</span><span class="n">normalize_metadata</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span><span class="n">assets</span><span class="p">,</span> <span class="n">terms</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)],</span>
                <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="c1"># Configure optional columns and default feature name</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">optional</span><span class="p">:</span>
            <span class="n">atable</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">c</span><span class="p">]</span><span class="o">.</span><span class="n">alter</span><span class="p">(</span><span class="n">nullok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">atable</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="s2">&quot;Feature_Name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">alter</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">feature_name_term</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># Return feature record class for creating instances</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">feature_record_class</span><span class="p">(</span><span class="n">target_table</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">feature_record_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">FeatureRecord</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a pydantic model class for feature records.</span>

<span class="sd">        Creates a typed interface for creating new instances of the specified feature. The returned class includes</span>
<span class="sd">        validation and type checking based on the feature&#39;s definition.</span>

<span class="sd">        Args:</span>
<span class="sd">            table: The table containing the feature, either as name or Table object.</span>
<span class="sd">            feature_name: Name of the feature to create a record class for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            type[FeatureRecord]: A pydantic model class for creating validated feature records.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If the feature doesn&#39;t exist or the table is invalid.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; ExpressionFeature = ml.feature_record_class(&quot;samples&quot;, &quot;expression_level&quot;)</span>
<span class="sd">            &gt;&gt;&gt; feature = ExpressionFeature(value=&quot;high&quot;, confidence=0.95)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Look up a feature and return its record class</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_feature</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">)</span><span class="o">.</span><span class="n">feature_record_class</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">delete_feature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes a feature definition and its data.</span>

<span class="sd">        Deletes the feature and its implementation table from the catalog. This operation cannot be undone and</span>
<span class="sd">        will remove all feature values associated with this feature.</span>

<span class="sd">        Args:</span>
<span class="sd">            table: The table containing the feature, either as name or Table object.</span>
<span class="sd">            feature_name: Name of the feature to delete.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the feature was successfully deleted, False if it didn&#39;t exist.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If deletion fails due to constraints or permissions.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; success = ml.delete_feature(&quot;samples&quot;, &quot;obsolete_feature&quot;)</span>
<span class="sd">            &gt;&gt;&gt; print(&quot;Deleted&quot; if success else &quot;Not found&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get table reference and find feature</span>
        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Find and delete the feature&#39;s implementation table</span>
            <span class="n">feature</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">find_features</span><span class="p">(</span><span class="n">table</span><span class="p">)</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">feature_name</span> <span class="o">==</span> <span class="n">feature_name</span><span class="p">)</span>
            <span class="n">feature</span><span class="o">.</span><span class="n">feature_table</span><span class="o">.</span><span class="n">drop</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">lookup_feature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Feature</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieves a Feature object.</span>

<span class="sd">        Looks up and returns a Feature object that provides an interface to work with an existing feature</span>
<span class="sd">        definition in the catalog.</span>

<span class="sd">        Args:</span>
<span class="sd">            table: The table containing the feature, either as name or Table object.</span>
<span class="sd">            feature_name: Name of the feature to look up.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Feature: An object representing the feature and its implementation.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If the feature doesn&#39;t exist in the specified table.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; feature = ml.lookup_feature(&quot;samples&quot;, &quot;expression_level&quot;)</span>
<span class="sd">            &gt;&gt;&gt; print(feature.feature_name)</span>
<span class="sd">            &#39;expression_level&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">lookup_feature</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">)</span>

    <span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">list_feature_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datapath</span><span class="o">.</span><span class="n">_ResultSet</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieves all values for a feature.</span>

<span class="sd">        Returns all instances of the specified feature that have been created, including their associated</span>
<span class="sd">        metadata and references.</span>

<span class="sd">        Args:</span>
<span class="sd">            table: The table containing the feature, either as name or Table object.</span>
<span class="sd">            feature_name: Name of the feature to retrieve values for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            datapath._ResultSet: A result set containing all feature values and their metadata.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If the feature doesn&#39;t exist or cannot be accessed.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; values = ml.list_feature_values(&quot;samples&quot;, &quot;expression_level&quot;)</span>
<span class="sd">            &gt;&gt;&gt; for value in values:</span>
<span class="sd">            ...     print(f&quot;Sample {value[&#39;RID&#39;]}: {value[&#39;value&#39;]}&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get table and feature references</span>
        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="n">feature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_feature</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">)</span>

        <span class="c1"># Build and execute query for feature values</span>
        <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">feature</span><span class="o">.</span><span class="n">feature_table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">feature</span><span class="o">.</span><span class="n">feature_table</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>

    <span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_term</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">,</span>
        <span class="n">term_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">synonyms</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">exists_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">VocabularyTerm</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a term to a vocabulary table.</span>

<span class="sd">        Creates a new standardized term with description and optional synonyms in a vocabulary table.</span>
<span class="sd">        Can either create a new term or return an existing one if it already exists.</span>

<span class="sd">        Args:</span>
<span class="sd">            table: Vocabulary table to add term to (name or Table object).</span>
<span class="sd">            term_name: Primary name of the term (must be unique within vocabulary).</span>
<span class="sd">            description: Explanation of term&#39;s meaning and usage.</span>
<span class="sd">            synonyms: Alternative names for the term.</span>
<span class="sd">            exists_ok: If True, return the existing term if found. If False, raise error.</span>

<span class="sd">        Returns:</span>
<span class="sd">            VocabularyTerm: Object representing the created or existing term.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If a term exists and exists_ok=False, or if the table is not a vocabulary table.</span>

<span class="sd">        Examples:</span>
<span class="sd">            Add a new tissue type:</span>
<span class="sd">                &gt;&gt;&gt; term = ml.add_term(</span>
<span class="sd">                ...     table=&quot;tissue_types&quot;,</span>
<span class="sd">                ...     term_name=&quot;epithelial&quot;,</span>
<span class="sd">                ...     description=&quot;Epithelial tissue type&quot;,</span>
<span class="sd">                ...     synonyms=[&quot;epithelium&quot;]</span>
<span class="sd">                ... )</span>

<span class="sd">            Attempt to add an existing term:</span>
<span class="sd">                &gt;&gt;&gt; term = ml.add_term(&quot;tissue_types&quot;, &quot;epithelial&quot;, &quot;...&quot;, exists_ok=True)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Initialize an empty synonyms list if None</span>
        <span class="n">synonyms</span> <span class="o">=</span> <span class="n">synonyms</span> <span class="ow">or</span> <span class="p">[]</span>

        <span class="c1"># Get table reference and validate if it is a vocabulary table</span>
        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">is_vocabulary</span><span class="p">(</span><span class="n">table</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">DerivaMLTableTypeError</span><span class="p">(</span><span class="s2">&quot;vocabulary&quot;</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># Get schema and table names for path building</span>
        <span class="n">schema_name</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span>
        <span class="n">table_name</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">name</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Attempt to insert a new term</span>
            <span class="n">term_id</span> <span class="o">=</span> <span class="n">VocabularyTerm</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span>
                <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">schema_name</span><span class="p">]</span>
                <span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span>
                <span class="o">.</span><span class="n">insert</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">term_name</span><span class="p">,</span>
                            <span class="s2">&quot;Description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
                            <span class="s2">&quot;Synonyms&quot;</span><span class="p">:</span> <span class="n">synonyms</span><span class="p">,</span>
                        <span class="p">}</span>
                    <span class="p">],</span>
                    <span class="n">defaults</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;URI&quot;</span><span class="p">},</span>
                <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="n">DataPathException</span><span class="p">:</span>
            <span class="c1"># Term exists - look it up or raise an error</span>
            <span class="n">term_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_term</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">term_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">exists_ok</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DerivaMLInvalidTerm</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">term_name</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;term already exists&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">term_id</span>

    <span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">lookup_term</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">,</span> <span class="n">term_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">VocabularyTerm</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Finds a term in a vocabulary table.</span>

<span class="sd">        Searches for a term in the specified vocabulary table, matching either the primary name</span>
<span class="sd">        or any of its synonyms.</span>

<span class="sd">        Args:</span>
<span class="sd">            table: Vocabulary table to search in (name or Table object).</span>
<span class="sd">            term_name: Name or synonym of the term to find.</span>

<span class="sd">        Returns:</span>
<span class="sd">            VocabularyTerm: The matching vocabulary term.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLVocabularyException: If the table is not a vocabulary table, or term is not found.</span>

<span class="sd">        Examples:</span>
<span class="sd">            Look up by primary name:</span>
<span class="sd">                &gt;&gt;&gt; term = ml.lookup_term(&quot;tissue_types&quot;, &quot;epithelial&quot;)</span>
<span class="sd">                &gt;&gt;&gt; print(term.description)</span>

<span class="sd">            Look up by synonym:</span>
<span class="sd">                &gt;&gt;&gt; term = ml.lookup_term(&quot;tissue_types&quot;, &quot;epithelium&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get and validate vocabulary table reference</span>
        <span class="n">vocab_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">is_vocabulary</span><span class="p">(</span><span class="n">vocab_table</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The table </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2"> is not a controlled vocabulary&quot;</span><span class="p">)</span>

        <span class="c1"># Get schema and table paths</span>
        <span class="n">schema_name</span><span class="p">,</span> <span class="n">table_name</span> <span class="o">=</span> <span class="n">vocab_table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">vocab_table</span><span class="o">.</span><span class="n">name</span>
        <span class="n">schema_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">schema_name</span><span class="p">]</span>

        <span class="c1"># Search for term by name or synonym</span>
        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">schema_path</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">term_name</span> <span class="o">==</span> <span class="n">term</span><span class="p">[</span><span class="s2">&quot;Name&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="p">(</span><span class="n">term</span><span class="p">[</span><span class="s2">&quot;Synonyms&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">term_name</span> <span class="ow">in</span> <span class="n">term</span><span class="p">[</span><span class="s2">&quot;Synonyms&quot;</span><span class="p">]):</span>
                <span class="k">return</span> <span class="n">VocabularyTerm</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">term</span><span class="p">)</span>

        <span class="c1"># Term not found</span>
        <span class="k">raise</span> <span class="n">DerivaMLInvalidTerm</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">term_name</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">list_vocabulary_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">VocabularyTerm</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lists all terms in a vocabulary table.</span>

<span class="sd">        Retrieves all terms, their descriptions, and synonyms from a controlled vocabulary table.</span>

<span class="sd">        Args:</span>
<span class="sd">            table: Vocabulary table to list terms from (name or Table object).</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[VocabularyTerm]: List of vocabulary terms with their metadata.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If table doesn&#39;t exist or is not a vocabulary table.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; terms = ml.list_vocabulary_terms(&quot;tissue_types&quot;)</span>
<span class="sd">            &gt;&gt;&gt; for term in terms:</span>
<span class="sd">            ...     print(f&quot;{term.name}: {term.description}&quot;)</span>
<span class="sd">            ...     if term.synonyms:</span>
<span class="sd">            ...         print(f&quot;  Synonyms: {&#39;, &#39;.join(term.synonyms)}&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get path builder and table reference</span>
        <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">MLVocab</span><span class="p">)</span> <span class="k">else</span> <span class="n">table</span><span class="p">)</span>

        <span class="c1"># Validate table is a vocabulary table</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">is_vocabulary</span><span class="p">(</span><span class="n">table</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The table </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2"> is not a controlled vocabulary&quot;</span><span class="p">)</span>

        <span class="c1"># Fetch and convert all terms to VocabularyTerm objects</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">VocabularyTerm</span><span class="p">(</span><span class="o">**</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">()]</span>

    <span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">download_dataset_bag</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dataset</span><span class="p">:</span> <span class="n">DatasetSpec</span><span class="p">,</span>
        <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DatasetBag</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Downloads a dataset to the local filesystem and creates a MINID if needed.</span>

<span class="sd">        Downloads a dataset specified by DatasetSpec to the local filesystem. If the dataset doesn&#39;t have</span>
<span class="sd">        a MINID (Minimal Viable Identifier), one will be created. The dataset can optionally be associated</span>
<span class="sd">        with an execution record.</span>

<span class="sd">        Args:</span>
<span class="sd">            dataset: Specification of the dataset to download, including version and materialization options.</span>
<span class="sd">            execution_rid: Optional execution RID to associate the download with.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DatasetBag: Object containing:</span>
<span class="sd">                - path: Local filesystem path to downloaded dataset</span>
<span class="sd">                - rid: Dataset&#39;s Resource Identifier</span>
<span class="sd">                - minid: Dataset&#39;s Minimal Viable Identifier</span>

<span class="sd">        Examples:</span>
<span class="sd">            Download with default options:</span>
<span class="sd">                &gt;&gt;&gt; spec = DatasetSpec(rid=&quot;1-abc123&quot;)</span>
<span class="sd">                &gt;&gt;&gt; bag = ml.download_dataset_bag(dataset=spec)</span>
<span class="sd">                &gt;&gt;&gt; print(f&quot;Downloaded to {bag.path}&quot;)</span>

<span class="sd">            Download with execution tracking:</span>
<span class="sd">                &gt;&gt;&gt; bag = ml.download_dataset_bag(</span>
<span class="sd">                ...     dataset=DatasetSpec(rid=&quot;1-abc123&quot;, materialize=True),</span>
<span class="sd">                ...     execution_rid=&quot;1-xyz789&quot;</span>
<span class="sd">                ... )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_dataset_rid</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">rid</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">DerivaMLTableTypeError</span><span class="p">(</span><span class="s2">&quot;Dataset&quot;</span><span class="p">,</span> <span class="n">dataset</span><span class="o">.</span><span class="n">rid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_download_dataset_bag</span><span class="p">(</span>
            <span class="n">dataset</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span>
            <span class="n">execution_rid</span><span class="o">=</span><span class="n">execution_rid</span><span class="p">,</span>
            <span class="n">snapshot_catalog</span><span class="o">=</span><span class="n">DerivaML</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">host_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_version_snapshot</span><span class="p">(</span><span class="n">dataset</span><span class="p">)),</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_update_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_status</span><span class="p">:</span> <span class="n">Status</span><span class="p">,</span> <span class="n">status_detail</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the status of an execution in the catalog.</span>

<span class="sd">        Args:</span>
<span class="sd">            new_status: New status.</span>
<span class="sd">            status_detail: Details of the status.</span>
<span class="sd">            execution_rid: Resource Identifier (RID) of the execution.</span>
<span class="sd">            new_status: Status:</span>
<span class="sd">            status_detail: str:</span>
<span class="sd">             execution_rid: RID:</span>

<span class="sd">        Returns:</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">new_status</span><span class="o">.</span><span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pathBuilder</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">Execution</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;RID&quot;</span><span class="p">:</span> <span class="n">execution_rid</span><span class="p">,</span>
                    <span class="s2">&quot;Status&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
                    <span class="s2">&quot;Status_Detail&quot;</span><span class="p">:</span> <span class="n">status_detail</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_files</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">files</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">FileSpec</span><span class="p">],</span>
        <span class="n">dataset_types</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RID</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds files to the catalog with their metadata.</span>

<span class="sd">        Registers files in the catalog along with their metadata (MD5, length, URL) and associates them with</span>
<span class="sd">        specified file types. Optionally links files to an execution record.</span>

<span class="sd">        Args:</span>
<span class="sd">            files: File specifications containing MD5 checksum, length, and URL.</span>
<span class="sd">            dataset_types: One or more dataset type terms from File_Type vocabulary.</span>
<span class="sd">            description: Description of the files.</span>
<span class="sd">            execution_rid: Optional execution RID to associate files with.</span>

<span class="sd">        Returns:</span>
<span class="sd">            RID: Resource of dataset that represents the newly added files.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If file_types are invalid or execution_rid is not an execution record.</span>

<span class="sd">        Examples:</span>
<span class="sd">            Add a single file type:</span>
<span class="sd">                &gt;&gt;&gt; files = [FileSpec(url=&quot;path/to/file.txt&quot;, md5=&quot;abc123&quot;, length=1000)]</span>
<span class="sd">                &gt;&gt;&gt; rids = ml.add_files(files, file_types=&quot;text&quot;)</span>

<span class="sd">            Add multiple file types:</span>
<span class="sd">                &gt;&gt;&gt; rids = ml.add_files(</span>
<span class="sd">                ...     files=[FileSpec(url=&quot;image.png&quot;, md5=&quot;def456&quot;, length=2000)],</span>
<span class="sd">                ...     file_types=[&quot;image&quot;, &quot;png&quot;],</span>
<span class="sd">                ...     execution_rid=&quot;1-xyz789&quot;</span>
<span class="sd">                ... )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">execution_rid</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolve_rid</span><span class="p">(</span><span class="n">execution_rid</span><span class="p">)</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;Execution&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DerivaMLTableTypeError</span><span class="p">(</span><span class="s2">&quot;Execution&quot;</span><span class="p">,</span> <span class="n">execution_rid</span><span class="p">)</span>

        <span class="n">filespec_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>

        <span class="c1"># Get a list of all defined file types and their synonyms.</span>
        <span class="n">defined_types</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
            <span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">([[</span><span class="n">t</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">+</span> <span class="n">t</span><span class="o">.</span><span class="n">synonyms</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_vocabulary_terms</span><span class="p">(</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">asset_type</span><span class="p">)])</span>
        <span class="p">)</span>

        <span class="c1"># Get a list of al of the file types used in the filespec_list</span>
        <span class="n">spec_types</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">filespec</span><span class="o">.</span><span class="n">file_types</span> <span class="k">for</span> <span class="n">filespec</span> <span class="ow">in</span> <span class="n">filespec_list</span><span class="p">))</span>

        <span class="c1"># Now make sure that all of the file types and dataset_types in the spec list are defined.</span>
        <span class="k">if</span> <span class="n">spec_types</span> <span class="o">-</span> <span class="n">defined_types</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DerivaMLInvalidTerm</span><span class="p">(</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">asset_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec_types</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">defined_types</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Normalize dataset_types, make sure FIle type is included.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dataset_types</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">dataset_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">dataset_types</span> <span class="k">if</span> <span class="s2">&quot;File&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dataset_types</span> <span class="k">else</span> <span class="n">dataset_types</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dataset_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">,</span> <span class="n">dataset_types</span><span class="p">]</span> <span class="k">if</span> <span class="n">dataset_types</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">ds_type</span> <span class="ow">in</span> <span class="n">dataset_types</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lookup_term</span><span class="p">(</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">dataset_type</span><span class="p">,</span> <span class="n">ds_type</span><span class="p">)</span>

        <span class="c1"># Add files to the file table, and collect up the resulting entries by directory name.</span>
        <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
        <span class="n">file_records</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
            <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">([</span><span class="n">f</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">by_alias</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">filespec_list</span><span class="p">])</span>
        <span class="p">)</span>

        <span class="c1"># Get the name of the association table between file_table and file_type and add file_type records</span>
        <span class="n">atable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">find_association</span><span class="p">(</span><span class="n">MLTable</span><span class="o">.</span><span class="n">file</span><span class="p">,</span> <span class="n">MLVocab</span><span class="o">.</span><span class="n">asset_type</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
        <span class="c1"># Need to get a link between file record and file_types.</span>
        <span class="n">type_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">file_spec</span><span class="o">.</span><span class="n">md5</span><span class="p">:</span> <span class="n">file_spec</span><span class="o">.</span><span class="n">file_types</span> <span class="o">+</span> <span class="p">([]</span> <span class="k">if</span> <span class="s2">&quot;File&quot;</span> <span class="ow">in</span> <span class="n">file_spec</span><span class="o">.</span><span class="n">file_types</span> <span class="k">else</span> <span class="p">[])</span>
            <span class="k">for</span> <span class="n">file_spec</span> <span class="ow">in</span> <span class="n">filespec_list</span>
        <span class="p">}</span>
        <span class="n">file_type_records</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">asset_type</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">file_type</span><span class="p">,</span> <span class="s2">&quot;File&quot;</span><span class="p">:</span> <span class="n">file_record</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">]}</span>
            <span class="k">for</span> <span class="n">file_record</span> <span class="ow">in</span> <span class="n">file_records</span>
            <span class="k">for</span> <span class="n">file_type</span> <span class="ow">in</span> <span class="n">type_map</span><span class="p">[</span><span class="n">file_record</span><span class="p">[</span><span class="s2">&quot;MD5&quot;</span><span class="p">]]</span>
        <span class="p">]</span>
        <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">atable</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">file_type_records</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">execution_rid</span><span class="p">:</span>
            <span class="c1"># Get the name of the association table between file_table and execution.</span>
            <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">File_Execution</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="p">{</span><span class="s2">&quot;File&quot;</span><span class="p">:</span> <span class="n">file_record</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">],</span> <span class="s2">&quot;Execution&quot;</span><span class="p">:</span> <span class="n">execution_rid</span><span class="p">,</span> <span class="s2">&quot;Asset_Role&quot;</span><span class="p">:</span> <span class="s2">&quot;Output&quot;</span><span class="p">}</span>
                    <span class="k">for</span> <span class="n">file_record</span> <span class="ow">in</span> <span class="n">file_records</span>
                <span class="p">]</span>
            <span class="p">)</span>

        <span class="c1"># Now create datasets to capture the original directory structure of the files.</span>
        <span class="n">dir_rid_map</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">file_records</span><span class="p">:</span>
            <span class="n">dir_rid_map</span><span class="p">[</span><span class="n">Path</span><span class="p">(</span><span class="n">urlsplit</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;URL&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">])</span>

        <span class="n">nested_datasets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">path_length</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Start with the longest path so we get subdirectories first.</span>
        <span class="k">for</span> <span class="n">p</span><span class="p">,</span> <span class="n">rids</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">dir_rid_map</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">kv</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">kv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">parts</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="n">dataset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span>
                <span class="n">dataset_types</span><span class="o">=</span><span class="n">dataset_types</span><span class="p">,</span> <span class="n">execution_rid</span><span class="o">=</span><span class="n">execution_rid</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span>
            <span class="p">)</span>
            <span class="n">members</span> <span class="o">=</span> <span class="n">rids</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">path_length</span><span class="p">:</span>
                <span class="c1"># Going up one level in directory, so Create nested dataset</span>
                <span class="n">members</span> <span class="o">=</span> <span class="n">nested_datasets</span> <span class="o">+</span> <span class="n">rids</span>
                <span class="n">nested_datasets</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_dataset_members</span><span class="p">(</span><span class="n">dataset_rid</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span> <span class="n">members</span><span class="o">=</span><span class="n">members</span><span class="p">,</span> <span class="n">execution_rid</span><span class="o">=</span><span class="n">execution_rid</span><span class="p">)</span>
            <span class="n">nested_datasets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
            <span class="n">path_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">dataset</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">list_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lists files in the catalog with their metadata.</span>

<span class="sd">        Returns a list of files with their metadata including URL, MD5 hash, length, description,</span>
<span class="sd">        and associated file types. Files can be optionally filtered by type.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_types: Filter results to only include these file types.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[dict[str, Any]]: List of file records, each containing:</span>
<span class="sd">                - RID: Resource identifier</span>
<span class="sd">                - URL: File location</span>
<span class="sd">                - MD5: File hash</span>
<span class="sd">                - Length: File size</span>
<span class="sd">                - Description: File description</span>
<span class="sd">                - File_Types: List of associated file types</span>

<span class="sd">        Examples:</span>
<span class="sd">            List all files:</span>
<span class="sd">                &gt;&gt;&gt; files = ml.list_files()</span>
<span class="sd">                &gt;&gt;&gt; for f in files:</span>
<span class="sd">                ...     print(f&quot;{f[&#39;RID&#39;]}: {f[&#39;URL&#39;]}&quot;)</span>

<span class="sd">            Filter by file type:</span>
<span class="sd">                &gt;&gt;&gt; image_files = ml.list_files([&quot;image&quot;, &quot;png&quot;])</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">asset_type_atable</span><span class="p">,</span> <span class="n">file_fk</span><span class="p">,</span> <span class="n">asset_type_fk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">find_association</span><span class="p">(</span><span class="s2">&quot;File&quot;</span><span class="p">,</span> <span class="s2">&quot;Asset_Type&quot;</span><span class="p">)</span>
        <span class="n">ml_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathBuilder</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span><span class="p">]</span>
        <span class="n">file</span> <span class="o">=</span> <span class="n">ml_path</span><span class="o">.</span><span class="n">File</span>
        <span class="n">asset_type</span> <span class="o">=</span> <span class="n">ml_path</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">asset_type_atable</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">path</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">asset_type</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;AT&quot;</span><span class="p">),</span> <span class="n">on</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">RID</span> <span class="o">==</span> <span class="n">asset_type</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">file_fk</span><span class="p">],</span> <span class="n">join_type</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">file_types</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">asset_type</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">asset_type_fk</span><span class="p">]</span> <span class="o">==</span> <span class="n">datapath</span><span class="o">.</span><span class="n">Any</span><span class="p">(</span><span class="o">*</span><span class="n">file_types</span><span class="p">))</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">attributes</span><span class="p">(</span>
            <span class="n">path</span><span class="o">.</span><span class="n">File</span><span class="o">.</span><span class="n">RID</span><span class="p">,</span>
            <span class="n">path</span><span class="o">.</span><span class="n">File</span><span class="o">.</span><span class="n">URL</span><span class="p">,</span>
            <span class="n">path</span><span class="o">.</span><span class="n">File</span><span class="o">.</span><span class="n">MD5</span><span class="p">,</span>
            <span class="n">path</span><span class="o">.</span><span class="n">File</span><span class="o">.</span><span class="n">Length</span><span class="p">,</span>
            <span class="n">path</span><span class="o">.</span><span class="n">File</span><span class="o">.</span><span class="n">Description</span><span class="p">,</span>
            <span class="n">path</span><span class="o">.</span><span class="n">AT</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">asset_type_fk</span><span class="p">],</span>
        <span class="p">)</span>

        <span class="n">file_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">path</span><span class="o">.</span><span class="n">fetch</span><span class="p">():</span>
            <span class="n">entry</span> <span class="o">=</span> <span class="n">file_map</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">],</span> <span class="p">{</span><span class="o">**</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;File_Types&quot;</span><span class="p">:</span> <span class="p">[]})</span>
            <span class="k">if</span> <span class="n">ft</span> <span class="o">:=</span> <span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Asset_Type&quot;</span><span class="p">):</span>  <span class="c1"># assign-and-test in one go</span>
                <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;File_Types&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ft</span><span class="p">)</span>

        <span class="c1"># Now get rid of the File_Type key and return the result</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">f</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;Asset_Type&quot;</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">file_map</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">list_workflows</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Workflow</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lists all workflows in the catalog.</span>

<span class="sd">        Retrieves all workflow definitions, including their names, URLs, types, versions,</span>
<span class="sd">        and descriptions.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[Workflow]: List of workflow objects, each containing:</span>
<span class="sd">                - name: Workflow name</span>
<span class="sd">                - url: Source code URL</span>
<span class="sd">                - workflow_type: Type of workflow</span>
<span class="sd">                - version: Version identifier</span>
<span class="sd">                - description: Workflow description</span>
<span class="sd">                - rid: Resource identifier</span>
<span class="sd">                - checksum: Source code checksum</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; workflows = ml.list_workflows()</span>
<span class="sd">            &gt;&gt;&gt; for w in workflows:</span>
<span class="sd">                    print(f&quot;{w.name} (v{w.version}): {w.description}&quot;)</span>
<span class="sd">                    print(f&quot;  Source: {w.url}&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get a workflow table path and fetch all workflows</span>
        <span class="n">workflow_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathBuilder</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">Workflow</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">Workflow</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">w</span><span class="p">[</span><span class="s2">&quot;Name&quot;</span><span class="p">],</span>
                <span class="n">url</span><span class="o">=</span><span class="n">w</span><span class="p">[</span><span class="s2">&quot;URL&quot;</span><span class="p">],</span>
                <span class="n">workflow_type</span><span class="o">=</span><span class="n">w</span><span class="p">[</span><span class="s2">&quot;Workflow_Type&quot;</span><span class="p">],</span>
                <span class="n">version</span><span class="o">=</span><span class="n">w</span><span class="p">[</span><span class="s2">&quot;Version&quot;</span><span class="p">],</span>
                <span class="n">description</span><span class="o">=</span><span class="n">w</span><span class="p">[</span><span class="s2">&quot;Description&quot;</span><span class="p">],</span>
                <span class="n">rid</span><span class="o">=</span><span class="n">w</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">],</span>
                <span class="n">checksum</span><span class="o">=</span><span class="n">w</span><span class="p">[</span><span class="s2">&quot;Checksum&quot;</span><span class="p">],</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">workflow_path</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
        <span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_workflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workflow</span><span class="p">:</span> <span class="n">Workflow</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RID</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a workflow to the catalog.</span>

<span class="sd">        Registers a new workflow in the catalog or returns the RID of an existing workflow with the same</span>
<span class="sd">        URL or checksum.</span>

<span class="sd">        Each workflow represents a specific computational process or analysis pipeline.</span>

<span class="sd">        Args:</span>
<span class="sd">            workflow: Workflow object containing name, URL, type, version, and description.</span>

<span class="sd">        Returns:</span>
<span class="sd">            RID: Resource Identifier of the added or existing workflow.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If workflow insertion fails or required fields are missing.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; workflow = Workflow(</span>
<span class="sd">            ...     name=&quot;Gene Analysis&quot;,</span>
<span class="sd">            ...     url=&quot;https://github.com/org/repo/workflows/gene_analysis.py&quot;,</span>
<span class="sd">            ...     workflow_type=&quot;python_script&quot;,</span>
<span class="sd">            ...     version=&quot;1.0.0&quot;,</span>
<span class="sd">            ...     description=&quot;Analyzes gene expression patterns&quot;</span>
<span class="sd">            ... )</span>
<span class="sd">            &gt;&gt;&gt; workflow_rid = ml.add_workflow(workflow)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check if a workflow already exists by URL</span>
        <span class="k">if</span> <span class="n">workflow_rid</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_workflow</span><span class="p">(</span><span class="n">workflow</span><span class="o">.</span><span class="n">checksum</span> <span class="ow">or</span> <span class="n">workflow</span><span class="o">.</span><span class="n">url</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">workflow_rid</span>

        <span class="c1"># Get an ML schema path for the workflow table</span>
        <span class="n">ml_schema_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathBuilder</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span><span class="p">]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Create a workflow record</span>
            <span class="n">workflow_record</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;URL&quot;</span><span class="p">:</span> <span class="n">workflow</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
                <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">workflow</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;Description&quot;</span><span class="p">:</span> <span class="n">workflow</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
                <span class="s2">&quot;Checksum&quot;</span><span class="p">:</span> <span class="n">workflow</span><span class="o">.</span><span class="n">checksum</span><span class="p">,</span>
                <span class="s2">&quot;Version&quot;</span><span class="p">:</span> <span class="n">workflow</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
                <span class="n">MLVocab</span><span class="o">.</span><span class="n">workflow_type</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_term</span><span class="p">(</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">workflow_type</span><span class="p">,</span> <span class="n">workflow</span><span class="o">.</span><span class="n">workflow_type</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="c1"># Insert a workflow and get its RID</span>
            <span class="n">workflow_rid</span> <span class="o">=</span> <span class="n">ml_schema_path</span><span class="o">.</span><span class="n">Workflow</span><span class="o">.</span><span class="n">insert</span><span class="p">([</span><span class="n">workflow_record</span><span class="p">])[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;RID&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="n">format_exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to insert workflow. Error: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">workflow_rid</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">lookup_workflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url_or_checksum</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Finds a workflow by URL.</span>

<span class="sd">        Args:</span>
<span class="sd">            url_or_checksum: URL or checksum of the workflow.</span>
<span class="sd">        Returns:</span>
<span class="sd">            RID: Resource Identifier of the workflow if found, None otherwise.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; rid = ml.lookup_workflow(&quot;https://github.com/org/repo/workflow.py&quot;)</span>
<span class="sd">            &gt;&gt;&gt; if rid:</span>
<span class="sd">            ...     print(f&quot;Found workflow: {rid}&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get a workflow table path</span>
        <span class="n">workflow_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathBuilder</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">Workflow</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Search for workflow by URL</span>
            <span class="n">url_column</span> <span class="o">=</span> <span class="n">workflow_path</span><span class="o">.</span><span class="n">URL</span>
            <span class="n">checksum_column</span> <span class="o">=</span> <span class="n">workflow_path</span><span class="o">.</span><span class="n">Checksum</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span>
                <span class="n">workflow_path</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
                    <span class="p">(</span><span class="n">url_column</span> <span class="o">==</span> <span class="n">url_or_checksum</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">checksum_column</span> <span class="o">==</span> <span class="n">url_or_checksum</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span>
            <span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;RID&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_workflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">workflow_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Workflow</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a new workflow definition.</span>

<span class="sd">        Creates a Workflow object that represents a computational process or analysis pipeline. The workflow type</span>
<span class="sd">        must be a term from the controlled vocabulary. This method is typically used to define new analysis</span>
<span class="sd">        workflows before execution.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: Name of the workflow.</span>
<span class="sd">            workflow_type: Type of workflow (must exist in workflow_type vocabulary).</span>
<span class="sd">            description: Description of what the workflow does.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Workflow: New workflow object ready for registration.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If workflow_type is not in the vocabulary.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; workflow = ml.create_workflow(</span>
<span class="sd">            ...     name=&quot;RNA Analysis&quot;,</span>
<span class="sd">            ...     workflow_type=&quot;python_notebook&quot;,</span>
<span class="sd">            ...     description=&quot;RNA sequence analysis pipeline&quot;</span>
<span class="sd">            ... )</span>
<span class="sd">            &gt;&gt;&gt; rid = ml.add_workflow(workflow)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Validate workflow type exists in vocabulary</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lookup_term</span><span class="p">(</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">workflow_type</span><span class="p">,</span> <span class="n">workflow_type</span><span class="p">)</span>

        <span class="c1"># Create and return a new workflow object</span>
        <span class="k">return</span> <span class="n">Workflow</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">workflow_type</span><span class="o">=</span><span class="n">workflow_type</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_execution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configuration</span><span class="p">:</span> <span class="n">ExecutionConfiguration</span><span class="p">,</span> <span class="n">dry_run</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Execution&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates an execution environment.</span>

<span class="sd">        Given an execution configuration, initialize the local compute environment to prepare for executing an</span>
<span class="sd">        ML or analytic routine.  This routine has a number of side effects.</span>

<span class="sd">        1. The datasets specified in the configuration are downloaded and placed in the cache-dir. If a version is</span>
<span class="sd">        not specified in the configuration, then a new minor version number is created for the dataset and downloaded.</span>

<span class="sd">        2. If any execution assets are provided in the configuration, they are downloaded</span>
<span class="sd">        and placed in the working directory.</span>


<span class="sd">        Args:</span>
<span class="sd">            configuration: ExecutionConfiguration:</span>
<span class="sd">            dry_run: Do not create an execution record or upload results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An execution object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Import here to avoid circular dependency</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">deriva_ml.execution.execution</span><span class="w"> </span><span class="kn">import</span> <span class="n">Execution</span>

        <span class="c1"># Create and store an execution instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execution</span> <span class="o">=</span> <span class="n">Execution</span><span class="p">(</span><span class="n">configuration</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">dry_run</span><span class="o">=</span><span class="n">dry_run</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execution</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">restore_execution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Execution</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Restores a previous execution.</span>

<span class="sd">        Given an execution RID, retrieves the execution configuration and restores the local compute environment.</span>
<span class="sd">        This routine has a number of side effects.</span>

<span class="sd">        1. The datasets specified in the configuration are downloaded and placed in the cache-dir. If a version is</span>
<span class="sd">        not specified in the configuration, then a new minor version number is created for the dataset and downloaded.</span>

<span class="sd">        2. If any execution assets are provided in the configuration, they are downloaded and placed</span>
<span class="sd">        in the working directory.</span>

<span class="sd">        Args:</span>
<span class="sd">            execution_rid: Resource Identifier (RID) of the execution to restore.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Execution: An execution object representing the restored execution environment.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DerivaMLException: If execution_rid is not valid or execution cannot be restored.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; execution = ml.restore_execution(&quot;1-abc123&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Import here to avoid circular dependency</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">deriva_ml.execution.execution</span><span class="w"> </span><span class="kn">import</span> <span class="n">Execution</span>

        <span class="c1"># If no RID provided, try to find single execution in working directory</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">execution_rid</span><span class="p">:</span>
            <span class="n">e_rids</span> <span class="o">=</span> <span class="n">execution_rids</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">e_rids</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Multiple execution RIDs were found </span><span class="si">{</span><span class="n">e_rids</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
            <span class="n">execution_rid</span> <span class="o">=</span> <span class="n">e_rids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># Try to load configuration from a file</span>
        <span class="n">cfile</span> <span class="o">=</span> <span class="n">asset_file_path</span><span class="p">(</span>
            <span class="n">prefix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span><span class="p">,</span>
            <span class="n">exec_rid</span><span class="o">=</span><span class="n">execution_rid</span><span class="p">,</span>
            <span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;configuration.json&quot;</span><span class="p">,</span>
            <span class="n">asset_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="s2">&quot;Execution_Metadata&quot;</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">{},</span>
        <span class="p">)</span>

        <span class="c1"># Load configuration from a file or create from an execution record</span>
        <span class="k">if</span> <span class="n">cfile</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">configuration</span> <span class="o">=</span> <span class="n">ExecutionConfiguration</span><span class="o">.</span><span class="n">load_configuration</span><span class="p">(</span><span class="n">cfile</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">execution</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">retrieve_rid</span><span class="p">(</span><span class="n">execution_rid</span><span class="p">)</span>
            <span class="n">configuration</span> <span class="o">=</span> <span class="n">ExecutionConfiguration</span><span class="p">(</span>
                <span class="n">workflow</span><span class="o">=</span><span class="n">execution</span><span class="p">[</span><span class="s2">&quot;Workflow&quot;</span><span class="p">],</span>
                <span class="n">description</span><span class="o">=</span><span class="n">execution</span><span class="p">[</span><span class="s2">&quot;Description&quot;</span><span class="p">],</span>
            <span class="p">)</span>

        <span class="c1"># Create and return an execution instance</span>
        <span class="k">return</span> <span class="n">Execution</span><span class="p">(</span><span class="n">configuration</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">reload</span><span class="o">=</span><span class="n">execution_rid</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="deriva_ml.core.DerivaML.domain_path" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">domain_path</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">domain_path</span><span class="p">:</span> <span class="n">DataPath</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns path builder for domain schema.</p>
<p>Provides a convenient way to access tables and construct queries within the domain-specific schema.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="deriva.core.datapath.DataPath">DataPath</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>datapath._CatalogWrapper: Path builder object scoped to the domain schema.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>domain = ml.domain_path
results = domain.my_table.entities().fetch()</p>
</blockquote>
</blockquote>
</blockquote>
</details>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="deriva_ml.core.DerivaML.pathBuilder" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">pathBuilder</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">pathBuilder</span><span class="p">:</span> <span class="n">_SchemaWrapper</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns catalog path builder for queries.</p>
<p>The path builder provides a fluent interface for constructing complex queries against the catalog.
This is a core component used by many other methods to interact with the catalog.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="deriva.core.datapath._SchemaWrapper">_SchemaWrapper</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>datapath._CatalogWrapper: A new instance of the catalog path builder.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>path = ml.pathBuilder.schemas['my_schema'].tables['my_table']
results = path.entities().fetch()</p>
</blockquote>
</blockquote>
</blockquote>
</details>
    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.__del__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__del__</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">__del__</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Cleanup method to handle incomplete executions.</p>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cleanup method to handle incomplete executions.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Mark execution as aborted if not completed</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execution</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execution</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="n">Status</span><span class="o">.</span><span class="n">completed</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_execution</span><span class="o">.</span><span class="n">update_status</span><span class="p">(</span><span class="n">Status</span><span class="o">.</span><span class="n">aborted</span><span class="p">,</span> <span class="s2">&quot;Execution Aborted&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="n">requests</span><span class="o">.</span><span class="n">HTTPError</span><span class="p">):</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">__init__</span><span class="p">(</span>
    <span class="n">hostname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">catalog_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">domain_schema</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">project_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">cache_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">working_dir</span><span class="p">:</span> <span class="nb">str</span>
    <span class="o">|</span> <span class="n">Path</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ml_schema</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ML_SCHEMA</span><span class="p">,</span>
    <span class="n">logging_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>
    <span class="n">credential</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">use_minid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">check_auth</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initializes a DerivaML instance.</p>
<p>This method will connect to a catalog and initialize local configuration for the ML execution.
This class is intended to be used as a base class on which domain-specific interfaces are built.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>hostname</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Hostname of the Deriva server.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>catalog_id</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Catalog ID. Either an identifier or a catalog name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>domain_schema</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Schema name for domain-specific tables and relationships. Defaults to the name of the
schema that is not one of the standard schemas.  If there is more than one user-defined schema, then
this argument must be provided a value.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ml_schema</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Schema name for ML schema. Used if you have a non-standard configuration of deriva-ml.</p>
              </div>
            </td>
            <td>
                  <code><span title="deriva_ml.core.definitions.ML_SCHEMA">ML_SCHEMA</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>project_name</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Project name. Defaults to name of domain schema.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cache_dir</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="pathlib.Path">Path</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Directory path for caching data downloaded from the Deriva server as bdbag. If not provided,
will default to working_dir.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>working_dir</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="pathlib.Path">Path</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Directory path for storing data used by or generated by any computations. If no value is
provided, will default to  ${HOME}/deriva_ml</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>use_minid</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Use the MINID service when downloading dataset bags.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>check_auth</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Check if the user has access to the catalog.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">hostname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">catalog_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">domain_schema</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">project_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">cache_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">working_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ml_schema</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ML_SCHEMA</span><span class="p">,</span>
    <span class="n">logging_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>
    <span class="n">credential</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">use_minid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">check_auth</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes a DerivaML instance.</span>

<span class="sd">    This method will connect to a catalog and initialize local configuration for the ML execution.</span>
<span class="sd">    This class is intended to be used as a base class on which domain-specific interfaces are built.</span>

<span class="sd">    Args:</span>
<span class="sd">        hostname: Hostname of the Deriva server.</span>
<span class="sd">        catalog_id: Catalog ID. Either an identifier or a catalog name.</span>
<span class="sd">        domain_schema: Schema name for domain-specific tables and relationships. Defaults to the name of the</span>
<span class="sd">            schema that is not one of the standard schemas.  If there is more than one user-defined schema, then</span>
<span class="sd">            this argument must be provided a value.</span>
<span class="sd">        ml_schema: Schema name for ML schema. Used if you have a non-standard configuration of deriva-ml.</span>
<span class="sd">        project_name: Project name. Defaults to name of domain schema.</span>
<span class="sd">        cache_dir: Directory path for caching data downloaded from the Deriva server as bdbag. If not provided,</span>
<span class="sd">            will default to working_dir.</span>
<span class="sd">        working_dir: Directory path for storing data used by or generated by any computations. If no value is</span>
<span class="sd">            provided, will default to  ${HOME}/deriva_ml</span>
<span class="sd">        use_minid: Use the MINID service when downloading dataset bags.</span>
<span class="sd">        check_auth: Check if the user has access to the catalog.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get or use provided credentials for server access</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">credential</span> <span class="o">=</span> <span class="n">credential</span> <span class="ow">or</span> <span class="n">get_credential</span><span class="p">(</span><span class="n">hostname</span><span class="p">)</span>

    <span class="c1"># Initialize server connection and catalog access</span>
    <span class="n">server</span> <span class="o">=</span> <span class="n">DerivaServer</span><span class="p">(</span>
        <span class="s2">&quot;https&quot;</span><span class="p">,</span>
        <span class="n">hostname</span><span class="p">,</span>
        <span class="n">credentials</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">credential</span><span class="p">,</span>
        <span class="n">session_config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_session_config</span><span class="p">(),</span>
    <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">check_auth</span> <span class="ow">and</span> <span class="n">server</span><span class="o">.</span><span class="n">get_authn_session</span><span class="p">():</span>
            <span class="k">pass</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span>
            <span class="s2">&quot;You are not authorized to access this catalog. &quot;</span>
            <span class="s2">&quot;Please check your credentials and make sure you have logged in.&quot;</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">connect_ermrest</span><span class="p">(</span><span class="n">catalog_id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">DerivaModel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getCatalogModel</span><span class="p">(),</span> <span class="n">domain_schema</span><span class="o">=</span><span class="n">domain_schema</span><span class="p">)</span>

    <span class="c1"># Set up working and cache directories</span>
    <span class="n">default_workdir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot;_working&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Path</span><span class="p">(</span><span class="n">working_dir</span><span class="p">)</span> <span class="o">/</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getuser</span><span class="p">()</span> <span class="k">if</span> <span class="n">working_dir</span> <span class="k">else</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;deriva-ml&quot;</span>
    <span class="p">)</span> <span class="o">/</span> <span class="n">default_workdir</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">cache_dir</span><span class="p">)</span> <span class="k">if</span> <span class="n">cache_dir</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span> <span class="o">/</span> <span class="s2">&quot;cache&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Initialize dataset functionality from the parent class</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span><span class="p">,</span> <span class="n">use_minid</span><span class="o">=</span><span class="n">use_minid</span><span class="p">)</span>

    <span class="c1"># Set up logging</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;deriva_ml&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging_level</span><span class="p">)</span>

    <span class="c1"># Store instance configuration</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">host_name</span> <span class="o">=</span> <span class="n">hostname</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">catalog_id</span> <span class="o">=</span> <span class="n">catalog_id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span> <span class="o">=</span> <span class="n">ml_schema</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_execution</span><span class="p">:</span> <span class="n">Execution</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">domain_schema</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">project_name</span> <span class="o">=</span> <span class="n">project_name</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">pending</span><span class="o">.</span><span class="n">value</span>

    <span class="c1"># Configure logging format</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
        <span class="n">level</span><span class="o">=</span><span class="n">logging_level</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(asctime)s</span><span class="s2"> - </span><span class="si">%(name)s</span><span class="s2">.</span><span class="si">%(levelname)s</span><span class="s2"> - </span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Set Deriva library logging level</span>
    <span class="n">deriva_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;deriva&quot;</span><span class="p">)</span>
    <span class="n">deriva_logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging_level</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.add_dataset_element_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">add_dataset_element_type</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_dataset_element_type</span><span class="p">(</span>
    <span class="n">element</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>A dataset_table is a heterogeneous collection of objects, each of which comes from a different table. This
routine makes it possible to add objects from the specified table to a dataset_table.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>element</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="deriva.core.ermrest_model.Table">Table</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the table or table object that is to be added to the dataset_table.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="deriva.core.ermrest_model.Table">Table</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The table object that was added to the dataset_table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/dataset/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">add_dataset_element_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A dataset_table is a heterogeneous collection of objects, each of which comes from a different table. This</span>
<span class="sd">    routine makes it possible to add objects from the specified table to a dataset_table.</span>

<span class="sd">    Args:</span>
<span class="sd">        element: Name of the table or table object that is to be added to the dataset_table.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The table object that was added to the dataset_table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Add table to map</span>
    <span class="n">element_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    <span class="n">atable_def</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">define_association</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span><span class="p">,</span> <span class="n">element_table</span><span class="p">])</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">domain_schema</span><span class="p">]</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">atable_def</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;already exists&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
            <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">atable_def</span><span class="p">[</span><span class="s2">&quot;table_name&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>

    <span class="c1"># self.model = self.catalog.getCatalogModel()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span><span class="o">.</span><span class="n">annotations</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_generate_dataset_download_annotations</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">apply</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">table</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.add_dataset_members" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">add_dataset_members</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_dataset_members</span><span class="p">(</span>
    <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span>
    <span class="n">members</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">RID</span><span class="p">]</span>
    <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">RID</span><span class="p">]],</span>
    <span class="n">validate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Adds members to a dataset.</p>
<p>Associates one or more records with a dataset. Can optionally validate member types
and create a new dataset version to track the changes.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dataset_rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.constants.RID">RID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resource Identifier of the dataset.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>members</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="deriva_ml.core.constants.RID">RID</span>] | <span title="dict">dict</span>[<span title="str">str</span>, <span title="list">list</span>[<span title="deriva_ml.core.constants.RID">RID</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of RIDs to add as dataset members. Can be orginized into a dictionary that indicates the
table that the member rids belong to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>validate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to validate member types. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>description</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional description of the member additions.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>execution_rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.constants.RID">RID</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional execution RID to associate with changes.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If:
- dataset_rid is invalid
- members are invalid or of wrong type
- adding members would create a cycle
- validation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>ml.add_dataset_members(
...     dataset_rid="1-abc123",
...     members=["1-def456", "1-ghi789"],
...     description="Added sample data"
... )</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/dataset/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_call</span>
<span class="k">def</span><span class="w"> </span><span class="nf">add_dataset_members</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span>
    <span class="n">members</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">RID</span><span class="p">]</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">RID</span><span class="p">]],</span>
    <span class="n">validate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds members to a dataset.</span>

<span class="sd">    Associates one or more records with a dataset. Can optionally validate member types</span>
<span class="sd">    and create a new dataset version to track the changes.</span>

<span class="sd">    Args:</span>
<span class="sd">        dataset_rid: Resource Identifier of the dataset.</span>
<span class="sd">        members: List of RIDs to add as dataset members. Can be orginized into a dictionary that indicates the</span>
<span class="sd">            table that the member rids belong to.</span>
<span class="sd">        validate: Whether to validate member types. Defaults to True.</span>
<span class="sd">        description: Optional description of the member additions.</span>
<span class="sd">        execution_rid: Optional execution RID to associate with changes.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If:</span>
<span class="sd">            - dataset_rid is invalid</span>
<span class="sd">            - members are invalid or of wrong type</span>
<span class="sd">            - adding members would create a cycle</span>
<span class="sd">            - validation fails</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; ml.add_dataset_members(</span>
<span class="sd">        ...     dataset_rid=&quot;1-abc123&quot;,</span>
<span class="sd">        ...     members=[&quot;1-def456&quot;, &quot;1-ghi789&quot;],</span>
<span class="sd">        ...     description=&quot;Added sample data&quot;</span>
<span class="sd">        ... )</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="ow">or</span> <span class="s2">&quot;Updated dataset via add_dataset_members&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_dataset_cycle</span><span class="p">(</span><span class="n">member_rid</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Args:</span>
<span class="sd">          member_rid:</span>
<span class="sd">          path: (Default value = None)</span>

<span class="sd">        Returns:</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">path</span> <span class="ow">or</span> <span class="nb">set</span><span class="p">(</span><span class="n">dataset_rid</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">member_rid</span> <span class="ow">in</span> <span class="n">path</span>

    <span class="k">if</span> <span class="n">validate</span><span class="p">:</span>
        <span class="n">existing_rids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">ms</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_dataset_members</span><span class="p">(</span><span class="n">dataset_rid</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">ms</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">overlap</span> <span class="o">:=</span> <span class="nb">set</span><span class="p">(</span><span class="n">existing_rids</span><span class="p">)</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">members</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attempting to add existing member to dataset_table </span><span class="si">{</span><span class="n">dataset_rid</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">overlap</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Now go through every rid to be added to the data set and sort them based on what association table entries</span>
    <span class="c1"># need to be made.</span>
    <span class="n">dataset_elements</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">association_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">a</span><span class="o">.</span><span class="n">other_fkeys</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span><span class="o">.</span><span class="n">pk_table</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span><span class="o">.</span><span class="n">find_associations</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="c1"># Get a list of all the object types that can be linked to a dataset_table.</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">members</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
        <span class="n">members</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">members</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">members</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">rid_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">resolve_rid</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid RID: </span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">rid_info</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">association_map</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;RID table: </span><span class="si">{</span><span class="n">rid_info</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> not part of dataset_table&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">rid_info</span><span class="o">.</span><span class="n">table</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span> <span class="ow">and</span> <span class="n">check_dataset_cycle</span><span class="p">(</span><span class="n">rid_info</span><span class="o">.</span><span class="n">rid</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="s2">&quot;Creating cycle of datasets is not allowed&quot;</span><span class="p">)</span>
            <span class="n">dataset_elements</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">rid_info</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rid_info</span><span class="o">.</span><span class="n">rid</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">dataset_elements</span> <span class="o">=</span> <span class="p">{</span><span class="n">t</span><span class="p">:</span> <span class="nb">set</span><span class="p">(</span><span class="n">ms</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span><span class="p">,</span> <span class="n">ms</span> <span class="ow">in</span> <span class="n">members</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="c1"># Now make the entries into the association tables.</span>
    <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">table</span><span class="p">,</span> <span class="n">elements</span> <span class="ow">in</span> <span class="n">dataset_elements</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">schema_path</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span> <span class="k">if</span> <span class="p">(</span><span class="n">table</span> <span class="o">==</span> <span class="s2">&quot;Dataset&quot;</span> <span class="ow">or</span> <span class="n">table</span> <span class="o">==</span> <span class="s2">&quot;File&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">domain_schema</span>
        <span class="p">]</span>
        <span class="n">fk_column</span> <span class="o">=</span> <span class="s2">&quot;Nested_Dataset&quot;</span> <span class="k">if</span> <span class="n">table</span> <span class="o">==</span> <span class="s2">&quot;Dataset&quot;</span> <span class="k">else</span> <span class="n">table</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">):</span>
            <span class="c1"># Find out the name of the column in the association table.</span>
            <span class="n">schema_path</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">association_map</span><span class="p">[</span><span class="n">table</span><span class="p">]]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
                <span class="p">[{</span><span class="s2">&quot;Dataset&quot;</span><span class="p">:</span> <span class="n">dataset_rid</span><span class="p">,</span> <span class="n">fk_column</span><span class="p">:</span> <span class="n">e</span><span class="p">}</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">]</span>
            <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">increment_dataset_version</span><span class="p">(</span>
        <span class="n">dataset_rid</span><span class="p">,</span>
        <span class="n">VersionPart</span><span class="o">.</span><span class="n">minor</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
        <span class="n">execution_rid</span><span class="o">=</span><span class="n">execution_rid</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.add_files" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">add_files</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_files</span><span class="p">(</span>
    <span class="n">files</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">FileSpec</span><span class="p">],</span>
    <span class="n">dataset_types</span><span class="p">:</span> <span class="nb">str</span>
    <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RID</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Adds files to the catalog with their metadata.</p>
<p>Registers files in the catalog along with their metadata (MD5, length, URL) and associates them with
specified file types. Optionally links files to an execution record.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>files</code>
            </td>
            <td>
                  <code><span title="typing.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" title="FileSpec (deriva_ml.core.definitions.FileSpec)" href="../deriva_definitions/#deriva_ml.core.definitions.FileSpec">FileSpec</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>File specifications containing MD5 checksum, length, and URL.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dataset_types</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="list">list</span>[<span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>One or more dataset type terms from File_Type vocabulary.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>description</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Description of the files.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>execution_rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.definitions.RID">RID</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional execution RID to associate files with.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>RID</code></td>            <td>
                  <code><span title="deriva_ml.core.definitions.RID">RID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resource of dataset that represents the newly added files.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If file_types are invalid or execution_rid is not an execution record.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Add a single file type:
    &gt;&gt;&gt; files = [FileSpec(url="path/to/file.txt", md5="abc123", length=1000)]
    &gt;&gt;&gt; rids = ml.add_files(files, file_types="text")</p>
<p>Add multiple file types:
    &gt;&gt;&gt; rids = ml.add_files(
    ...     files=[FileSpec(url="image.png", md5="def456", length=2000)],
    ...     file_types=["image", "png"],
    ...     execution_rid="1-xyz789"
    ... )</p>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">add_files</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">files</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">FileSpec</span><span class="p">],</span>
    <span class="n">dataset_types</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RID</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds files to the catalog with their metadata.</span>

<span class="sd">    Registers files in the catalog along with their metadata (MD5, length, URL) and associates them with</span>
<span class="sd">    specified file types. Optionally links files to an execution record.</span>

<span class="sd">    Args:</span>
<span class="sd">        files: File specifications containing MD5 checksum, length, and URL.</span>
<span class="sd">        dataset_types: One or more dataset type terms from File_Type vocabulary.</span>
<span class="sd">        description: Description of the files.</span>
<span class="sd">        execution_rid: Optional execution RID to associate files with.</span>

<span class="sd">    Returns:</span>
<span class="sd">        RID: Resource of dataset that represents the newly added files.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If file_types are invalid or execution_rid is not an execution record.</span>

<span class="sd">    Examples:</span>
<span class="sd">        Add a single file type:</span>
<span class="sd">            &gt;&gt;&gt; files = [FileSpec(url=&quot;path/to/file.txt&quot;, md5=&quot;abc123&quot;, length=1000)]</span>
<span class="sd">            &gt;&gt;&gt; rids = ml.add_files(files, file_types=&quot;text&quot;)</span>

<span class="sd">        Add multiple file types:</span>
<span class="sd">            &gt;&gt;&gt; rids = ml.add_files(</span>
<span class="sd">            ...     files=[FileSpec(url=&quot;image.png&quot;, md5=&quot;def456&quot;, length=2000)],</span>
<span class="sd">            ...     file_types=[&quot;image&quot;, &quot;png&quot;],</span>
<span class="sd">            ...     execution_rid=&quot;1-xyz789&quot;</span>
<span class="sd">            ... )</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">execution_rid</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolve_rid</span><span class="p">(</span><span class="n">execution_rid</span><span class="p">)</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;Execution&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DerivaMLTableTypeError</span><span class="p">(</span><span class="s2">&quot;Execution&quot;</span><span class="p">,</span> <span class="n">execution_rid</span><span class="p">)</span>

    <span class="n">filespec_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>

    <span class="c1"># Get a list of all defined file types and their synonyms.</span>
    <span class="n">defined_types</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
        <span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">([[</span><span class="n">t</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">+</span> <span class="n">t</span><span class="o">.</span><span class="n">synonyms</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_vocabulary_terms</span><span class="p">(</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">asset_type</span><span class="p">)])</span>
    <span class="p">)</span>

    <span class="c1"># Get a list of al of the file types used in the filespec_list</span>
    <span class="n">spec_types</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">filespec</span><span class="o">.</span><span class="n">file_types</span> <span class="k">for</span> <span class="n">filespec</span> <span class="ow">in</span> <span class="n">filespec_list</span><span class="p">))</span>

    <span class="c1"># Now make sure that all of the file types and dataset_types in the spec list are defined.</span>
    <span class="k">if</span> <span class="n">spec_types</span> <span class="o">-</span> <span class="n">defined_types</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DerivaMLInvalidTerm</span><span class="p">(</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">asset_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec_types</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">defined_types</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Normalize dataset_types, make sure FIle type is included.</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dataset_types</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">dataset_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">dataset_types</span> <span class="k">if</span> <span class="s2">&quot;File&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dataset_types</span> <span class="k">else</span> <span class="n">dataset_types</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">dataset_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">,</span> <span class="n">dataset_types</span><span class="p">]</span> <span class="k">if</span> <span class="n">dataset_types</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">ds_type</span> <span class="ow">in</span> <span class="n">dataset_types</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lookup_term</span><span class="p">(</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">dataset_type</span><span class="p">,</span> <span class="n">ds_type</span><span class="p">)</span>

    <span class="c1"># Add files to the file table, and collect up the resulting entries by directory name.</span>
    <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
    <span class="n">file_records</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
        <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">([</span><span class="n">f</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">by_alias</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">filespec_list</span><span class="p">])</span>
    <span class="p">)</span>

    <span class="c1"># Get the name of the association table between file_table and file_type and add file_type records</span>
    <span class="n">atable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">find_association</span><span class="p">(</span><span class="n">MLTable</span><span class="o">.</span><span class="n">file</span><span class="p">,</span> <span class="n">MLVocab</span><span class="o">.</span><span class="n">asset_type</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
    <span class="c1"># Need to get a link between file record and file_types.</span>
    <span class="n">type_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">file_spec</span><span class="o">.</span><span class="n">md5</span><span class="p">:</span> <span class="n">file_spec</span><span class="o">.</span><span class="n">file_types</span> <span class="o">+</span> <span class="p">([]</span> <span class="k">if</span> <span class="s2">&quot;File&quot;</span> <span class="ow">in</span> <span class="n">file_spec</span><span class="o">.</span><span class="n">file_types</span> <span class="k">else</span> <span class="p">[])</span>
        <span class="k">for</span> <span class="n">file_spec</span> <span class="ow">in</span> <span class="n">filespec_list</span>
    <span class="p">}</span>
    <span class="n">file_type_records</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">asset_type</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">file_type</span><span class="p">,</span> <span class="s2">&quot;File&quot;</span><span class="p">:</span> <span class="n">file_record</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">]}</span>
        <span class="k">for</span> <span class="n">file_record</span> <span class="ow">in</span> <span class="n">file_records</span>
        <span class="k">for</span> <span class="n">file_type</span> <span class="ow">in</span> <span class="n">type_map</span><span class="p">[</span><span class="n">file_record</span><span class="p">[</span><span class="s2">&quot;MD5&quot;</span><span class="p">]]</span>
    <span class="p">]</span>
    <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">atable</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">file_type_records</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">execution_rid</span><span class="p">:</span>
        <span class="c1"># Get the name of the association table between file_table and execution.</span>
        <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">File_Execution</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">{</span><span class="s2">&quot;File&quot;</span><span class="p">:</span> <span class="n">file_record</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">],</span> <span class="s2">&quot;Execution&quot;</span><span class="p">:</span> <span class="n">execution_rid</span><span class="p">,</span> <span class="s2">&quot;Asset_Role&quot;</span><span class="p">:</span> <span class="s2">&quot;Output&quot;</span><span class="p">}</span>
                <span class="k">for</span> <span class="n">file_record</span> <span class="ow">in</span> <span class="n">file_records</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="c1"># Now create datasets to capture the original directory structure of the files.</span>
    <span class="n">dir_rid_map</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">file_records</span><span class="p">:</span>
        <span class="n">dir_rid_map</span><span class="p">[</span><span class="n">Path</span><span class="p">(</span><span class="n">urlsplit</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;URL&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">])</span>

    <span class="n">nested_datasets</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">path_length</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">dataset</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># Start with the longest path so we get subdirectories first.</span>
    <span class="k">for</span> <span class="n">p</span><span class="p">,</span> <span class="n">rids</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">dir_rid_map</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">kv</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">kv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">parts</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span>
            <span class="n">dataset_types</span><span class="o">=</span><span class="n">dataset_types</span><span class="p">,</span> <span class="n">execution_rid</span><span class="o">=</span><span class="n">execution_rid</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span>
        <span class="p">)</span>
        <span class="n">members</span> <span class="o">=</span> <span class="n">rids</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">path_length</span><span class="p">:</span>
            <span class="c1"># Going up one level in directory, so Create nested dataset</span>
            <span class="n">members</span> <span class="o">=</span> <span class="n">nested_datasets</span> <span class="o">+</span> <span class="n">rids</span>
            <span class="n">nested_datasets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_dataset_members</span><span class="p">(</span><span class="n">dataset_rid</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span> <span class="n">members</span><span class="o">=</span><span class="n">members</span><span class="p">,</span> <span class="n">execution_rid</span><span class="o">=</span><span class="n">execution_rid</span><span class="p">)</span>
        <span class="n">nested_datasets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
        <span class="n">path_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">dataset</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.add_page" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">add_page</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_page</span><span class="p">(</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Adds page to web interface.</p>
<p>Creates a new page in the catalog's web interface with the specified title and content. The page will be
accessible through the catalog's navigation system.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>title</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the page to be displayed in navigation and headers.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The main content of the page can include HTML markup.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the page creation fails or the user lacks necessary permissions.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>ml.add_page(
...     title="Analysis Results",
...     content="<h1>Results</h1><p>Analysis completed successfully...</p>"
... )</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds page to web interface.</span>

<span class="sd">    Creates a new page in the catalog&#39;s web interface with the specified title and content. The page will be</span>
<span class="sd">    accessible through the catalog&#39;s navigation system.</span>

<span class="sd">    Args:</span>
<span class="sd">        title: The title of the page to be displayed in navigation and headers.</span>
<span class="sd">        content: The main content of the page can include HTML markup.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If the page creation fails or the user lacks necessary permissions.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; ml.add_page(</span>
<span class="sd">        ...     title=&quot;Analysis Results&quot;,</span>
<span class="sd">        ...     content=&quot;&lt;h1&gt;Results&lt;/h1&gt;&lt;p&gt;Analysis completed successfully...&lt;/p&gt;&quot;</span>
<span class="sd">        ... )</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Insert page into www tables with title and content</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pathBuilder</span><span class="o">.</span><span class="n">www</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">([{</span><span class="s2">&quot;Title&quot;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span> <span class="s2">&quot;Content&quot;</span><span class="p">:</span> <span class="n">content</span><span class="p">}])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.add_term" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">add_term</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_term</span><span class="p">(</span>
    <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">,</span>
    <span class="n">term_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">synonyms</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">exists_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">VocabularyTerm</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Adds a term to a vocabulary table.</p>
<p>Creates a new standardized term with description and optional synonyms in a vocabulary table.
Can either create a new term or return an existing one if it already exists.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>table</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="deriva.core.ermrest_model.Table">Table</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Vocabulary table to add term to (name or Table object).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>term_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Primary name of the term (must be unique within vocabulary).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>description</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Explanation of term's meaning and usage.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>synonyms</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Alternative names for the term.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exists_ok</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, return the existing term if found. If False, raise error.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>VocabularyTerm</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="VocabularyTerm (deriva_ml.core.definitions.VocabularyTerm)" href="../deriva_definitions/#deriva_ml.core.definitions.VocabularyTerm">VocabularyTerm</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Object representing the created or existing term.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If a term exists and exists_ok=False, or if the table is not a vocabulary table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Add a new tissue type:
    &gt;&gt;&gt; term = ml.add_term(
    ...     table="tissue_types",
    ...     term_name="epithelial",
    ...     description="Epithelial tissue type",
    ...     synonyms=["epithelium"]
    ... )</p>
<p>Attempt to add an existing term:
    &gt;&gt;&gt; term = ml.add_term("tissue_types", "epithelial", "...", exists_ok=True)</p>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">add_term</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">,</span>
    <span class="n">term_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">synonyms</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">exists_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">VocabularyTerm</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a term to a vocabulary table.</span>

<span class="sd">    Creates a new standardized term with description and optional synonyms in a vocabulary table.</span>
<span class="sd">    Can either create a new term or return an existing one if it already exists.</span>

<span class="sd">    Args:</span>
<span class="sd">        table: Vocabulary table to add term to (name or Table object).</span>
<span class="sd">        term_name: Primary name of the term (must be unique within vocabulary).</span>
<span class="sd">        description: Explanation of term&#39;s meaning and usage.</span>
<span class="sd">        synonyms: Alternative names for the term.</span>
<span class="sd">        exists_ok: If True, return the existing term if found. If False, raise error.</span>

<span class="sd">    Returns:</span>
<span class="sd">        VocabularyTerm: Object representing the created or existing term.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If a term exists and exists_ok=False, or if the table is not a vocabulary table.</span>

<span class="sd">    Examples:</span>
<span class="sd">        Add a new tissue type:</span>
<span class="sd">            &gt;&gt;&gt; term = ml.add_term(</span>
<span class="sd">            ...     table=&quot;tissue_types&quot;,</span>
<span class="sd">            ...     term_name=&quot;epithelial&quot;,</span>
<span class="sd">            ...     description=&quot;Epithelial tissue type&quot;,</span>
<span class="sd">            ...     synonyms=[&quot;epithelium&quot;]</span>
<span class="sd">            ... )</span>

<span class="sd">        Attempt to add an existing term:</span>
<span class="sd">            &gt;&gt;&gt; term = ml.add_term(&quot;tissue_types&quot;, &quot;epithelial&quot;, &quot;...&quot;, exists_ok=True)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Initialize an empty synonyms list if None</span>
    <span class="n">synonyms</span> <span class="o">=</span> <span class="n">synonyms</span> <span class="ow">or</span> <span class="p">[]</span>

    <span class="c1"># Get table reference and validate if it is a vocabulary table</span>
    <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
    <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">is_vocabulary</span><span class="p">(</span><span class="n">table</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="n">DerivaMLTableTypeError</span><span class="p">(</span><span class="s2">&quot;vocabulary&quot;</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="c1"># Get schema and table names for path building</span>
    <span class="n">schema_name</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span>
    <span class="n">table_name</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">name</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Attempt to insert a new term</span>
        <span class="n">term_id</span> <span class="o">=</span> <span class="n">VocabularyTerm</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span>
            <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">schema_name</span><span class="p">]</span>
            <span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span>
            <span class="o">.</span><span class="n">insert</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">term_name</span><span class="p">,</span>
                        <span class="s2">&quot;Description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
                        <span class="s2">&quot;Synonyms&quot;</span><span class="p">:</span> <span class="n">synonyms</span><span class="p">,</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="n">defaults</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;URI&quot;</span><span class="p">},</span>
            <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="n">DataPathException</span><span class="p">:</span>
        <span class="c1"># Term exists - look it up or raise an error</span>
        <span class="n">term_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_term</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">term_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">exists_ok</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DerivaMLInvalidTerm</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">term_name</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;term already exists&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">term_id</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.add_workflow" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">add_workflow</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_workflow</span><span class="p">(</span><span class="n">workflow</span><span class="p">:</span> <span class="n">Workflow</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RID</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Adds a workflow to the catalog.</p>
<p>Registers a new workflow in the catalog or returns the RID of an existing workflow with the same
URL or checksum.</p>
<p>Each workflow represents a specific computational process or analysis pipeline.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>workflow</code>
            </td>
            <td>
                  <code><span title="deriva_ml.execution.workflow.Workflow">Workflow</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Workflow object containing name, URL, type, version, and description.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>RID</code></td>            <td>
                  <code><span title="deriva_ml.core.definitions.RID">RID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resource Identifier of the added or existing workflow.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If workflow insertion fails or required fields are missing.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">workflow</span> <span class="o">=</span> <span class="n">Workflow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Gene Analysis&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://github.com/org/repo/workflows/gene_analysis.py&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">workflow_type</span><span class="o">=</span><span class="s2">&quot;python_script&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Analyzes gene expression patterns&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">workflow_rid</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">add_workflow</span><span class="p">(</span><span class="n">workflow</span><span class="p">)</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_workflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workflow</span><span class="p">:</span> <span class="n">Workflow</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RID</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a workflow to the catalog.</span>

<span class="sd">    Registers a new workflow in the catalog or returns the RID of an existing workflow with the same</span>
<span class="sd">    URL or checksum.</span>

<span class="sd">    Each workflow represents a specific computational process or analysis pipeline.</span>

<span class="sd">    Args:</span>
<span class="sd">        workflow: Workflow object containing name, URL, type, version, and description.</span>

<span class="sd">    Returns:</span>
<span class="sd">        RID: Resource Identifier of the added or existing workflow.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If workflow insertion fails or required fields are missing.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; workflow = Workflow(</span>
<span class="sd">        ...     name=&quot;Gene Analysis&quot;,</span>
<span class="sd">        ...     url=&quot;https://github.com/org/repo/workflows/gene_analysis.py&quot;,</span>
<span class="sd">        ...     workflow_type=&quot;python_script&quot;,</span>
<span class="sd">        ...     version=&quot;1.0.0&quot;,</span>
<span class="sd">        ...     description=&quot;Analyzes gene expression patterns&quot;</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; workflow_rid = ml.add_workflow(workflow)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if a workflow already exists by URL</span>
    <span class="k">if</span> <span class="n">workflow_rid</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_workflow</span><span class="p">(</span><span class="n">workflow</span><span class="o">.</span><span class="n">checksum</span> <span class="ow">or</span> <span class="n">workflow</span><span class="o">.</span><span class="n">url</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">workflow_rid</span>

    <span class="c1"># Get an ML schema path for the workflow table</span>
    <span class="n">ml_schema_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathBuilder</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span><span class="p">]</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Create a workflow record</span>
        <span class="n">workflow_record</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;URL&quot;</span><span class="p">:</span> <span class="n">workflow</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
            <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">workflow</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;Description&quot;</span><span class="p">:</span> <span class="n">workflow</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
            <span class="s2">&quot;Checksum&quot;</span><span class="p">:</span> <span class="n">workflow</span><span class="o">.</span><span class="n">checksum</span><span class="p">,</span>
            <span class="s2">&quot;Version&quot;</span><span class="p">:</span> <span class="n">workflow</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
            <span class="n">MLVocab</span><span class="o">.</span><span class="n">workflow_type</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_term</span><span class="p">(</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">workflow_type</span><span class="p">,</span> <span class="n">workflow</span><span class="o">.</span><span class="n">workflow_type</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="c1"># Insert a workflow and get its RID</span>
        <span class="n">workflow_rid</span> <span class="o">=</span> <span class="n">ml_schema_path</span><span class="o">.</span><span class="n">Workflow</span><span class="o">.</span><span class="n">insert</span><span class="p">([</span><span class="n">workflow_record</span><span class="p">])[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;RID&quot;</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">format_exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to insert workflow. Error: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">workflow_rid</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.chaise_url" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">chaise_url</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">chaise_url</span><span class="p">(</span>
    <span class="n">table</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Generates Chaise web interface URL.</p>
<p>Chaise is Deriva's web interface for data exploration. This method creates a URL that directly links to
the specified table or record.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>table</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.definitions.RID">RID</span> | <span title="deriva.core.ermrest_model.Table">Table</span> | <span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Table to generate URL for (name, Table object, or RID).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>URL in format: https://{host}/chaise/recordset/#{catalog}/{schema}:{table}</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If table or RID cannot be found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Using table name:
    &gt;&gt;&gt; ml.chaise_url("experiment_table")
    'https://deriva.org/chaise/recordset/#1/schema:experiment_table'</p>
<p>Using RID:
    &gt;&gt;&gt; ml.chaise_url("1-abc123")</p>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">chaise_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates Chaise web interface URL.</span>

<span class="sd">    Chaise is Deriva&#39;s web interface for data exploration. This method creates a URL that directly links to</span>
<span class="sd">    the specified table or record.</span>

<span class="sd">    Args:</span>
<span class="sd">        table: Table to generate URL for (name, Table object, or RID).</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: URL in format: https://{host}/chaise/recordset/#{catalog}/{schema}:{table}</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If table or RID cannot be found.</span>

<span class="sd">    Examples:</span>
<span class="sd">        Using table name:</span>
<span class="sd">            &gt;&gt;&gt; ml.chaise_url(&quot;experiment_table&quot;)</span>
<span class="sd">            &#39;https://deriva.org/chaise/recordset/#1/schema:experiment_table&#39;</span>

<span class="sd">        Using RID:</span>
<span class="sd">            &gt;&gt;&gt; ml.chaise_url(&quot;1-abc123&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get the table object and build base URI</span>
    <span class="n">table_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">get_server_uri</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;ermrest/catalog/&quot;</span><span class="p">,</span> <span class="s2">&quot;chaise/recordset/#&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">DerivaMLException</span><span class="p">:</span>
        <span class="c1"># Handle RID case</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cite</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">table</span><span class="p">))</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">uri</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">urlquote</span><span class="p">(</span><span class="n">table_obj</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">urlquote</span><span class="p">(</span><span class="n">table_obj</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.cite" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">cite</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">cite</span><span class="p">(</span>
    <span class="n">entity</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Generates permanent citation URL.</p>
<p>Creates a versioned URL that can be used to reference a specific entity in the catalog. The URL includes
the catalog snapshot time to ensure version stability.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>entity</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | <span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Either a RID string or a dictionary containing entity data with a 'RID' key.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Permanent citation URL in format: https://{host}/id/{catalog}/{rid}@{snapshot_time}</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an entity doesn't exist or lacks a RID.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Using a RID string:
    &gt;&gt;&gt; url = ml.cite("1-abc123")
    &gt;&gt;&gt; print(url)
    'https://deriva.org/id/1/1-abc123@2024-01-01T12:00:00'</p>
<p>Using a dictionary:
    &gt;&gt;&gt; url = ml.cite({"RID": "1-abc123"})</p>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates permanent citation URL.</span>

<span class="sd">    Creates a versioned URL that can be used to reference a specific entity in the catalog. The URL includes</span>
<span class="sd">    the catalog snapshot time to ensure version stability.</span>

<span class="sd">    Args:</span>
<span class="sd">        entity: Either a RID string or a dictionary containing entity data with a &#39;RID&#39; key.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Permanent citation URL in format: https://{host}/id/{catalog}/{rid}@{snapshot_time}</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If an entity doesn&#39;t exist or lacks a RID.</span>

<span class="sd">    Examples:</span>
<span class="sd">        Using a RID string:</span>
<span class="sd">            &gt;&gt;&gt; url = ml.cite(&quot;1-abc123&quot;)</span>
<span class="sd">            &gt;&gt;&gt; print(url)</span>
<span class="sd">            &#39;https://deriva.org/id/1/1-abc123@2024-01-01T12:00:00&#39;</span>

<span class="sd">        Using a dictionary:</span>
<span class="sd">            &gt;&gt;&gt; url = ml.cite({&quot;RID&quot;: &quot;1-abc123&quot;})</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Return if already a citation URL</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host_name</span><span class="si">}</span><span class="s2">/id/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">catalog_id</span><span class="si">}</span><span class="s2">/&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">entity</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Resolve RID and create citation URL with snapshot time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolve_rid</span><span class="p">(</span><span class="n">rid</span> <span class="o">:=</span> <span class="n">entity</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host_name</span><span class="si">}</span><span class="s2">/id/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">catalog_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">rid</span><span class="si">}</span><span class="s2">@</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">latest_snapshot</span><span class="p">()</span><span class="o">.</span><span class="n">snaptime</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entity </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2"> does not have RID column&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">DerivaMLException</span> <span class="k">as</span> <span class="n">_e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="s2">&quot;Entity RID does not exist&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.create_asset" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create_asset</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_asset</span><span class="p">(</span>
    <span class="n">asset_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">column_defs</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span>
        <span class="n">ColumnDefinition</span>
    <span class="p">]</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fkey_defs</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span>
        <span class="n">ColumnDefinition</span>
    <span class="p">]</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">referenced_tables</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Table</span><span class="p">]</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">schema</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Creates an asset table.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>asset_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the asset table.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>column_defs</code>
            </td>
            <td>
                  <code><span title="typing.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" title="ColumnDefinition (deriva_ml.core.definitions.ColumnDefinition)" href="../deriva_definitions/#deriva_ml.core.definitions.ColumnDefinition">ColumnDefinition</a>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Iterable of ColumnDefinition objects to provide additional metadata for asset.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fkey_defs</code>
            </td>
            <td>
                  <code><span title="typing.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" title="ColumnDefinition (deriva_ml.core.definitions.ColumnDefinition)" href="../deriva_definitions/#deriva_ml.core.definitions.ColumnDefinition">ColumnDefinition</a>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Iterable of ForeignKeyDefinition objects to provide additional metadata for asset.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>referenced_tables</code>
            </td>
            <td>
                  <code><span title="typing.Iterable">Iterable</span>[<span title="deriva.core.ermrest_model.Table">Table</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Iterable of Table objects to which asset should provide foreign-key references to.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>comment</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Description of the asset table. (Default value = '')</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>schema</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Schema in which to create the asset table.  Defaults to domain_schema.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="deriva.core.ermrest_model.Table">Table</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Table object for the asset table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_asset</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">asset_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">column_defs</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ColumnDefinition</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fkey_defs</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ColumnDefinition</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">referenced_tables</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Table</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">schema</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates an asset table.</span>

<span class="sd">    Args:</span>
<span class="sd">        asset_name: Name of the asset table.</span>
<span class="sd">        column_defs: Iterable of ColumnDefinition objects to provide additional metadata for asset.</span>
<span class="sd">        fkey_defs: Iterable of ForeignKeyDefinition objects to provide additional metadata for asset.</span>
<span class="sd">        referenced_tables: Iterable of Table objects to which asset should provide foreign-key references to.</span>
<span class="sd">        comment: Description of the asset table. (Default value = &#39;&#39;)</span>
<span class="sd">        schema: Schema in which to create the asset table.  Defaults to domain_schema.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Table object for the asset table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Initialize empty collections if None provided</span>
    <span class="n">column_defs</span> <span class="o">=</span> <span class="n">column_defs</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">fkey_defs</span> <span class="o">=</span> <span class="n">fkey_defs</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">referenced_tables</span> <span class="o">=</span> <span class="n">referenced_tables</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">schema</span> <span class="o">=</span> <span class="n">schema</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span>

    <span class="c1"># Add an asset type to vocabulary</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_term</span><span class="p">(</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">asset_type</span><span class="p">,</span> <span class="n">asset_name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;A </span><span class="si">{</span><span class="n">asset_name</span><span class="si">}</span><span class="s2"> asset&quot;</span><span class="p">)</span>

    <span class="c1"># Create the main asset table</span>
    <span class="n">asset_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">schema</span><span class="p">]</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span>
        <span class="n">Table</span><span class="o">.</span><span class="n">define_asset</span><span class="p">(</span>
            <span class="n">schema</span><span class="p">,</span>
            <span class="n">asset_name</span><span class="p">,</span>
            <span class="n">column_defs</span><span class="o">=</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">column_defs</span><span class="p">],</span>
            <span class="n">fkey_defs</span><span class="o">=</span><span class="p">[</span><span class="n">fk</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="k">for</span> <span class="n">fk</span> <span class="ow">in</span> <span class="n">fkey_defs</span><span class="p">],</span>
            <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Create an association table between asset and asset type</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span><span class="p">]</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span>
        <span class="n">Table</span><span class="o">.</span><span class="n">define_association</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">(</span><span class="n">asset_table</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">asset_table</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;Asset_Type&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="s2">&quot;Asset_Type&quot;</span><span class="p">)),</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Create references to other tables if specified</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">referenced_tables</span><span class="p">:</span>
        <span class="n">asset_table</span><span class="o">.</span><span class="n">create_reference</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>

    <span class="c1"># Create an association table for tracking execution</span>
    <span class="n">atable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span><span class="p">]</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span>
        <span class="n">Table</span><span class="o">.</span><span class="n">define_association</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">(</span><span class="n">asset_name</span><span class="p">,</span> <span class="n">asset_table</span><span class="p">),</span>
                <span class="p">(</span>
                    <span class="s2">&quot;Execution&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="s2">&quot;Execution&quot;</span><span class="p">],</span>
                <span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">atable</span><span class="o">.</span><span class="n">create_reference</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="s2">&quot;Asset_Role&quot;</span><span class="p">))</span>

    <span class="c1"># Add asset annotations</span>
    <span class="n">asset_annotation</span><span class="p">(</span><span class="n">asset_table</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">asset_table</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.create_dataset" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create_dataset</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_dataset</span><span class="p">(</span>
    <span class="n">dataset_types</span><span class="p">:</span> <span class="nb">str</span>
    <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="n">DatasetVersion</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RID</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Creates a new dataset in the catalog.</p>
<p>Creates a dataset with specified types and description. The dataset can be associated
with an execution and initialized with a specific version.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dataset_types</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="list">list</span>[<span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>One or more dataset type terms from Dataset_Type vocabulary.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>description</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Description of the dataset's purpose and contents.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>execution_rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.constants.RID">RID</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional execution RID to associate with dataset creation.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>version</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="DatasetVersion (deriva_ml.dataset.aux_classes.DatasetVersion)" href="../dataset_aux_classes/#deriva_ml.dataset.aux_classes.DatasetVersion">DatasetVersion</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional initial version number. Defaults to 0.1.0.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>RID</code></td>            <td>
                  <code><span title="deriva_ml.core.constants.RID">RID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resource Identifier of the newly created dataset.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If dataset_types are invalid or creation fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>rid = ml.create_dataset(
...     dataset_types=["experiment", "raw_data"],
...     description="RNA sequencing experiment data",
...     version=DatasetVersion(1, 0, 0)
... )</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/dataset/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_dataset</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">dataset_types</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="n">DatasetVersion</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RID</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a new dataset in the catalog.</span>

<span class="sd">    Creates a dataset with specified types and description. The dataset can be associated</span>
<span class="sd">    with an execution and initialized with a specific version.</span>

<span class="sd">    Args:</span>
<span class="sd">        dataset_types: One or more dataset type terms from Dataset_Type vocabulary.</span>
<span class="sd">        description: Description of the dataset&#39;s purpose and contents.</span>
<span class="sd">        execution_rid: Optional execution RID to associate with dataset creation.</span>
<span class="sd">        version: Optional initial version number. Defaults to 0.1.0.</span>

<span class="sd">    Returns:</span>
<span class="sd">        RID: Resource Identifier of the newly created dataset.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If dataset_types are invalid or creation fails.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; rid = ml.create_dataset(</span>
<span class="sd">        ...     dataset_types=[&quot;experiment&quot;, &quot;raw_data&quot;],</span>
<span class="sd">        ...     description=&quot;RNA sequencing experiment data&quot;,</span>
<span class="sd">        ...     version=DatasetVersion(1, 0, 0)</span>
<span class="sd">        ... )</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">version</span> <span class="o">=</span> <span class="n">version</span> <span class="ow">or</span> <span class="n">DatasetVersion</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">dataset_types</span> <span class="o">=</span> <span class="n">dataset_types</span> <span class="ow">or</span> <span class="p">[]</span>

    <span class="n">type_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">dataset_type</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
    <span class="n">defined_types</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">type_path</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_dataset_type</span><span class="p">(</span><span class="n">dtype</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">defined_types</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">dtype</span> <span class="o">==</span> <span class="n">term</span><span class="p">[</span><span class="s2">&quot;Name&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="p">(</span><span class="n">term</span><span class="p">[</span><span class="s2">&quot;Synonyms&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">ds_type</span> <span class="ow">in</span> <span class="n">term</span><span class="p">[</span><span class="s2">&quot;Synonyms&quot;</span><span class="p">]):</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Create the entry for the new dataset_table and get its RID.</span>
    <span class="n">ds_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">dataset_types</span><span class="p">]</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dataset_types</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">dataset_types</span>
    <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">ds_type</span> <span class="ow">in</span> <span class="n">ds_types</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">check_dataset_type</span><span class="p">(</span><span class="n">ds_type</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="s2">&quot;Dataset type must be a vocabulary term.&quot;</span><span class="p">)</span>
    <span class="n">dataset_table_path</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
    <span class="n">dataset_rid</span> <span class="o">=</span> <span class="n">dataset_table_path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;Description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
                <span class="s2">&quot;Deleted&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;RID&quot;</span><span class="p">]</span>

    <span class="c1"># Get the name of the association table between dataset_table and dataset_type.</span>
    <span class="n">associations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">dataset_type</span><span class="p">]</span><span class="o">.</span><span class="n">find_associations</span><span class="p">())</span>
    <span class="n">atable</span> <span class="o">=</span> <span class="n">associations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">associations</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">atable</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
        <span class="p">[{</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">dataset_type</span><span class="p">:</span> <span class="n">ds_type</span><span class="p">,</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span> <span class="n">dataset_rid</span><span class="p">}</span> <span class="k">for</span> <span class="n">ds_type</span> <span class="ow">in</span> <span class="n">ds_types</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">execution_rid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">Dataset_Execution</span><span class="o">.</span><span class="n">insert</span><span class="p">([{</span><span class="s2">&quot;Dataset&quot;</span><span class="p">:</span> <span class="n">dataset_rid</span><span class="p">,</span> <span class="s2">&quot;Execution&quot;</span><span class="p">:</span> <span class="n">execution_rid</span><span class="p">}])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_insert_dataset_versions</span><span class="p">(</span>
        <span class="p">[</span><span class="n">DatasetSpec</span><span class="p">(</span><span class="n">rid</span><span class="o">=</span><span class="n">dataset_rid</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)],</span>
        <span class="n">execution_rid</span><span class="o">=</span><span class="n">execution_rid</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Initial dataset creation.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">dataset_rid</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.create_execution" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create_execution</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_execution</span><span class="p">(</span>
    <span class="n">configuration</span><span class="p">:</span> <span class="n">ExecutionConfiguration</span><span class="p">,</span>
    <span class="n">dry_run</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Execution&quot;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Creates an execution environment.</p>
<p>Given an execution configuration, initialize the local compute environment to prepare for executing an
ML or analytic routine.  This routine has a number of side effects.</p>
<ol>
<li>
<p>The datasets specified in the configuration are downloaded and placed in the cache-dir. If a version is
not specified in the configuration, then a new minor version number is created for the dataset and downloaded.</p>
</li>
<li>
<p>If any execution assets are provided in the configuration, they are downloaded
and placed in the working directory.</p>
</li>
</ol>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>configuration</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ExecutionConfiguration (deriva_ml.execution.execution_configuration.ExecutionConfiguration)" href="../execution_configuration/#deriva_ml.execution.execution_configuration.ExecutionConfiguration">ExecutionConfiguration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ExecutionConfiguration:</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dry_run</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Do not create an execution record or upload results.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>&#39;Execution&#39;</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An execution object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_execution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configuration</span><span class="p">:</span> <span class="n">ExecutionConfiguration</span><span class="p">,</span> <span class="n">dry_run</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Execution&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates an execution environment.</span>

<span class="sd">    Given an execution configuration, initialize the local compute environment to prepare for executing an</span>
<span class="sd">    ML or analytic routine.  This routine has a number of side effects.</span>

<span class="sd">    1. The datasets specified in the configuration are downloaded and placed in the cache-dir. If a version is</span>
<span class="sd">    not specified in the configuration, then a new minor version number is created for the dataset and downloaded.</span>

<span class="sd">    2. If any execution assets are provided in the configuration, they are downloaded</span>
<span class="sd">    and placed in the working directory.</span>


<span class="sd">    Args:</span>
<span class="sd">        configuration: ExecutionConfiguration:</span>
<span class="sd">        dry_run: Do not create an execution record or upload results.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An execution object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Import here to avoid circular dependency</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">deriva_ml.execution.execution</span><span class="w"> </span><span class="kn">import</span> <span class="n">Execution</span>

    <span class="c1"># Create and store an execution instance</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_execution</span> <span class="o">=</span> <span class="n">Execution</span><span class="p">(</span><span class="n">configuration</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">dry_run</span><span class="o">=</span><span class="n">dry_run</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execution</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.create_feature" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create_feature</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_feature</span><span class="p">(</span>
    <span class="n">target_table</span><span class="p">:</span> <span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">feature_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">terms</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">assets</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span>
        <span class="n">ColumnDefinition</span>
        <span class="o">|</span> <span class="n">Table</span>
        <span class="o">|</span> <span class="n">Key</span>
        <span class="o">|</span> <span class="nb">str</span>
    <span class="p">]</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">optional</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">FeatureRecord</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Creates a new feature definition.</p>
<p>A feature represents a measurable property or characteristic that can be associated with records in the target
table. Features can include vocabulary terms, asset references, and additional metadata.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>target_table</code>
            </td>
            <td>
                  <code><span title="deriva.core.ermrest_model.Table">Table</span> | <span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Table to associate the feature with (name or Table object).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>feature_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unique name for the feature within the target table.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>terms</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="deriva.core.ermrest_model.Table">Table</span> | <span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional vocabulary tables/names whose terms can be used as feature values.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>assets</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="deriva.core.ermrest_model.Table">Table</span> | <span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional asset tables/names that can be referenced by this feature.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>metadata</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="ColumnDefinition (deriva_ml.core.definitions.ColumnDefinition)" href="../deriva_definitions/#deriva_ml.core.definitions.ColumnDefinition">ColumnDefinition</a> | <span title="deriva.core.ermrest_model.Table">Table</span> | <span title="deriva.core.ermrest_model.Key">Key</span> | <span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional columns, tables, or keys to include in a feature definition.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>optional</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Column names that are not required when creating feature instances.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>comment</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Description of the feature's purpose and usage.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="type">type</span>[<a class="autorefs autorefs-internal" title="FeatureRecord (deriva_ml.feature.FeatureRecord)" href="../feature/#deriva_ml.feature.FeatureRecord">FeatureRecord</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>type[FeatureRecord]: Feature class for creating validated instances.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If a feature definition is invalid or conflicts with existing features.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Create a feature with confidence score:
    &gt;&gt;&gt; feature_class = ml.create_feature(
    ...     target_table="samples",
    ...     feature_name="expression_level",
    ...     terms=["expression_values"],
    ...     metadata=[ColumnDefinition(name="confidence", type=BuiltinTypes.float4)],
    ...     comment="Gene expression measurement"
    ... )</p>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_feature</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">target_table</span><span class="p">:</span> <span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">feature_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">terms</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">assets</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ColumnDefinition</span> <span class="o">|</span> <span class="n">Table</span> <span class="o">|</span> <span class="n">Key</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">optional</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">FeatureRecord</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a new feature definition.</span>

<span class="sd">    A feature represents a measurable property or characteristic that can be associated with records in the target</span>
<span class="sd">    table. Features can include vocabulary terms, asset references, and additional metadata.</span>

<span class="sd">    Args:</span>
<span class="sd">        target_table: Table to associate the feature with (name or Table object).</span>
<span class="sd">        feature_name: Unique name for the feature within the target table.</span>
<span class="sd">        terms: Optional vocabulary tables/names whose terms can be used as feature values.</span>
<span class="sd">        assets: Optional asset tables/names that can be referenced by this feature.</span>
<span class="sd">        metadata: Optional columns, tables, or keys to include in a feature definition.</span>
<span class="sd">        optional: Column names that are not required when creating feature instances.</span>
<span class="sd">        comment: Description of the feature&#39;s purpose and usage.</span>

<span class="sd">    Returns:</span>
<span class="sd">        type[FeatureRecord]: Feature class for creating validated instances.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If a feature definition is invalid or conflicts with existing features.</span>

<span class="sd">    Examples:</span>
<span class="sd">        Create a feature with confidence score:</span>
<span class="sd">            &gt;&gt;&gt; feature_class = ml.create_feature(</span>
<span class="sd">            ...     target_table=&quot;samples&quot;,</span>
<span class="sd">            ...     feature_name=&quot;expression_level&quot;,</span>
<span class="sd">            ...     terms=[&quot;expression_values&quot;],</span>
<span class="sd">            ...     metadata=[ColumnDefinition(name=&quot;confidence&quot;, type=BuiltinTypes.float4)],</span>
<span class="sd">            ...     comment=&quot;Gene expression measurement&quot;</span>
<span class="sd">            ... )</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Initialize empty collections if None provided</span>
    <span class="n">terms</span> <span class="o">=</span> <span class="n">terms</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">assets</span> <span class="o">=</span> <span class="n">assets</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">optional</span> <span class="o">=</span> <span class="n">optional</span> <span class="ow">or</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">normalize_metadata</span><span class="p">(</span><span class="n">m</span><span class="p">:</span> <span class="n">Key</span> <span class="o">|</span> <span class="n">Table</span> <span class="o">|</span> <span class="n">ColumnDefinition</span> <span class="o">|</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Helper function to normalize metadata references.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">ColumnDefinition</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">m</span>

    <span class="c1"># Validate asset and term tables</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">is_asset</span><span class="p">,</span> <span class="n">assets</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="s2">&quot;Invalid create_feature asset table.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">is_vocabulary</span><span class="p">,</span> <span class="n">terms</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="s2">&quot;Invalid create_feature asset table.&quot;</span><span class="p">)</span>

    <span class="c1"># Get references to required tables</span>
    <span class="n">target_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">target_table</span><span class="p">)</span>
    <span class="n">execution</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="s2">&quot;Execution&quot;</span><span class="p">]</span>
    <span class="n">feature_name_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="s2">&quot;Feature_Name&quot;</span><span class="p">]</span>

    <span class="c1"># Add feature name to vocabulary</span>
    <span class="n">feature_name_term</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_term</span><span class="p">(</span><span class="s2">&quot;Feature_Name&quot;</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>
    <span class="n">atable_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Execution_</span><span class="si">{</span><span class="n">target_table</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">feature_name_term</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="c1"># Create an association table implementing the feature</span>
    <span class="n">atable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span><span class="p">]</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span>
        <span class="n">target_table</span><span class="o">.</span><span class="n">define_association</span><span class="p">(</span>
            <span class="n">table_name</span><span class="o">=</span><span class="n">atable_name</span><span class="p">,</span>
            <span class="n">associates</span><span class="o">=</span><span class="p">[</span><span class="n">execution</span><span class="p">,</span> <span class="n">target_table</span><span class="p">,</span> <span class="n">feature_name_table</span><span class="p">],</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[</span><span class="n">normalize_metadata</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span><span class="n">assets</span><span class="p">,</span> <span class="n">terms</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)],</span>
            <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="c1"># Configure optional columns and default feature name</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">optional</span><span class="p">:</span>
        <span class="n">atable</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">c</span><span class="p">]</span><span class="o">.</span><span class="n">alter</span><span class="p">(</span><span class="n">nullok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">atable</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="s2">&quot;Feature_Name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">alter</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">feature_name_term</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="c1"># Return feature record class for creating instances</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">feature_record_class</span><span class="p">(</span><span class="n">target_table</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.create_table" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create_table</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_table</span><span class="p">(</span>
    <span class="n">table</span><span class="p">:</span> <span class="n">TableDefinition</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Creates a new table in the catalog.</p>
<p>Creates a table using the provided TableDefinition object, which specifies the table structure including
columns, keys, and foreign key relationships.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>table</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TableDefinition (deriva_ml.core.definitions.TableDefinition)" href="../deriva_definitions/#deriva_ml.core.definitions.TableDefinition">TableDefinition</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A TableDefinition object containing the complete specification of the table to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Table</code></td>            <td>
                  <code><span title="deriva.core.ermrest_model.Table">Table</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The newly created ERMRest table object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If table creation fails or the definition is invalid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Example:</p>
<pre><code>&gt;&gt;&gt; table_def = TableDefinition(
...     name="experiments",
...     column_definitions=[
...         ColumnDefinition(name="name", type=BuiltinTypes.text),
...         ColumnDefinition(name="date", type=BuiltinTypes.date)
...     ]
... )
&gt;&gt;&gt; new_table = ml.create_table(table_def)
</code></pre>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="n">TableDefinition</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a new table in the catalog.</span>

<span class="sd">    Creates a table using the provided TableDefinition object, which specifies the table structure including</span>
<span class="sd">    columns, keys, and foreign key relationships.</span>

<span class="sd">    Args:</span>
<span class="sd">        table: A TableDefinition object containing the complete specification of the table to create.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Table: The newly created ERMRest table object.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If table creation fails or the definition is invalid.</span>

<span class="sd">    Example:</span>

<span class="sd">        &gt;&gt;&gt; table_def = TableDefinition(</span>
<span class="sd">        ...     name=&quot;experiments&quot;,</span>
<span class="sd">        ...     column_definitions=[</span>
<span class="sd">        ...         ColumnDefinition(name=&quot;name&quot;, type=BuiltinTypes.text),</span>
<span class="sd">        ...         ColumnDefinition(name=&quot;date&quot;, type=BuiltinTypes.date)</span>
<span class="sd">        ...     ]</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; new_table = ml.create_table(table_def)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Create table in domain schema using provided definition</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span><span class="p">]</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.create_vocabulary" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create_vocabulary</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_vocabulary</span><span class="p">(</span>
    <span class="n">vocab_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">schema</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Creates a controlled vocabulary table.</p>
<p>A controlled vocabulary table maintains a list of standardized terms and their definitions. Each term can have
synonyms and descriptions to ensure consistent terminology usage across the dataset.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>vocab_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name for the new vocabulary table. Must be a valid SQL identifier.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>comment</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Description of the vocabulary's purpose and usage. Defaults to empty string.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>schema</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Schema name to create the table in. If None, uses domain_schema.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Table</code></td>            <td>
                  <code><span title="deriva.core.ermrest_model.Table">Table</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ERMRest table object representing the newly created vocabulary table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If vocab_name is invalid or already exists.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Create a vocabulary for tissue types:</p>
<pre><code>&gt;&gt;&gt; table = ml.create_vocabulary(
...     vocab_name="tissue_types",
...     comment="Standard tissue classifications",
...     schema="bio_schema"
... )
</code></pre>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_vocabulary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vocab_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a controlled vocabulary table.</span>

<span class="sd">    A controlled vocabulary table maintains a list of standardized terms and their definitions. Each term can have</span>
<span class="sd">    synonyms and descriptions to ensure consistent terminology usage across the dataset.</span>

<span class="sd">    Args:</span>
<span class="sd">        vocab_name: Name for the new vocabulary table. Must be a valid SQL identifier.</span>
<span class="sd">        comment: Description of the vocabulary&#39;s purpose and usage. Defaults to empty string.</span>
<span class="sd">        schema: Schema name to create the table in. If None, uses domain_schema.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Table: ERMRest table object representing the newly created vocabulary table.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If vocab_name is invalid or already exists.</span>

<span class="sd">    Examples:</span>
<span class="sd">        Create a vocabulary for tissue types:</span>

<span class="sd">            &gt;&gt;&gt; table = ml.create_vocabulary(</span>
<span class="sd">            ...     vocab_name=&quot;tissue_types&quot;,</span>
<span class="sd">            ...     comment=&quot;Standard tissue classifications&quot;,</span>
<span class="sd">            ...     schema=&quot;bio_schema&quot;</span>
<span class="sd">            ... )</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Use domain schema if none specified</span>
    <span class="n">schema</span> <span class="o">=</span> <span class="n">schema</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span>

    <span class="c1"># Create and return vocabulary table with RID-based URI pattern</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">vocab_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">schema</span><span class="p">]</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span>
            <span class="n">Table</span><span class="o">.</span><span class="n">define_vocabulary</span><span class="p">(</span><span class="n">vocab_name</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">project_name</span><span class="si">}</span><span class="s2">:</span><span class="se">{{</span><span class="s2">RID</span><span class="se">}}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Table </span><span class="si">{</span><span class="n">vocab_name</span><span class="si">}</span><span class="s2"> already exist&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">vocab_table</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.create_workflow" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create_workflow</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_workflow</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">workflow_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Workflow</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Creates a new workflow definition.</p>
<p>Creates a Workflow object that represents a computational process or analysis pipeline. The workflow type
must be a term from the controlled vocabulary. This method is typically used to define new analysis
workflows before execution.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the workflow.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>workflow_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of workflow (must exist in workflow_type vocabulary).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>description</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Description of what the workflow does.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Workflow</code></td>            <td>
                  <code><span title="deriva_ml.execution.workflow.Workflow">Workflow</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New workflow object ready for registration.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If workflow_type is not in the vocabulary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">workflow</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">create_workflow</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;RNA Analysis&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">workflow_type</span><span class="o">=</span><span class="s2">&quot;python_notebook&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;RNA sequence analysis pipeline&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rid</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">add_workflow</span><span class="p">(</span><span class="n">workflow</span><span class="p">)</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_workflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">workflow_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Workflow</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a new workflow definition.</span>

<span class="sd">    Creates a Workflow object that represents a computational process or analysis pipeline. The workflow type</span>
<span class="sd">    must be a term from the controlled vocabulary. This method is typically used to define new analysis</span>
<span class="sd">    workflows before execution.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: Name of the workflow.</span>
<span class="sd">        workflow_type: Type of workflow (must exist in workflow_type vocabulary).</span>
<span class="sd">        description: Description of what the workflow does.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Workflow: New workflow object ready for registration.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If workflow_type is not in the vocabulary.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; workflow = ml.create_workflow(</span>
<span class="sd">        ...     name=&quot;RNA Analysis&quot;,</span>
<span class="sd">        ...     workflow_type=&quot;python_notebook&quot;,</span>
<span class="sd">        ...     description=&quot;RNA sequence analysis pipeline&quot;</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; rid = ml.add_workflow(workflow)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Validate workflow type exists in vocabulary</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lookup_term</span><span class="p">(</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">workflow_type</span><span class="p">,</span> <span class="n">workflow_type</span><span class="p">)</span>

    <span class="c1"># Create and return a new workflow object</span>
    <span class="k">return</span> <span class="n">Workflow</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">workflow_type</span><span class="o">=</span><span class="n">workflow_type</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.dataset_history" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">dataset_history</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">dataset_history</span><span class="p">(</span>
    <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">DatasetHistory</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Retrieves the version history of a dataset.</p>
<p>Returns a chronological list of dataset versions, including their version numbers,
creation times, and associated metadata.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dataset_rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.constants.RID">RID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resource Identifier of the dataset.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="DatasetHistory (deriva_ml.dataset.aux_classes.DatasetHistory)" href="../dataset_aux_classes/#deriva_ml.dataset.aux_classes.DatasetHistory">DatasetHistory</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[DatasetHistory]: List of history entries, each containing:
- dataset_version: Version number (major.minor.patch)
- minid: Minimal Viable Identifier
- snapshot: Catalog snapshot time
- dataset_rid: Dataset Resource Identifier
- version_rid: Version Resource Identifier
- description: Version description
- execution_rid: Associated execution RID</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If dataset_rid is not a valid dataset RID.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>history = ml.dataset_history("1-abc123")
for entry in history:
...     print(f"Version {entry.dataset_version}: {entry.description}")</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/dataset/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">dataset_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">DatasetHistory</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieves the version history of a dataset.</span>

<span class="sd">    Returns a chronological list of dataset versions, including their version numbers,</span>
<span class="sd">    creation times, and associated metadata.</span>

<span class="sd">    Args:</span>
<span class="sd">        dataset_rid: Resource Identifier of the dataset.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[DatasetHistory]: List of history entries, each containing:</span>
<span class="sd">            - dataset_version: Version number (major.minor.patch)</span>
<span class="sd">            - minid: Minimal Viable Identifier</span>
<span class="sd">            - snapshot: Catalog snapshot time</span>
<span class="sd">            - dataset_rid: Dataset Resource Identifier</span>
<span class="sd">            - version_rid: Version Resource Identifier</span>
<span class="sd">            - description: Version description</span>
<span class="sd">            - execution_rid: Associated execution RID</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If dataset_rid is not a valid dataset RID.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; history = ml.dataset_history(&quot;1-abc123&quot;)</span>
<span class="sd">        &gt;&gt;&gt; for entry in history:</span>
<span class="sd">        ...     print(f&quot;Version {entry.dataset_version}: {entry.description}&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_dataset_rid</span><span class="p">(</span><span class="n">dataset_rid</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;RID is not for a data set: </span><span class="si">{</span><span class="n">dataset_rid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">version_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="s2">&quot;Dataset_Version&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">DatasetHistory</span><span class="p">(</span>
            <span class="n">dataset_version</span><span class="o">=</span><span class="n">DatasetVersion</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="s2">&quot;Version&quot;</span><span class="p">]),</span>
            <span class="n">minid</span><span class="o">=</span><span class="n">v</span><span class="p">[</span><span class="s2">&quot;Minid&quot;</span><span class="p">],</span>
            <span class="n">snapshot</span><span class="o">=</span><span class="n">v</span><span class="p">[</span><span class="s2">&quot;Snapshot&quot;</span><span class="p">],</span>
            <span class="n">dataset_rid</span><span class="o">=</span><span class="n">dataset_rid</span><span class="p">,</span>
            <span class="n">version_rid</span><span class="o">=</span><span class="n">v</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">],</span>
            <span class="n">description</span><span class="o">=</span><span class="n">v</span><span class="p">[</span><span class="s2">&quot;Description&quot;</span><span class="p">],</span>
            <span class="n">execution_rid</span><span class="o">=</span><span class="n">v</span><span class="p">[</span><span class="s2">&quot;Execution&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">version_path</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">version_path</span><span class="o">.</span><span class="n">Dataset</span> <span class="o">==</span> <span class="n">dataset_rid</span><span class="p">)</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.dataset_version" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">dataset_version</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">dataset_version</span><span class="p">(</span>
    <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DatasetVersion</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Retrieve the current version of the specified dataset_table.</p>
<p>Given a rid, return the most recent version of the dataset. It is important to remember that this version
captures the state of the catalog at the time the version was created, not the current state of the catalog.
This means that its possible that the values associated with an object in the catalog may be different
from the values of that object in the dataset.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dataset_rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.constants.RID">RID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The RID of the dataset to retrieve the version for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DatasetVersion (deriva_ml.dataset.aux_classes.DatasetVersion)" href="../dataset_aux_classes/#deriva_ml.dataset.aux_classes.DatasetVersion">DatasetVersion</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple with the semantic version of the dataset_table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/dataset/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_call</span>
<span class="k">def</span><span class="w"> </span><span class="nf">dataset_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DatasetVersion</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve the current version of the specified dataset_table.</span>

<span class="sd">    Given a rid, return the most recent version of the dataset. It is important to remember that this version</span>
<span class="sd">    captures the state of the catalog at the time the version was created, not the current state of the catalog.</span>
<span class="sd">    This means that its possible that the values associated with an object in the catalog may be different</span>
<span class="sd">    from the values of that object in the dataset.</span>

<span class="sd">    Args:</span>
<span class="sd">        dataset_rid: The RID of the dataset to retrieve the version for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A tuple with the semantic version of the dataset_table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">history</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset_history</span><span class="p">(</span><span class="n">dataset_rid</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">history</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">DatasetVersion</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Ensure we return a DatasetVersion, not a string</span>
        <span class="n">versions</span> <span class="o">=</span> <span class="p">[</span><span class="n">h</span><span class="o">.</span><span class="n">dataset_version</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">history</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">versions</span><span class="p">)</span> <span class="k">if</span> <span class="n">versions</span> <span class="k">else</span> <span class="n">DatasetVersion</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.delete_dataset" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">delete_dataset</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">delete_dataset</span><span class="p">(</span>
    <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span>
    <span class="n">recurse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Delete a dataset_table from the catalog.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dataset_rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.constants.RID">RID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>RID of the dataset_table to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>recurse</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, delete the dataset_table along with any nested datasets. (Default value = False)</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/dataset/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_call</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span> <span class="n">recurse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete a dataset_table from the catalog.</span>

<span class="sd">    Args:</span>
<span class="sd">        dataset_rid: RID of the dataset_table to delete.</span>
<span class="sd">        recurse: If True, delete the dataset_table along with any nested datasets. (Default value = False)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get association table entries for this dataset_table</span>
    <span class="c1"># Delete association table entries</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_dataset_rid</span><span class="p">(</span><span class="n">dataset_rid</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="s2">&quot;Dataset_rid is not a dataset.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">parents</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_dataset_parents</span><span class="p">(</span><span class="n">dataset_rid</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Dataset_rid &quot;</span><span class="si">{</span><span class="n">dataset_rid</span><span class="si">}</span><span class="s1">&quot; is in a nested dataset: </span><span class="si">{</span><span class="n">parents</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>

    <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
    <span class="n">dataset_path</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>

    <span class="n">rid_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">dataset_rid</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_dataset_children</span><span class="p">(</span><span class="n">dataset_rid</span><span class="o">=</span><span class="n">dataset_rid</span><span class="p">)</span> <span class="k">if</span> <span class="n">recurse</span> <span class="k">else</span> <span class="p">[])</span>
    <span class="n">dataset_path</span><span class="o">.</span><span class="n">update</span><span class="p">([{</span><span class="s2">&quot;RID&quot;</span><span class="p">:</span> <span class="n">r</span><span class="p">,</span> <span class="s2">&quot;Deleted&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rid_list</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.delete_dataset_members" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">delete_dataset_members</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">delete_dataset_members</span><span class="p">(</span>
    <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span>
    <span class="n">members</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">RID</span><span class="p">],</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Remove elements to an existing dataset_table.</p>
<p>Delete elements from an existing dataset. In addition to deleting members, the minor version number of the
dataset is incremented and the description, if provide is applied to that new version.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dataset_rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.constants.RID">RID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>RID of dataset_table to extend or None if a new dataset_table is to be created.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>members</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="deriva_ml.core.constants.RID">RID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of member RIDs to add to the dataset_table.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>description</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Markdown description of the updated dataset.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>execution_rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.constants.RID">RID</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional RID of execution associated with this operation.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/dataset/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_call</span>
<span class="k">def</span><span class="w"> </span><span class="nf">delete_dataset_members</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span>
    <span class="n">members</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">RID</span><span class="p">],</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Remove elements to an existing dataset_table.</span>

<span class="sd">    Delete elements from an existing dataset. In addition to deleting members, the minor version number of the</span>
<span class="sd">    dataset is incremented and the description, if provide is applied to that new version.</span>

<span class="sd">    Args:</span>
<span class="sd">        dataset_rid: RID of dataset_table to extend or None if a new dataset_table is to be created.</span>
<span class="sd">        members: List of member RIDs to add to the dataset_table.</span>
<span class="sd">        description: Markdown description of the updated dataset.</span>
<span class="sd">        execution_rid: Optional RID of execution associated with this operation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">members</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">members</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">description</span> <span class="ow">or</span> <span class="s2">&quot;Deletes dataset members&quot;</span>

    <span class="c1"># Now go through every rid to be added to the data set and sort them based on what association table entries</span>
    <span class="c1"># need to be made.</span>
    <span class="n">dataset_elements</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">association_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">a</span><span class="o">.</span><span class="n">other_fkeys</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span><span class="o">.</span><span class="n">pk_table</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span><span class="o">.</span><span class="n">find_associations</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="c1"># Get a list of all the object types that can be linked to a dataset_table.</span>
    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">members</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">rid_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">resolve_rid</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid RID: </span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rid_info</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">association_map</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;RID table: </span><span class="si">{</span><span class="n">rid_info</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> not part of dataset_table&quot;</span><span class="p">)</span>
        <span class="n">dataset_elements</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">rid_info</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rid_info</span><span class="o">.</span><span class="n">rid</span><span class="p">)</span>
    <span class="c1"># Now make the entries into the association tables.</span>
    <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">table</span><span class="p">,</span> <span class="n">elements</span> <span class="ow">in</span> <span class="n">dataset_elements</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">schema_path</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span> <span class="k">if</span> <span class="n">table</span> <span class="o">==</span> <span class="s2">&quot;Dataset&quot;</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">domain_schema</span><span class="p">]</span>
        <span class="n">fk_column</span> <span class="o">=</span> <span class="s2">&quot;Nested_Dataset&quot;</span> <span class="k">if</span> <span class="n">table</span> <span class="o">==</span> <span class="s2">&quot;Dataset&quot;</span> <span class="k">else</span> <span class="n">table</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">):</span>
            <span class="n">atable_path</span> <span class="o">=</span> <span class="n">schema_path</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">association_map</span><span class="p">[</span><span class="n">table</span><span class="p">]]</span>
            <span class="c1"># Find out the name of the column in the association table.</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
                <span class="n">entity</span> <span class="o">=</span> <span class="n">atable_path</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
                    <span class="p">(</span><span class="n">atable_path</span><span class="o">.</span><span class="n">Dataset</span> <span class="o">==</span> <span class="n">dataset_rid</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">atable_path</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">fk_column</span><span class="p">]</span> <span class="o">==</span> <span class="n">e</span><span class="p">),</span>
                <span class="p">)</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">increment_dataset_version</span><span class="p">(</span>
        <span class="n">dataset_rid</span><span class="p">,</span>
        <span class="n">VersionPart</span><span class="o">.</span><span class="n">minor</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
        <span class="n">execution_rid</span><span class="o">=</span><span class="n">execution_rid</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.delete_feature" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">delete_feature</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">delete_feature</span><span class="p">(</span>
    <span class="n">table</span><span class="p">:</span> <span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">feature_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Removes a feature definition and its data.</p>
<p>Deletes the feature and its implementation table from the catalog. This operation cannot be undone and
will remove all feature values associated with this feature.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>table</code>
            </td>
            <td>
                  <code><span title="deriva.core.ermrest_model.Table">Table</span> | <span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The table containing the feature, either as name or Table object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>feature_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the feature to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the feature was successfully deleted, False if it didn't exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If deletion fails due to constraints or permissions.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>success = ml.delete_feature("samples", "obsolete_feature")
print("Deleted" if success else "Not found")</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete_feature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Removes a feature definition and its data.</span>

<span class="sd">    Deletes the feature and its implementation table from the catalog. This operation cannot be undone and</span>
<span class="sd">    will remove all feature values associated with this feature.</span>

<span class="sd">    Args:</span>
<span class="sd">        table: The table containing the feature, either as name or Table object.</span>
<span class="sd">        feature_name: Name of the feature to delete.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the feature was successfully deleted, False if it didn&#39;t exist.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If deletion fails due to constraints or permissions.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; success = ml.delete_feature(&quot;samples&quot;, &quot;obsolete_feature&quot;)</span>
<span class="sd">        &gt;&gt;&gt; print(&quot;Deleted&quot; if success else &quot;Not found&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get table reference and find feature</span>
    <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Find and delete the feature&#39;s implementation table</span>
        <span class="n">feature</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">find_features</span><span class="p">(</span><span class="n">table</span><span class="p">)</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">feature_name</span> <span class="o">==</span> <span class="n">feature_name</span><span class="p">)</span>
        <span class="n">feature</span><span class="o">.</span><span class="n">feature_table</span><span class="o">.</span><span class="n">drop</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.download_dataset_bag" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">download_dataset_bag</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">download_dataset_bag</span><span class="p">(</span>
    <span class="n">dataset</span><span class="p">:</span> <span class="n">DatasetSpec</span><span class="p">,</span>
    <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DatasetBag</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Downloads a dataset to the local filesystem and creates a MINID if needed.</p>
<p>Downloads a dataset specified by DatasetSpec to the local filesystem. If the dataset doesn't have
a MINID (Minimal Viable Identifier), one will be created. The dataset can optionally be associated
with an execution record.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dataset</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="DatasetSpec (deriva_ml.dataset.aux_classes.DatasetSpec)" href="../dataset_aux_classes/#deriva_ml.dataset.aux_classes.DatasetSpec">DatasetSpec</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Specification of the dataset to download, including version and materialization options.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>execution_rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.definitions.RID">RID</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional execution RID to associate the download with.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DatasetBag</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="DatasetBag (deriva_ml.dataset.dataset_bag.DatasetBag)" href="../dataset_bag/#deriva_ml.dataset.dataset_bag.DatasetBag">DatasetBag</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Object containing:
- path: Local filesystem path to downloaded dataset
- rid: Dataset's Resource Identifier
- minid: Dataset's Minimal Viable Identifier</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Download with default options:
    &gt;&gt;&gt; spec = DatasetSpec(rid="1-abc123")
    &gt;&gt;&gt; bag = ml.download_dataset_bag(dataset=spec)
    &gt;&gt;&gt; print(f"Downloaded to {bag.path}")</p>
<p>Download with execution tracking:
    &gt;&gt;&gt; bag = ml.download_dataset_bag(
    ...     dataset=DatasetSpec(rid="1-abc123", materialize=True),
    ...     execution_rid="1-xyz789"
    ... )</p>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">download_dataset_bag</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">dataset</span><span class="p">:</span> <span class="n">DatasetSpec</span><span class="p">,</span>
    <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DatasetBag</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Downloads a dataset to the local filesystem and creates a MINID if needed.</span>

<span class="sd">    Downloads a dataset specified by DatasetSpec to the local filesystem. If the dataset doesn&#39;t have</span>
<span class="sd">    a MINID (Minimal Viable Identifier), one will be created. The dataset can optionally be associated</span>
<span class="sd">    with an execution record.</span>

<span class="sd">    Args:</span>
<span class="sd">        dataset: Specification of the dataset to download, including version and materialization options.</span>
<span class="sd">        execution_rid: Optional execution RID to associate the download with.</span>

<span class="sd">    Returns:</span>
<span class="sd">        DatasetBag: Object containing:</span>
<span class="sd">            - path: Local filesystem path to downloaded dataset</span>
<span class="sd">            - rid: Dataset&#39;s Resource Identifier</span>
<span class="sd">            - minid: Dataset&#39;s Minimal Viable Identifier</span>

<span class="sd">    Examples:</span>
<span class="sd">        Download with default options:</span>
<span class="sd">            &gt;&gt;&gt; spec = DatasetSpec(rid=&quot;1-abc123&quot;)</span>
<span class="sd">            &gt;&gt;&gt; bag = ml.download_dataset_bag(dataset=spec)</span>
<span class="sd">            &gt;&gt;&gt; print(f&quot;Downloaded to {bag.path}&quot;)</span>

<span class="sd">        Download with execution tracking:</span>
<span class="sd">            &gt;&gt;&gt; bag = ml.download_dataset_bag(</span>
<span class="sd">            ...     dataset=DatasetSpec(rid=&quot;1-abc123&quot;, materialize=True),</span>
<span class="sd">            ...     execution_rid=&quot;1-xyz789&quot;</span>
<span class="sd">            ... )</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_dataset_rid</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">rid</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">DerivaMLTableTypeError</span><span class="p">(</span><span class="s2">&quot;Dataset&quot;</span><span class="p">,</span> <span class="n">dataset</span><span class="o">.</span><span class="n">rid</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_download_dataset_bag</span><span class="p">(</span>
        <span class="n">dataset</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span>
        <span class="n">execution_rid</span><span class="o">=</span><span class="n">execution_rid</span><span class="p">,</span>
        <span class="n">snapshot_catalog</span><span class="o">=</span><span class="n">DerivaML</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">host_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_version_snapshot</span><span class="p">(</span><span class="n">dataset</span><span class="p">)),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.download_dir" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">download_dir</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">download_dir</span><span class="p">(</span>
    <span class="n">cached</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the appropriate download directory.</p>
<p>Provides the appropriate directory path for storing downloaded files, either in the cache or working directory.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>cached</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, returns the cache directory path. If False, returns the working directory path.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Path</code></td>            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Directory path where downloaded files should be stored.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>cache_dir = ml.download_dir(cached=True)
work_dir = ml.download_dir(cached=False)</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">download_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cached</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the appropriate download directory.</span>

<span class="sd">    Provides the appropriate directory path for storing downloaded files, either in the cache or working directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        cached: If True, returns the cache directory path. If False, returns the working directory path.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Path: Directory path where downloaded files should be stored.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; cache_dir = ml.download_dir(cached=True)</span>
<span class="sd">        &gt;&gt;&gt; work_dir = ml.download_dir(cached=False)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Return cache directory if cached=True, otherwise working directory</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span> <span class="k">if</span> <span class="n">cached</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.feature_record_class" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">feature_record_class</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">feature_record_class</span><span class="p">(</span>
    <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">,</span>
    <span class="n">feature_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">FeatureRecord</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns a pydantic model class for feature records.</p>
<p>Creates a typed interface for creating new instances of the specified feature. The returned class includes
validation and type checking based on the feature's definition.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>table</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="deriva.core.ermrest_model.Table">Table</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The table containing the feature, either as name or Table object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>feature_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the feature to create a record class for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="type">type</span>[<a class="autorefs autorefs-internal" title="FeatureRecord (deriva_ml.feature.FeatureRecord)" href="../feature/#deriva_ml.feature.FeatureRecord">FeatureRecord</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>type[FeatureRecord]: A pydantic model class for creating validated feature records.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the feature doesn't exist or the table is invalid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>ExpressionFeature = ml.feature_record_class("samples", "expression_level")
feature = ExpressionFeature(value="high", confidence=0.95)</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">feature_record_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">FeatureRecord</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a pydantic model class for feature records.</span>

<span class="sd">    Creates a typed interface for creating new instances of the specified feature. The returned class includes</span>
<span class="sd">    validation and type checking based on the feature&#39;s definition.</span>

<span class="sd">    Args:</span>
<span class="sd">        table: The table containing the feature, either as name or Table object.</span>
<span class="sd">        feature_name: Name of the feature to create a record class for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        type[FeatureRecord]: A pydantic model class for creating validated feature records.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If the feature doesn&#39;t exist or the table is invalid.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; ExpressionFeature = ml.feature_record_class(&quot;samples&quot;, &quot;expression_level&quot;)</span>
<span class="sd">        &gt;&gt;&gt; feature = ExpressionFeature(value=&quot;high&quot;, confidence=0.95)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Look up a feature and return its record class</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_feature</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">)</span><span class="o">.</span><span class="n">feature_record_class</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.find_datasets" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">find_datasets</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">find_datasets</span><span class="p">(</span>
    <span class="n">deleted</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns a list of currently available datasets.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>deleted</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, included the datasets that have been deleted.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Iterable">Iterable</span>[<span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of currently available datasets.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/dataset/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">find_datasets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deleted</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a list of currently available datasets.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        deleted: If True, included the datasets that have been deleted.</span>

<span class="sd">    Returns:</span>
<span class="sd">         list of currently available datasets.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get datapath to all the tables we will need: Dataset, DatasetType and the association table.</span>
    <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
    <span class="n">dataset_path</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
    <span class="n">associations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">dataset_type</span><span class="p">]</span><span class="o">.</span><span class="n">find_associations</span><span class="p">())</span>
    <span class="n">atable</span> <span class="o">=</span> <span class="n">associations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">associations</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">ml_path</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span><span class="p">]</span>
    <span class="n">atable_path</span> <span class="o">=</span> <span class="n">ml_path</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">atable</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">deleted</span><span class="p">:</span>
        <span class="n">filtered_path</span> <span class="o">=</span> <span class="n">dataset_path</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">filtered_path</span> <span class="o">=</span> <span class="n">dataset_path</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="p">(</span><span class="n">dataset_path</span><span class="o">.</span><span class="n">Deleted</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">dataset_path</span><span class="o">.</span><span class="n">Deleted</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span>  <span class="c1"># noqa: E711, E712</span>
        <span class="p">)</span>

    <span class="c1"># Get a list of all the dataset_type values associated with this dataset_table.</span>
    <span class="n">datasets</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">dataset</span> <span class="ow">in</span> <span class="n">filtered_path</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">():</span>
        <span class="n">ds_types</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">atable_path</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">atable_path</span><span class="o">.</span><span class="n">Dataset</span> <span class="o">==</span> <span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">attributes</span><span class="p">(</span><span class="n">atable_path</span><span class="o">.</span><span class="n">Dataset_Type</span><span class="p">)</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">datasets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dataset</span> <span class="o">|</span> <span class="p">{</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">dataset_type</span><span class="p">:</span> <span class="p">[</span><span class="n">ds</span><span class="p">[</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">dataset_type</span><span class="p">]</span> <span class="k">for</span> <span class="n">ds</span> <span class="ow">in</span> <span class="n">ds_types</span><span class="p">]})</span>
    <span class="k">return</span> <span class="n">datasets</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.globus_login" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">globus_login</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">globus_login</span><span class="p">(</span><span class="n">host</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Authenticates with Globus for accessing Deriva services.</p>
<p>Performs authentication using Globus Auth to access Deriva services. If already logged in, notifies the user.
Uses non-interactive authentication flow without a browser or local server.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>host</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The hostname of the Deriva server to authenticate with (e.g., 'deriva.example.org').</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>DerivaML.globus_login('deriva.example.org')
'Login Successful'</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">globus_login</span><span class="p">(</span><span class="n">host</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Authenticates with Globus for accessing Deriva services.</span>

<span class="sd">    Performs authentication using Globus Auth to access Deriva services. If already logged in, notifies the user.</span>
<span class="sd">    Uses non-interactive authentication flow without a browser or local server.</span>

<span class="sd">    Args:</span>
<span class="sd">        host: The hostname of the Deriva server to authenticate with (e.g., &#39;deriva.example.org&#39;).</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; DerivaML.globus_login(&#39;deriva.example.org&#39;)</span>
<span class="sd">        &#39;Login Successful&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">gnl</span> <span class="o">=</span> <span class="n">GlobusNativeLogin</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">gnl</span><span class="o">.</span><span class="n">is_logged_in</span><span class="p">([</span><span class="n">host</span><span class="p">]):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You are already logged in.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">gnl</span><span class="o">.</span><span class="n">login</span><span class="p">(</span>
            <span class="p">[</span><span class="n">host</span><span class="p">],</span>
            <span class="n">no_local_server</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">no_browser</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">refresh_tokens</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">update_bdbag_keychain</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Login Successful&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.increment_dataset_version" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">increment_dataset_version</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">increment_dataset_version</span><span class="p">(</span>
    <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span>
    <span class="n">component</span><span class="p">:</span> <span class="n">VersionPart</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DatasetVersion</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Increments a dataset's version number.</p>
<p>Creates a new version of the dataset by incrementing the specified version component
(major, minor, or patch). The new version is recorded with an optional description
and execution reference.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dataset_rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.constants.RID">RID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resource Identifier of the dataset to version.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>component</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="VersionPart (deriva_ml.dataset.aux_classes.VersionPart)" href="../dataset_aux_classes/#deriva_ml.dataset.aux_classes.VersionPart">VersionPart</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Which version component to increment ('major', 'minor', or 'patch').</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>description</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional description of the changes in this version.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>execution_rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.constants.RID">RID</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional execution RID to associate with this version.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DatasetVersion</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="DatasetVersion (deriva_ml.dataset.aux_classes.DatasetVersion)" href="../dataset_aux_classes/#deriva_ml.dataset.aux_classes.DatasetVersion">DatasetVersion</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new version number.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If dataset_rid is invalid or version increment fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>new_version = ml.increment_dataset_version(
...     dataset_rid="1-abc123",
...     component="minor",
...     description="Added new samples"
... )
print(f"New version: {new_version}")  # e.g., "1.2.0"</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/dataset/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">increment_dataset_version</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span>
    <span class="n">component</span><span class="p">:</span> <span class="n">VersionPart</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DatasetVersion</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Increments a dataset&#39;s version number.</span>

<span class="sd">    Creates a new version of the dataset by incrementing the specified version component</span>
<span class="sd">    (major, minor, or patch). The new version is recorded with an optional description</span>
<span class="sd">    and execution reference.</span>

<span class="sd">    Args:</span>
<span class="sd">        dataset_rid: Resource Identifier of the dataset to version.</span>
<span class="sd">        component: Which version component to increment (&#39;major&#39;, &#39;minor&#39;, or &#39;patch&#39;).</span>
<span class="sd">        description: Optional description of the changes in this version.</span>
<span class="sd">        execution_rid: Optional execution RID to associate with this version.</span>

<span class="sd">    Returns:</span>
<span class="sd">        DatasetVersion: The new version number.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If dataset_rid is invalid or version increment fails.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; new_version = ml.increment_dataset_version(</span>
<span class="sd">        ...     dataset_rid=&quot;1-abc123&quot;,</span>
<span class="sd">        ...     component=&quot;minor&quot;,</span>
<span class="sd">        ...     description=&quot;Added new samples&quot;</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; print(f&quot;New version: {new_version}&quot;)  # e.g., &quot;1.2.0&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Find all the datasets that are reachable from this dataset and determine their new version numbers.</span>
    <span class="n">related_datasets</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_build_dataset_graph</span><span class="p">(</span><span class="n">dataset_rid</span><span class="o">=</span><span class="n">dataset_rid</span><span class="p">))</span>
    <span class="n">version_update_list</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">DatasetSpec</span><span class="p">(</span>
            <span class="n">rid</span><span class="o">=</span><span class="n">ds_rid</span><span class="p">,</span>
            <span class="n">version</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset_version</span><span class="p">(</span><span class="n">ds_rid</span><span class="p">)</span><span class="o">.</span><span class="n">increment_version</span><span class="p">(</span><span class="n">component</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">ds_rid</span> <span class="ow">in</span> <span class="n">related_datasets</span>
    <span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_insert_dataset_versions</span><span class="p">(</span><span class="n">version_update_list</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">execution_rid</span><span class="o">=</span><span class="n">execution_rid</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">next</span><span class="p">((</span><span class="n">d</span><span class="o">.</span><span class="n">version</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">version_update_list</span> <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">rid</span> <span class="o">==</span> <span class="n">dataset_rid</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.list_assets" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">list_assets</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">list_assets</span><span class="p">(</span>
    <span class="n">asset_table</span><span class="p">:</span> <span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Lists contents of an asset table.</p>
<p>Returns a list of assets with their types for the specified asset table.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>asset_table</code>
            </td>
            <td>
                  <code><span title="deriva.core.ermrest_model.Table">Table</span> | <span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Table or name of the asset table to list assets for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[dict[str, Any]]: List of asset records, each containing:
- RID: Resource identifier
- Type: Asset type
- Metadata: Asset metadata</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the table is not an asset table or doesn't exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>assets = ml.list_assets("tissue_types")
for asset in assets:
...     print(f"{asset['RID']}: {asset['Type']}")</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">list_assets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">asset_table</span><span class="p">:</span> <span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Lists contents of an asset table.</span>

<span class="sd">    Returns a list of assets with their types for the specified asset table.</span>

<span class="sd">    Args:</span>
<span class="sd">        asset_table: Table or name of the asset table to list assets for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[dict[str, Any]]: List of asset records, each containing:</span>
<span class="sd">            - RID: Resource identifier</span>
<span class="sd">            - Type: Asset type</span>
<span class="sd">            - Metadata: Asset metadata</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If the table is not an asset table or doesn&#39;t exist.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; assets = ml.list_assets(&quot;tissue_types&quot;)</span>
<span class="sd">        &gt;&gt;&gt; for asset in assets:</span>
<span class="sd">        ...     print(f&quot;{asset[&#39;RID&#39;]}: {asset[&#39;Type&#39;]}&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Validate and get asset table reference</span>
    <span class="n">asset_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">asset_table</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">is_asset</span><span class="p">(</span><span class="n">asset_table</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Table </span><span class="si">{</span><span class="n">asset_table</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> is not an asset&quot;</span><span class="p">)</span>

    <span class="c1"># Get path builders for asset and type tables</span>
    <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
    <span class="n">asset_path</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">asset_table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">asset_table</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
    <span class="p">(</span>
        <span class="n">asset_type_table</span><span class="p">,</span>
        <span class="n">_</span><span class="p">,</span>
        <span class="n">_</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">find_association</span><span class="p">(</span><span class="n">asset_table</span><span class="p">,</span> <span class="n">MLVocab</span><span class="o">.</span><span class="n">asset_type</span><span class="p">)</span>
    <span class="n">type_path</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">asset_type_table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">asset_type_table</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>

    <span class="c1"># Build a list of assets with their types</span>
    <span class="n">assets</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">asset</span> <span class="ow">in</span> <span class="n">asset_path</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">():</span>
        <span class="c1"># Get associated asset types for each asset</span>
        <span class="n">asset_types</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">type_path</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">type_path</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">asset_table</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">==</span> <span class="n">asset</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">])</span>
            <span class="o">.</span><span class="n">attributes</span><span class="p">(</span><span class="n">type_path</span><span class="o">.</span><span class="n">Asset_Type</span><span class="p">)</span>
            <span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="c1"># Combine asset data with its types</span>
        <span class="n">assets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">asset</span> <span class="o">|</span> <span class="p">{</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">asset_type</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="p">[</span><span class="n">asset_type</span><span class="p">[</span><span class="n">MLVocab</span><span class="o">.</span><span class="n">asset_type</span><span class="o">.</span><span class="n">value</span><span class="p">]</span> <span class="k">for</span> <span class="n">asset_type</span> <span class="ow">in</span> <span class="n">asset_types</span><span class="p">]}</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">assets</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.list_dataset_children" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">list_dataset_children</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">list_dataset_children</span><span class="p">(</span>
    <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span>
    <span class="n">recurse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">RID</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Given a dataset_table RID, return a list of RIDs for any nested datasets.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dataset_rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.constants.RID">RID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dataset_table RID.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>recurse</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, return a list of nested datasets RIDs.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="deriva_ml.core.constants.RID">RID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of nested dataset RIDs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/dataset/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_call</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_dataset_children</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span> <span class="n">recurse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">RID</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a dataset_table RID, return a list of RIDs for any nested datasets.</span>

<span class="sd">    Args:</span>
<span class="sd">        dataset_rid: A dataset_table RID.</span>
<span class="sd">        recurse: If True, return a list of nested datasets RIDs.</span>

<span class="sd">    Returns:</span>
<span class="sd">      list of nested dataset RIDs.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dataset_dataset_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="s2">&quot;Dataset_Dataset&quot;</span><span class="p">]</span>
    <span class="n">nested_datasets</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dataset_dataset_path</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">find_children</span><span class="p">(</span><span class="n">rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">):</span>
        <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">child</span><span class="p">[</span><span class="s2">&quot;Nested_Dataset&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">nested_datasets</span> <span class="k">if</span> <span class="n">child</span><span class="p">[</span><span class="s2">&quot;Dataset&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">rid</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">recurse</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">children</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">find_children</span><span class="p">(</span><span class="n">child</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">children</span>

    <span class="k">return</span> <span class="n">find_children</span><span class="p">(</span><span class="n">dataset_rid</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.list_dataset_element_types" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">list_dataset_element_types</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">list_dataset_element_types</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">(</span>
    <span class="n">Iterable</span><span class="p">[</span><span class="n">Table</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>List the types of entities that can be added to a dataset_table.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Iterable">Iterable</span>[<span title="deriva.core.ermrest_model.Table">Table</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>return: An iterable of Table objects that can be included as an element of a dataset_table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/dataset/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">list_dataset_element_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Table</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;List the types of entities that can be added to a dataset_table.</span>

<span class="sd">    Returns:</span>
<span class="sd">      :return: An iterable of Table objects that can be included as an element of a dataset_table.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">domain_table</span><span class="p">(</span><span class="n">table</span><span class="p">:</span> <span class="n">Table</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">domain_schema</span> <span class="ow">or</span> <span class="n">table</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span><span class="o">.</span><span class="n">name</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span><span class="o">.</span><span class="n">find_associations</span><span class="p">()</span> <span class="k">if</span> <span class="n">domain_table</span><span class="p">(</span><span class="n">t</span> <span class="o">:=</span> <span class="n">a</span><span class="o">.</span><span class="n">other_fkeys</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span><span class="o">.</span><span class="n">pk_table</span><span class="p">)]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.list_dataset_members" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">list_dataset_members</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">list_dataset_members</span><span class="p">(</span>
    <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span>
    <span class="n">recurse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Lists members of a dataset.</p>
<p>Returns a dictionary mapping member types to lists of member records. Can optionally
recurse through nested datasets and limit the number of results.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dataset_rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.constants.RID">RID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resource Identifier of the dataset.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>recurse</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to include members of nested datasets. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>limit</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum number of members to return per type. None for no limit.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="list">list</span>[<span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dict[str, list[dict[str, Any]]]: Dictionary mapping member types to lists of members.
Each member is a dictionary containing the record's attributes.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If dataset_rid is invalid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>members = ml.list_dataset_members("1-abc123", recurse=True)
for type_name, records in members.items():
...     print(f"{type_name}: {len(records)} records")</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/dataset/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">list_dataset_members</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span> <span class="n">recurse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Lists members of a dataset.</span>

<span class="sd">    Returns a dictionary mapping member types to lists of member records. Can optionally</span>
<span class="sd">    recurse through nested datasets and limit the number of results.</span>

<span class="sd">    Args:</span>
<span class="sd">        dataset_rid: Resource Identifier of the dataset.</span>
<span class="sd">        recurse: Whether to include members of nested datasets. Defaults to False.</span>
<span class="sd">        limit: Maximum number of members to return per type. None for no limit.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict[str, list[dict[str, Any]]]: Dictionary mapping member types to lists of members.</span>
<span class="sd">            Each member is a dictionary containing the record&#39;s attributes.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If dataset_rid is invalid.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; members = ml.list_dataset_members(&quot;1-abc123&quot;, recurse=True)</span>
<span class="sd">        &gt;&gt;&gt; for type_name, records in members.items():</span>
<span class="sd">        ...     print(f&quot;{type_name}: {len(records)} records&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_dataset_rid</span><span class="p">(</span><span class="n">dataset_rid</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;RID is not for a dataset_table: </span><span class="si">{</span><span class="n">dataset_rid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Look at each of the element types that might be in the dataset_table and get the list of rid for them from</span>
    <span class="c1"># the appropriate association table.</span>
    <span class="n">members</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">assoc_table</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span><span class="o">.</span><span class="n">find_associations</span><span class="p">():</span>
        <span class="n">other_fkey</span> <span class="o">=</span> <span class="n">assoc_table</span><span class="o">.</span><span class="n">other_fkeys</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">target_table</span> <span class="o">=</span> <span class="n">other_fkey</span><span class="o">.</span><span class="n">pk_table</span>
        <span class="n">member_table</span> <span class="o">=</span> <span class="n">assoc_table</span><span class="o">.</span><span class="n">table</span>

        <span class="c1"># Look at domain tables and nested datasets.</span>
        <span class="k">if</span> <span class="n">target_table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">domain_schema</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span>
            <span class="n">target_table</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span> <span class="ow">or</span> <span class="n">target_table</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;File&quot;</span>
        <span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">member_column</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;Nested_Dataset&quot;</span> <span class="k">if</span> <span class="n">target_table</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span> <span class="k">else</span> <span class="n">other_fkey</span><span class="o">.</span><span class="n">foreign_key_columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
        <span class="p">)</span>

        <span class="n">target_path</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">target_table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">target_table</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
        <span class="n">member_path</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">member_table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">member_table</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">member_path</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">member_path</span><span class="o">.</span><span class="n">Dataset</span> <span class="o">==</span> <span class="n">dataset_rid</span><span class="p">)</span><span class="o">.</span><span class="n">link</span><span class="p">(</span>
            <span class="n">target_path</span><span class="p">,</span>
            <span class="n">on</span><span class="o">=</span><span class="p">(</span><span class="n">member_path</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">member_column</span><span class="p">]</span> <span class="o">==</span> <span class="n">target_path</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="n">target_entities</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span> <span class="k">if</span> <span class="n">limit</span> <span class="k">else</span> <span class="n">path</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">())</span>
        <span class="n">members</span><span class="p">[</span><span class="n">target_table</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">target_entities</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">recurse</span> <span class="ow">and</span> <span class="n">target_table</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span><span class="p">:</span>
            <span class="c1"># Get the members for all the nested datasets and add to the member list.</span>
            <span class="n">nested_datasets</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">target_entities</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">ds</span> <span class="ow">in</span> <span class="n">nested_datasets</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_dataset_members</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">recurse</span><span class="o">=</span><span class="n">recurse</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">members</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">members</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.list_dataset_parents" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">list_dataset_parents</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">list_dataset_parents</span><span class="p">(</span>
    <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Given a dataset_table RID, return a list of RIDs of the parent datasets if this is included in a
nested dataset.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dataset_rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.constants.RID">RID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>return: RID of the parent dataset_table.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>RID of the parent dataset_table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/dataset/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_call</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_dataset_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset_rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a dataset_table RID, return a list of RIDs of the parent datasets if this is included in a</span>
<span class="sd">    nested dataset.</span>

<span class="sd">    Args:</span>
<span class="sd">        dataset_rid: return: RID of the parent dataset_table.</span>

<span class="sd">    Returns:</span>
<span class="sd">        RID of the parent dataset_table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_dataset_rid</span><span class="p">(</span><span class="n">dataset_rid</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;RID: </span><span class="si">{</span><span class="n">dataset_rid</span><span class="si">}</span><span class="s2"> does not belong to dataset_table </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_dataset_table</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Get association table for nested datasets</span>
    <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
    <span class="n">atable_path</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">Dataset_Dataset</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="s2">&quot;Dataset&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">atable_path</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">atable_path</span><span class="o">.</span><span class="n">Nested_Dataset</span> <span class="o">==</span> <span class="n">dataset_rid</span><span class="p">)</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">()]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.list_feature_values" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">list_feature_values</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">list_feature_values</span><span class="p">(</span>
    <span class="n">table</span><span class="p">:</span> <span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">feature_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datapath</span><span class="o">.</span><span class="n">_ResultSet</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Retrieves all values for a feature.</p>
<p>Returns all instances of the specified feature that have been created, including their associated
metadata and references.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>table</code>
            </td>
            <td>
                  <code><span title="deriva.core.ermrest_model.Table">Table</span> | <span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The table containing the feature, either as name or Table object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>feature_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the feature to retrieve values for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="deriva.core.datapath._ResultSet">_ResultSet</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>datapath._ResultSet: A result set containing all feature values and their metadata.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the feature doesn't exist or cannot be accessed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>values = ml.list_feature_values("samples", "expression_level")
for value in values:
...     print(f"Sample {value['RID']}: {value['value']}")</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_feature_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="n">Table</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datapath</span><span class="o">.</span><span class="n">_ResultSet</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieves all values for a feature.</span>

<span class="sd">    Returns all instances of the specified feature that have been created, including their associated</span>
<span class="sd">    metadata and references.</span>

<span class="sd">    Args:</span>
<span class="sd">        table: The table containing the feature, either as name or Table object.</span>
<span class="sd">        feature_name: Name of the feature to retrieve values for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        datapath._ResultSet: A result set containing all feature values and their metadata.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If the feature doesn&#39;t exist or cannot be accessed.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; values = ml.list_feature_values(&quot;samples&quot;, &quot;expression_level&quot;)</span>
<span class="sd">        &gt;&gt;&gt; for value in values:</span>
<span class="sd">        ...     print(f&quot;Sample {value[&#39;RID&#39;]}: {value[&#39;value&#39;]}&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get table and feature references</span>
    <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
    <span class="n">feature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_feature</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">)</span>

    <span class="c1"># Build and execute query for feature values</span>
    <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">feature</span><span class="o">.</span><span class="n">feature_table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">feature</span><span class="o">.</span><span class="n">feature_table</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.list_files" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">list_files</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">list_files</span><span class="p">(</span>
    <span class="n">file_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Lists files in the catalog with their metadata.</p>
<p>Returns a list of files with their metadata including URL, MD5 hash, length, description,
and associated file types. Files can be optionally filtered by type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>file_types</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filter results to only include these file types.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[dict[str, Any]]: List of file records, each containing:
- RID: Resource identifier
- URL: File location
- MD5: File hash
- Length: File size
- Description: File description
- File_Types: List of associated file types</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>List all files:
    &gt;&gt;&gt; files = ml.list_files()
    &gt;&gt;&gt; for f in files:
    ...     print(f"{f['RID']}: {f['URL']}")</p>
<p>Filter by file type:
    &gt;&gt;&gt; image_files = ml.list_files(["image", "png"])</p>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">list_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Lists files in the catalog with their metadata.</span>

<span class="sd">    Returns a list of files with their metadata including URL, MD5 hash, length, description,</span>
<span class="sd">    and associated file types. Files can be optionally filtered by type.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_types: Filter results to only include these file types.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[dict[str, Any]]: List of file records, each containing:</span>
<span class="sd">            - RID: Resource identifier</span>
<span class="sd">            - URL: File location</span>
<span class="sd">            - MD5: File hash</span>
<span class="sd">            - Length: File size</span>
<span class="sd">            - Description: File description</span>
<span class="sd">            - File_Types: List of associated file types</span>

<span class="sd">    Examples:</span>
<span class="sd">        List all files:</span>
<span class="sd">            &gt;&gt;&gt; files = ml.list_files()</span>
<span class="sd">            &gt;&gt;&gt; for f in files:</span>
<span class="sd">            ...     print(f&quot;{f[&#39;RID&#39;]}: {f[&#39;URL&#39;]}&quot;)</span>

<span class="sd">        Filter by file type:</span>
<span class="sd">            &gt;&gt;&gt; image_files = ml.list_files([&quot;image&quot;, &quot;png&quot;])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">asset_type_atable</span><span class="p">,</span> <span class="n">file_fk</span><span class="p">,</span> <span class="n">asset_type_fk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">find_association</span><span class="p">(</span><span class="s2">&quot;File&quot;</span><span class="p">,</span> <span class="s2">&quot;Asset_Type&quot;</span><span class="p">)</span>
    <span class="n">ml_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathBuilder</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ml_schema</span><span class="p">]</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">ml_path</span><span class="o">.</span><span class="n">File</span>
    <span class="n">asset_type</span> <span class="o">=</span> <span class="n">ml_path</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">asset_type_atable</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>

    <span class="n">path</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">path</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">asset_type</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;AT&quot;</span><span class="p">),</span> <span class="n">on</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">RID</span> <span class="o">==</span> <span class="n">asset_type</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">file_fk</span><span class="p">],</span> <span class="n">join_type</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">file_types</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">asset_type</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">asset_type_fk</span><span class="p">]</span> <span class="o">==</span> <span class="n">datapath</span><span class="o">.</span><span class="n">Any</span><span class="p">(</span><span class="o">*</span><span class="n">file_types</span><span class="p">))</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">attributes</span><span class="p">(</span>
        <span class="n">path</span><span class="o">.</span><span class="n">File</span><span class="o">.</span><span class="n">RID</span><span class="p">,</span>
        <span class="n">path</span><span class="o">.</span><span class="n">File</span><span class="o">.</span><span class="n">URL</span><span class="p">,</span>
        <span class="n">path</span><span class="o">.</span><span class="n">File</span><span class="o">.</span><span class="n">MD5</span><span class="p">,</span>
        <span class="n">path</span><span class="o">.</span><span class="n">File</span><span class="o">.</span><span class="n">Length</span><span class="p">,</span>
        <span class="n">path</span><span class="o">.</span><span class="n">File</span><span class="o">.</span><span class="n">Description</span><span class="p">,</span>
        <span class="n">path</span><span class="o">.</span><span class="n">AT</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">asset_type_fk</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="n">file_map</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">path</span><span class="o">.</span><span class="n">fetch</span><span class="p">():</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">file_map</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">],</span> <span class="p">{</span><span class="o">**</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;File_Types&quot;</span><span class="p">:</span> <span class="p">[]})</span>
        <span class="k">if</span> <span class="n">ft</span> <span class="o">:=</span> <span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Asset_Type&quot;</span><span class="p">):</span>  <span class="c1"># assign-and-test in one go</span>
            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;File_Types&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ft</span><span class="p">)</span>

    <span class="c1"># Now get rid of the File_Type key and return the result</span>
    <span class="k">return</span> <span class="p">[(</span><span class="n">f</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;Asset_Type&quot;</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">file_map</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.list_vocabulary_terms" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">list_vocabulary_terms</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">list_vocabulary_terms</span><span class="p">(</span>
    <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">VocabularyTerm</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Lists all terms in a vocabulary table.</p>
<p>Retrieves all terms, their descriptions, and synonyms from a controlled vocabulary table.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>table</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="deriva.core.ermrest_model.Table">Table</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Vocabulary table to list terms from (name or Table object).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="VocabularyTerm (deriva_ml.core.definitions.VocabularyTerm)" href="../deriva_definitions/#deriva_ml.core.definitions.VocabularyTerm">VocabularyTerm</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[VocabularyTerm]: List of vocabulary terms with their metadata.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If table doesn't exist or is not a vocabulary table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">terms</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">list_vocabulary_terms</span><span class="p">(</span><span class="s2">&quot;tissue_types&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">terms</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">term</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">term</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">term</span><span class="o">.</span><span class="n">synonyms</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Synonyms: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">synonyms</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">list_vocabulary_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">VocabularyTerm</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Lists all terms in a vocabulary table.</span>

<span class="sd">    Retrieves all terms, their descriptions, and synonyms from a controlled vocabulary table.</span>

<span class="sd">    Args:</span>
<span class="sd">        table: Vocabulary table to list terms from (name or Table object).</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[VocabularyTerm]: List of vocabulary terms with their metadata.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If table doesn&#39;t exist or is not a vocabulary table.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; terms = ml.list_vocabulary_terms(&quot;tissue_types&quot;)</span>
<span class="sd">        &gt;&gt;&gt; for term in terms:</span>
<span class="sd">        ...     print(f&quot;{term.name}: {term.description}&quot;)</span>
<span class="sd">        ...     if term.synonyms:</span>
<span class="sd">        ...         print(f&quot;  Synonyms: {&#39;, &#39;.join(term.synonyms)}&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get path builder and table reference</span>
    <span class="n">pb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span>
    <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">MLVocab</span><span class="p">)</span> <span class="k">else</span> <span class="n">table</span><span class="p">)</span>

    <span class="c1"># Validate table is a vocabulary table</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">is_vocabulary</span><span class="p">(</span><span class="n">table</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The table </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2"> is not a controlled vocabulary&quot;</span><span class="p">)</span>

    <span class="c1"># Fetch and convert all terms to VocabularyTerm objects</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">VocabularyTerm</span><span class="p">(</span><span class="o">**</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">pb</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">()]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.list_workflows" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">list_workflows</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">list_workflows</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Workflow</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Lists all workflows in the catalog.</p>
<p>Retrieves all workflow definitions, including their names, URLs, types, versions,
and descriptions.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="deriva_ml.execution.workflow.Workflow">Workflow</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[Workflow]: List of workflow objects, each containing:
- name: Workflow name
- url: Source code URL
- workflow_type: Type of workflow
- version: Version identifier
- description: Workflow description
- rid: Resource identifier
- checksum: Source code checksum</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">workflows</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">list_workflows</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">workflows</span><span class="p">:</span>
<span class="go">        print(f&quot;{w.name} (v{w.version}): {w.description}&quot;)</span>
<span class="go">        print(f&quot;  Source: {w.url}&quot;)</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">list_workflows</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Workflow</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Lists all workflows in the catalog.</span>

<span class="sd">    Retrieves all workflow definitions, including their names, URLs, types, versions,</span>
<span class="sd">    and descriptions.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[Workflow]: List of workflow objects, each containing:</span>
<span class="sd">            - name: Workflow name</span>
<span class="sd">            - url: Source code URL</span>
<span class="sd">            - workflow_type: Type of workflow</span>
<span class="sd">            - version: Version identifier</span>
<span class="sd">            - description: Workflow description</span>
<span class="sd">            - rid: Resource identifier</span>
<span class="sd">            - checksum: Source code checksum</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; workflows = ml.list_workflows()</span>
<span class="sd">        &gt;&gt;&gt; for w in workflows:</span>
<span class="sd">                print(f&quot;{w.name} (v{w.version}): {w.description}&quot;)</span>
<span class="sd">                print(f&quot;  Source: {w.url}&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get a workflow table path and fetch all workflows</span>
    <span class="n">workflow_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathBuilder</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">Workflow</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">Workflow</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">w</span><span class="p">[</span><span class="s2">&quot;Name&quot;</span><span class="p">],</span>
            <span class="n">url</span><span class="o">=</span><span class="n">w</span><span class="p">[</span><span class="s2">&quot;URL&quot;</span><span class="p">],</span>
            <span class="n">workflow_type</span><span class="o">=</span><span class="n">w</span><span class="p">[</span><span class="s2">&quot;Workflow_Type&quot;</span><span class="p">],</span>
            <span class="n">version</span><span class="o">=</span><span class="n">w</span><span class="p">[</span><span class="s2">&quot;Version&quot;</span><span class="p">],</span>
            <span class="n">description</span><span class="o">=</span><span class="n">w</span><span class="p">[</span><span class="s2">&quot;Description&quot;</span><span class="p">],</span>
            <span class="n">rid</span><span class="o">=</span><span class="n">w</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">],</span>
            <span class="n">checksum</span><span class="o">=</span><span class="n">w</span><span class="p">[</span><span class="s2">&quot;Checksum&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">workflow_path</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.lookup_feature" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">lookup_feature</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">lookup_feature</span><span class="p">(</span>
    <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">,</span>
    <span class="n">feature_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Feature</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Retrieves a Feature object.</p>
<p>Looks up and returns a Feature object that provides an interface to work with an existing feature
definition in the catalog.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>table</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="deriva.core.ermrest_model.Table">Table</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The table containing the feature, either as name or Table object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>feature_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the feature to look up.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Feature</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="Feature (deriva_ml.feature.Feature)" href="../feature/#deriva_ml.feature.Feature">Feature</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An object representing the feature and its implementation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the feature doesn't exist in the specified table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>feature = ml.lookup_feature("samples", "expression_level")
print(feature.feature_name)
'expression_level'</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">lookup_feature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Feature</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieves a Feature object.</span>

<span class="sd">    Looks up and returns a Feature object that provides an interface to work with an existing feature</span>
<span class="sd">    definition in the catalog.</span>

<span class="sd">    Args:</span>
<span class="sd">        table: The table containing the feature, either as name or Table object.</span>
<span class="sd">        feature_name: Name of the feature to look up.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Feature: An object representing the feature and its implementation.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If the feature doesn&#39;t exist in the specified table.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; feature = ml.lookup_feature(&quot;samples&quot;, &quot;expression_level&quot;)</span>
<span class="sd">        &gt;&gt;&gt; print(feature.feature_name)</span>
<span class="sd">        &#39;expression_level&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">lookup_feature</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.lookup_term" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">lookup_term</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">lookup_term</span><span class="p">(</span>
    <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">,</span> <span class="n">term_name</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">VocabularyTerm</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Finds a term in a vocabulary table.</p>
<p>Searches for a term in the specified vocabulary table, matching either the primary name
or any of its synonyms.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>table</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="deriva.core.ermrest_model.Table">Table</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Vocabulary table to search in (name or Table object).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>term_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name or synonym of the term to find.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>VocabularyTerm</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="VocabularyTerm (deriva_ml.core.definitions.VocabularyTerm)" href="../deriva_definitions/#deriva_ml.core.definitions.VocabularyTerm">VocabularyTerm</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The matching vocabulary term.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="DerivaMLVocabularyException">DerivaMLVocabularyException</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the table is not a vocabulary table, or term is not found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Look up by primary name:
    &gt;&gt;&gt; term = ml.lookup_term("tissue_types", "epithelial")
    &gt;&gt;&gt; print(term.description)</p>
<p>Look up by synonym:
    &gt;&gt;&gt; term = ml.lookup_term("tissue_types", "epithelium")</p>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">lookup_term</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">,</span> <span class="n">term_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">VocabularyTerm</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finds a term in a vocabulary table.</span>

<span class="sd">    Searches for a term in the specified vocabulary table, matching either the primary name</span>
<span class="sd">    or any of its synonyms.</span>

<span class="sd">    Args:</span>
<span class="sd">        table: Vocabulary table to search in (name or Table object).</span>
<span class="sd">        term_name: Name or synonym of the term to find.</span>

<span class="sd">    Returns:</span>
<span class="sd">        VocabularyTerm: The matching vocabulary term.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLVocabularyException: If the table is not a vocabulary table, or term is not found.</span>

<span class="sd">    Examples:</span>
<span class="sd">        Look up by primary name:</span>
<span class="sd">            &gt;&gt;&gt; term = ml.lookup_term(&quot;tissue_types&quot;, &quot;epithelial&quot;)</span>
<span class="sd">            &gt;&gt;&gt; print(term.description)</span>

<span class="sd">        Look up by synonym:</span>
<span class="sd">            &gt;&gt;&gt; term = ml.lookup_term(&quot;tissue_types&quot;, &quot;epithelium&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get and validate vocabulary table reference</span>
    <span class="n">vocab_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">is_vocabulary</span><span class="p">(</span><span class="n">vocab_table</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The table </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2"> is not a controlled vocabulary&quot;</span><span class="p">)</span>

    <span class="c1"># Get schema and table paths</span>
    <span class="n">schema_name</span><span class="p">,</span> <span class="n">table_name</span> <span class="o">=</span> <span class="n">vocab_table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">vocab_table</span><span class="o">.</span><span class="n">name</span>
    <span class="n">schema_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">getPathBuilder</span><span class="p">()</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="n">schema_name</span><span class="p">]</span>

    <span class="c1"># Search for term by name or synonym</span>
    <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">schema_path</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">term_name</span> <span class="o">==</span> <span class="n">term</span><span class="p">[</span><span class="s2">&quot;Name&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="p">(</span><span class="n">term</span><span class="p">[</span><span class="s2">&quot;Synonyms&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">term_name</span> <span class="ow">in</span> <span class="n">term</span><span class="p">[</span><span class="s2">&quot;Synonyms&quot;</span><span class="p">]):</span>
            <span class="k">return</span> <span class="n">VocabularyTerm</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">term</span><span class="p">)</span>

    <span class="c1"># Term not found</span>
    <span class="k">raise</span> <span class="n">DerivaMLInvalidTerm</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">term_name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.lookup_workflow" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">lookup_workflow</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">lookup_workflow</span><span class="p">(</span>
    <span class="n">url_or_checksum</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Finds a workflow by URL.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>url_or_checksum</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>URL or checksum of the workflow.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Returns:
    RID: Resource Identifier of the workflow if found, None otherwise.</p>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>rid = ml.lookup_workflow("https://github.com/org/repo/workflow.py")
if rid:
...     print(f"Found workflow: {rid}")</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">lookup_workflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url_or_checksum</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finds a workflow by URL.</span>

<span class="sd">    Args:</span>
<span class="sd">        url_or_checksum: URL or checksum of the workflow.</span>
<span class="sd">    Returns:</span>
<span class="sd">        RID: Resource Identifier of the workflow if found, None otherwise.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; rid = ml.lookup_workflow(&quot;https://github.com/org/repo/workflow.py&quot;)</span>
<span class="sd">        &gt;&gt;&gt; if rid:</span>
<span class="sd">        ...     print(f&quot;Found workflow: {rid}&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get a workflow table path</span>
    <span class="n">workflow_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathBuilder</span><span class="o">.</span><span class="n">schemas</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ml_schema</span><span class="p">]</span><span class="o">.</span><span class="n">Workflow</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Search for workflow by URL</span>
        <span class="n">url_column</span> <span class="o">=</span> <span class="n">workflow_path</span><span class="o">.</span><span class="n">URL</span>
        <span class="n">checksum_column</span> <span class="o">=</span> <span class="n">workflow_path</span><span class="o">.</span><span class="n">Checksum</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span>
            <span class="n">workflow_path</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
                <span class="p">(</span><span class="n">url_column</span> <span class="o">==</span> <span class="n">url_or_checksum</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">checksum_column</span> <span class="o">==</span> <span class="n">url_or_checksum</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span>
        <span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;RID&quot;</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.resolve_rid" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">resolve_rid</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">resolve_rid</span><span class="p">(</span>
    <span class="n">rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResolveRidResult</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Resolves RID to catalog location.</p>
<p>Looks up a RID and returns information about where it exists in the catalog, including schema,
table, and column metadata.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.definitions.RID">RID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resource Identifier to resolve.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ResolveRidResult</code></td>            <td>
                  <code><span title="deriva.core.ermrest_catalog.ResolveRidResult">ResolveRidResult</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Named tuple containing:
- schema: Schema name
- table: Table name
- columns: Column definitions
- datapath: Path builder for accessing the entity</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If RID doesn't exist in catalog.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">resolve_rid</span><span class="p">(</span><span class="s2">&quot;1-abc123&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found in </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">schema</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">table</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">datapath</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">resolve_rid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResolveRidResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Resolves RID to catalog location.</span>

<span class="sd">    Looks up a RID and returns information about where it exists in the catalog, including schema,</span>
<span class="sd">    table, and column metadata.</span>

<span class="sd">    Args:</span>
<span class="sd">        rid: Resource Identifier to resolve.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ResolveRidResult: Named tuple containing:</span>
<span class="sd">            - schema: Schema name</span>
<span class="sd">            - table: Table name</span>
<span class="sd">            - columns: Column definitions</span>
<span class="sd">            - datapath: Path builder for accessing the entity</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If RID doesn&#39;t exist in catalog.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; result = ml.resolve_rid(&quot;1-abc123&quot;)</span>
<span class="sd">        &gt;&gt;&gt; print(f&quot;Found in {result.schema}.{result.table}&quot;)</span>
<span class="sd">        &gt;&gt;&gt; data = result.datapath.entities().fetch()</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Attempt to resolve RID using catalog model</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">resolve_rid</span><span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">_e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid RID </span><span class="si">{</span><span class="n">rid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.restore_execution" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">restore_execution</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">restore_execution</span><span class="p">(</span>
    <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Execution</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Restores a previous execution.</p>
<p>Given an execution RID, retrieves the execution configuration and restores the local compute environment.
This routine has a number of side effects.</p>
<ol>
<li>
<p>The datasets specified in the configuration are downloaded and placed in the cache-dir. If a version is
not specified in the configuration, then a new minor version number is created for the dataset and downloaded.</p>
</li>
<li>
<p>If any execution assets are provided in the configuration, they are downloaded and placed
in the working directory.</p>
</li>
</ol>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>execution_rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.definitions.RID">RID</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resource Identifier (RID) of the execution to restore.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Execution</code></td>            <td>
                  <code><span title="deriva_ml.execution.execution.Execution">Execution</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An execution object representing the restored execution environment.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If execution_rid is not valid or execution cannot be restored.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>execution = ml.restore_execution("1-abc123")</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">restore_execution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">execution_rid</span><span class="p">:</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Execution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Restores a previous execution.</span>

<span class="sd">    Given an execution RID, retrieves the execution configuration and restores the local compute environment.</span>
<span class="sd">    This routine has a number of side effects.</span>

<span class="sd">    1. The datasets specified in the configuration are downloaded and placed in the cache-dir. If a version is</span>
<span class="sd">    not specified in the configuration, then a new minor version number is created for the dataset and downloaded.</span>

<span class="sd">    2. If any execution assets are provided in the configuration, they are downloaded and placed</span>
<span class="sd">    in the working directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        execution_rid: Resource Identifier (RID) of the execution to restore.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Execution: An execution object representing the restored execution environment.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If execution_rid is not valid or execution cannot be restored.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; execution = ml.restore_execution(&quot;1-abc123&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Import here to avoid circular dependency</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">deriva_ml.execution.execution</span><span class="w"> </span><span class="kn">import</span> <span class="n">Execution</span>

    <span class="c1"># If no RID provided, try to find single execution in working directory</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">execution_rid</span><span class="p">:</span>
        <span class="n">e_rids</span> <span class="o">=</span> <span class="n">execution_rids</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">e_rids</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DerivaMLException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Multiple execution RIDs were found </span><span class="si">{</span><span class="n">e_rids</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="n">execution_rid</span> <span class="o">=</span> <span class="n">e_rids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Try to load configuration from a file</span>
    <span class="n">cfile</span> <span class="o">=</span> <span class="n">asset_file_path</span><span class="p">(</span>
        <span class="n">prefix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span><span class="p">,</span>
        <span class="n">exec_rid</span><span class="o">=</span><span class="n">execution_rid</span><span class="p">,</span>
        <span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;configuration.json&quot;</span><span class="p">,</span>
        <span class="n">asset_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="s2">&quot;Execution_Metadata&quot;</span><span class="p">),</span>
        <span class="n">metadata</span><span class="o">=</span><span class="p">{},</span>
    <span class="p">)</span>

    <span class="c1"># Load configuration from a file or create from an execution record</span>
    <span class="k">if</span> <span class="n">cfile</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">configuration</span> <span class="o">=</span> <span class="n">ExecutionConfiguration</span><span class="o">.</span><span class="n">load_configuration</span><span class="p">(</span><span class="n">cfile</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">execution</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">retrieve_rid</span><span class="p">(</span><span class="n">execution_rid</span><span class="p">)</span>
        <span class="n">configuration</span> <span class="o">=</span> <span class="n">ExecutionConfiguration</span><span class="p">(</span>
            <span class="n">workflow</span><span class="o">=</span><span class="n">execution</span><span class="p">[</span><span class="s2">&quot;Workflow&quot;</span><span class="p">],</span>
            <span class="n">description</span><span class="o">=</span><span class="n">execution</span><span class="p">[</span><span class="s2">&quot;Description&quot;</span><span class="p">],</span>
        <span class="p">)</span>

    <span class="c1"># Create and return an execution instance</span>
    <span class="k">return</span> <span class="n">Execution</span><span class="p">(</span><span class="n">configuration</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">reload</span><span class="o">=</span><span class="n">execution_rid</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.retrieve_rid" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">retrieve_rid</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">retrieve_rid</span><span class="p">(</span>
    <span class="n">rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Retrieves complete record for RID.</p>
<p>Fetches all column values for the entity identified by the RID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>rid</code>
            </td>
            <td>
                  <code><span title="deriva_ml.core.definitions.RID">RID</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resource Identifier of the record to retrieve.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dict[str, Any]: Dictionary containing all column values for the entity.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the RID doesn't exist in the catalog.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>record = ml.retrieve_rid("1-abc123")
print(f"Name: {record['name']}, Created: {record['creation_date']}")</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">retrieve_rid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="p">:</span> <span class="n">RID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieves complete record for RID.</span>

<span class="sd">    Fetches all column values for the entity identified by the RID.</span>

<span class="sd">    Args:</span>
<span class="sd">        rid: Resource Identifier of the record to retrieve.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict[str, Any]: Dictionary containing all column values for the entity.</span>

<span class="sd">    Raises:</span>
<span class="sd">        DerivaMLException: If the RID doesn&#39;t exist in the catalog.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; record = ml.retrieve_rid(&quot;1-abc123&quot;)</span>
<span class="sd">        &gt;&gt;&gt; print(f&quot;Name: {record[&#39;name&#39;]}, Created: {record[&#39;creation_date&#39;]}&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Resolve RID and fetch the first (only) matching record</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolve_rid</span><span class="p">(</span><span class="n">rid</span><span class="p">)</span><span class="o">.</span><span class="n">datapath</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.table_path" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">table_path</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">table_path</span><span class="p">(</span><span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns a local filesystem path for table CSV files.</p>
<p>Generates a standardized path where CSV files should be placed when preparing to upload data to a table.
The path follows the project's directory structure conventions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>table</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="deriva.core.ermrest_model.Table">Table</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the table or Table object to get the path for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Path</code></td>            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filesystem path where the CSV file should be placed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>path = ml.table_path("experiment_results")
df.to_csv(path) # Save data for upload</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">table_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Table</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a local filesystem path for table CSV files.</span>

<span class="sd">    Generates a standardized path where CSV files should be placed when preparing to upload data to a table.</span>
<span class="sd">    The path follows the project&#39;s directory structure conventions.</span>

<span class="sd">    Args:</span>
<span class="sd">        table: Name of the table or Table object to get the path for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Path: Filesystem path where the CSV file should be placed.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; path = ml.table_path(&quot;experiment_results&quot;)</span>
<span class="sd">        &gt;&gt;&gt; df.to_csv(path) # Save data for upload</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">table_path</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span><span class="p">,</span>
        <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">domain_schema</span><span class="p">,</span>
        <span class="n">table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name_to_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaML.user_list" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">user_list</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">user_list</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns catalog user list.</p>
<p>Retrieves basic information about all users who have access to the catalog, including their
identifiers and full names.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[Dict[str, str]]: List of user information dictionaries, each containing:
- 'ID': User identifier
- 'Full_Name': User's full name</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Examples:</p>
<pre><code>&gt;&gt;&gt; users = ml.user_list()
&gt;&gt;&gt; for user in users:
...     print(f"{user['Full_Name']} ({user['ID']})")
</code></pre>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">user_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns catalog user list.</span>

<span class="sd">    Retrieves basic information about all users who have access to the catalog, including their</span>
<span class="sd">    identifiers and full names.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[Dict[str, str]]: List of user information dictionaries, each containing:</span>
<span class="sd">            - &#39;ID&#39;: User identifier</span>
<span class="sd">            - &#39;Full_Name&#39;: User&#39;s full name</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt; users = ml.user_list()</span>
<span class="sd">        &gt;&gt;&gt; for user in users:</span>
<span class="sd">        ...     print(f&quot;{user[&#39;Full_Name&#39;]} ({user[&#39;ID&#39;]})&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get the user table path and fetch basic user info</span>
    <span class="n">user_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathBuilder</span><span class="o">.</span><span class="n">public</span><span class="o">.</span><span class="n">ERMrest_Client</span><span class="o">.</span><span class="n">path</span>
    <span class="k">return</span> <span class="p">[{</span><span class="s2">&quot;ID&quot;</span><span class="p">:</span> <span class="n">u</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">],</span> <span class="s2">&quot;Full_Name&quot;</span><span class="p">:</span> <span class="n">u</span><span class="p">[</span><span class="s2">&quot;Full_Name&quot;</span><span class="p">]}</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">user_path</span><span class="o">.</span><span class="n">entities</span><span class="p">()</span><span class="o">.</span><span class="n">fetch</span><span class="p">()]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="deriva_ml.core.DerivaMLException" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">DerivaMLException</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>


        <p>Exception class specific to DerivaML module.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>msg</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional message for the exception.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="quote">
                <summary>Source code in <code>src/deriva_ml/core/exceptions.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DerivaMLException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception class specific to DerivaML module.</span>

<span class="sd">    Args:</span>
<span class="sd">        msg (str): Optional message for the exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_msg</span> <span class="o">=</span> <span class="n">msg</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="deriva_ml.core.DerivaMLInvalidTerm" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">DerivaMLInvalidTerm</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code></p>


        <p>Exception class for invalid terms in DerivaML controlled vocabulary.</p>








              <details class="quote">
                <summary>Source code in <code>src/deriva_ml/core/exceptions.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DerivaMLInvalidTerm</span><span class="p">(</span><span class="n">DerivaMLException</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception class for invalid terms in DerivaML controlled vocabulary.&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vocabulary</span><span class="p">,</span> <span class="n">term</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Term doesn&#39;t exist&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Exception indicating undefined term type&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid term </span><span class="si">{</span><span class="n">term</span><span class="si">}</span><span class="s2"> in vocabulary </span><span class="si">{</span><span class="n">vocabulary</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaMLInvalidTerm.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">__init__</span><span class="p">(</span>
    <span class="n">vocabulary</span><span class="p">,</span>
    <span class="n">term</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Term doesn&#39;t exist&quot;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Exception indicating undefined term type</p>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/exceptions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vocabulary</span><span class="p">,</span> <span class="n">term</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Term doesn&#39;t exist&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception indicating undefined term type&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid term </span><span class="si">{</span><span class="n">term</span><span class="si">}</span><span class="s2"> in vocabulary </span><span class="si">{</span><span class="n">vocabulary</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="deriva_ml.core.DerivaMLTableTypeError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">DerivaMLTableTypeError</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="DerivaMLException (deriva_ml.core.exceptions.DerivaMLException)" href="#deriva_ml.core.DerivaMLException">DerivaMLException</a></code></p>


        <p>RID for table is not of correct type.</p>








              <details class="quote">
                <summary>Source code in <code>src/deriva_ml/core/exceptions.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DerivaMLTableTypeError</span><span class="p">(</span><span class="n">DerivaMLException</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;RID for table is not of correct type.&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_type</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Exception indicating undefined term type&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Table  </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2"> is not of type </span><span class="si">{</span><span class="n">table_type</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.DerivaMLTableTypeError.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">__init__</span><span class="p">(</span><span class="n">table_type</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Exception indicating undefined term type</p>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/exceptions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_type</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exception indicating undefined term type&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Table  </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2"> is not of type </span><span class="si">{</span><span class="n">table_type</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="deriva_ml.core.ExecAssetType" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ExecAssetType</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseStrEnum (deriva_ml.core.enums.BaseStrEnum)" href="../deriva_definitions/#deriva_ml.core.definitions.BaseStrEnum">BaseStrEnum</a></code></p>


        <p>Execution asset type identifiers.</p>
<p>Defines the types of assets that can be produced during an execution.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.ExecAssetType.input_file">input_file</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Input file used by the execution.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.ExecAssetType.output_file">output_file</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Output file produced by the execution.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.ExecAssetType.notebook_output">notebook_output</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Jupyter notebook output from the execution.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="quote">
                <summary>Source code in <code>src/deriva_ml/core/enums.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ExecAssetType</span><span class="p">(</span><span class="n">BaseStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Execution asset type identifiers.</span>

<span class="sd">    Defines the types of assets that can be produced during an execution.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        input_file (str): Input file used by the execution.</span>
<span class="sd">        output_file (str): Output file produced by the execution.</span>
<span class="sd">        notebook_output (str): Jupyter notebook output from the execution.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">input_file</span> <span class="o">=</span> <span class="s2">&quot;Input_File&quot;</span>
    <span class="n">output_file</span> <span class="o">=</span> <span class="s2">&quot;Output_File&quot;</span>
    <span class="n">notebook_output</span> <span class="o">=</span> <span class="s2">&quot;Notebook_Output&quot;</span>
    <span class="n">model_file</span> <span class="o">=</span> <span class="s2">&quot;Model_File&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="deriva_ml.core.ExecMetadataType" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ExecMetadataType</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseStrEnum (deriva_ml.core.enums.BaseStrEnum)" href="../deriva_definitions/#deriva_ml.core.definitions.BaseStrEnum">BaseStrEnum</a></code></p>


        <p>Execution metadata type identifiers.</p>
<p>Defines the types of metadata that can be associated with an execution.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.ExecMetadataType.execution_config">execution_config</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Execution configuration data.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.ExecMetadataType.runtime_env">runtime_env</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Runtime environment information.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="quote">
                <summary>Source code in <code>src/deriva_ml/core/enums.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ExecMetadataType</span><span class="p">(</span><span class="n">BaseStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Execution metadata type identifiers.</span>

<span class="sd">    Defines the types of metadata that can be associated with an execution.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        execution_config (str): Execution configuration data.</span>
<span class="sd">        runtime_env (str): Runtime environment information.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">execution_config</span> <span class="o">=</span> <span class="s2">&quot;Execution_Config&quot;</span>
    <span class="n">runtime_env</span> <span class="o">=</span> <span class="s2">&quot;Runtime_Env&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="deriva_ml.core.FileSpec" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">FileSpec</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>An entry into the File table</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.FileSpec.url">url</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The File url to the url.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.FileSpec.description">description</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The description of the file.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.FileSpec.md5">md5</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The MD5 hash of the file.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.FileSpec.length">length</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The length of the file in bytes.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.FileSpec.file_types">file_types</span></code></td>
            <td>
                  <code><span title="pydantic.conlist">conlist</span>(<span title="str">str</span>) | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of file types.  Each files_type should be a defined term in MLVocab.file_type vocabulary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="quote">
                <summary>Source code in <code>src/deriva_ml/core/filespec.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FileSpec</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An entry into the File table</span>

<span class="sd">    Attributes:</span>
<span class="sd">        url: The File url to the url.</span>
<span class="sd">        description: The description of the file.</span>
<span class="sd">        md5: The MD5 hash of the file.</span>
<span class="sd">        length: The length of the file in bytes.</span>
<span class="sd">        file_types: A list of file types.  Each files_type should be a defined term in MLVocab.file_type vocabulary.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s2">&quot;URL&quot;</span><span class="p">,</span> <span class="n">validation_alias</span><span class="o">=</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>
    <span class="n">md5</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s2">&quot;MD5&quot;</span><span class="p">,</span> <span class="n">validation_alias</span><span class="o">=</span><span class="s2">&quot;md5&quot;</span><span class="p">)</span>
    <span class="n">length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s2">&quot;Length&quot;</span><span class="p">,</span> <span class="n">validation_alias</span><span class="o">=</span><span class="s2">&quot;length&quot;</span><span class="p">)</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;Description&quot;</span><span class="p">,</span> <span class="n">validation_alias</span><span class="o">=</span><span class="s2">&quot;description&quot;</span><span class="p">)</span>
    <span class="n">file_types</span><span class="p">:</span> <span class="n">conlist</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_file_url</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Examine the provided URL. If it&#39;s a local path, convert it into a tag URL.</span>

<span class="sd">        Args:</span>
<span class="sd">            url: The URL to validate and potentially convert</span>

<span class="sd">        Returns:</span>
<span class="sd">            The validated/converted URL</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValidationError: If the URL is not a file URL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url_parts</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">url_parts</span><span class="o">.</span><span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span>
            <span class="c1"># Already a tag URL, so just return it.</span>
            <span class="k">return</span> <span class="n">url</span>
        <span class="k">elif</span> <span class="p">(</span><span class="ow">not</span> <span class="n">url_parts</span><span class="o">.</span><span class="n">scheme</span><span class="p">)</span> <span class="ow">or</span> <span class="n">url_parts</span><span class="o">.</span><span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;file&quot;</span><span class="p">:</span>
            <span class="c1"># There is no scheme part of the URL, or it is a file URL, so it is a local file path.</span>
            <span class="c1"># Convert to a tag URL.</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;tag://</span><span class="si">{</span><span class="n">gethostname</span><span class="p">()</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="si">}</span><span class="s2">:file://</span><span class="si">{</span><span class="n">url_parts</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;url is not a file URL&quot;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_filespecs</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">file_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Path</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">FileSpec</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Given a file or directory, generate the sequence of corresponding FileSpecs suitable to create a File table.</span>

<span class="sd">        Args:</span>
<span class="sd">            path: Path to the file or directory.</span>
<span class="sd">            description: The description of the file(s)</span>
<span class="sd">            file_types: A list of file types or a function that takes a file path and returns a list of file types.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An iterable of FileSpecs for each file in the directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">file_types</span> <span class="o">=</span> <span class="n">file_types</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="n">file_types_fn</span> <span class="o">=</span> <span class="n">file_types</span> <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">file_types</span><span class="p">)</span> <span class="k">else</span> <span class="k">lambda</span> <span class="n">_x</span><span class="p">:</span> <span class="n">file_types</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">create_spec</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FileSpec</span><span class="p">:</span>
            <span class="n">hashes</span> <span class="o">=</span> <span class="n">hash_utils</span><span class="o">.</span><span class="n">compute_file_hashes</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">hashes</span><span class="o">=</span><span class="nb">frozenset</span><span class="p">([</span><span class="s2">&quot;md5&quot;</span><span class="p">,</span> <span class="s2">&quot;sha256&quot;</span><span class="p">]))</span>
            <span class="n">md5</span> <span class="o">=</span> <span class="n">hashes</span><span class="p">[</span><span class="s2">&quot;md5&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">type_list</span> <span class="o">=</span> <span class="n">file_types_fn</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">FileSpec</span><span class="p">(</span>
                <span class="n">length</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span><span class="p">,</span>
                <span class="n">md5</span><span class="o">=</span><span class="n">md5</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
                <span class="n">url</span><span class="o">=</span><span class="n">file_path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span>
                <span class="n">file_types</span><span class="o">=</span><span class="n">type_list</span> <span class="k">if</span> <span class="s2">&quot;File&quot;</span> <span class="ow">in</span> <span class="n">type_list</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">type_list</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">path</span><span class="p">]</span> <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">is_file</span><span class="p">()</span> <span class="k">else</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">rglob</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">is_file</span><span class="p">()]</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">create_spec</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">read_filespec</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">FileSpec</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get FileSpecs from a JSON lines file.</span>

<span class="sd">        Args:</span>
<span class="sd">         path: Path to the .jsonl file (string or Path).</span>

<span class="sd">        Yields:</span>
<span class="sd">             A FileSpec object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">yield</span> <span class="n">FileSpec</span><span class="p">(</span><span class="o">**</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.FileSpec.create_filespecs" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create_filespecs</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_filespecs</span><span class="p">(</span>
    <span class="n">path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">file_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="o">|</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Path</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">FileSpec</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Given a file or directory, generate the sequence of corresponding FileSpecs suitable to create a File table.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span> | <span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the file or directory.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>description</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The description of the file(s)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_types</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>] | <span title="typing.Callable">Callable</span>[[<span title="pathlib.Path">Path</span>], <span title="list">list</span>[<span title="str">str</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of file types or a function that takes a file path and returns a list of file types.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An iterable of FileSpecs for each file in the directory.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/filespec.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_filespecs</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">file_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Path</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">FileSpec</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a file or directory, generate the sequence of corresponding FileSpecs suitable to create a File table.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: Path to the file or directory.</span>
<span class="sd">        description: The description of the file(s)</span>
<span class="sd">        file_types: A list of file types or a function that takes a file path and returns a list of file types.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An iterable of FileSpecs for each file in the directory.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">file_types</span> <span class="o">=</span> <span class="n">file_types</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">file_types_fn</span> <span class="o">=</span> <span class="n">file_types</span> <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">file_types</span><span class="p">)</span> <span class="k">else</span> <span class="k">lambda</span> <span class="n">_x</span><span class="p">:</span> <span class="n">file_types</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_spec</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FileSpec</span><span class="p">:</span>
        <span class="n">hashes</span> <span class="o">=</span> <span class="n">hash_utils</span><span class="o">.</span><span class="n">compute_file_hashes</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">hashes</span><span class="o">=</span><span class="nb">frozenset</span><span class="p">([</span><span class="s2">&quot;md5&quot;</span><span class="p">,</span> <span class="s2">&quot;sha256&quot;</span><span class="p">]))</span>
        <span class="n">md5</span> <span class="o">=</span> <span class="n">hashes</span><span class="p">[</span><span class="s2">&quot;md5&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">type_list</span> <span class="o">=</span> <span class="n">file_types_fn</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">FileSpec</span><span class="p">(</span>
            <span class="n">length</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span><span class="p">,</span>
            <span class="n">md5</span><span class="o">=</span><span class="n">md5</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
            <span class="n">url</span><span class="o">=</span><span class="n">file_path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span>
            <span class="n">file_types</span><span class="o">=</span><span class="n">type_list</span> <span class="k">if</span> <span class="s2">&quot;File&quot;</span> <span class="ow">in</span> <span class="n">type_list</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">type_list</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">path</span><span class="p">]</span> <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">is_file</span><span class="p">()</span> <span class="k">else</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">rglob</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">is_file</span><span class="p">()]</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">create_spec</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.FileSpec.read_filespec" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">read_filespec</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">read_filespec</span><span class="p">(</span>
    <span class="n">path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">FileSpec</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get FileSpecs from a JSON lines file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span> | <span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the .jsonl file (string or Path).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Yields:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="FileSpec (deriva_ml.core.filespec.FileSpec)" href="#deriva_ml.core.FileSpec">FileSpec</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A FileSpec object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/filespec.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">read_filespec</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">FileSpec</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get FileSpecs from a JSON lines file.</span>

<span class="sd">    Args:</span>
<span class="sd">     path: Path to the .jsonl file (string or Path).</span>

<span class="sd">    Yields:</span>
<span class="sd">         A FileSpec object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">yield</span> <span class="n">FileSpec</span><span class="p">(</span><span class="o">**</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="deriva_ml.core.FileSpec.validate_file_url" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">validate_file_url</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">validate_file_url</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Examine the provided URL. If it's a local path, convert it into a tag URL.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>url</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL to validate and potentially convert</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The validated/converted URL</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValidationError">ValidationError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the URL is not a file URL</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/deriva_ml/core/filespec.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>
<span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_file_url</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Examine the provided URL. If it&#39;s a local path, convert it into a tag URL.</span>

<span class="sd">    Args:</span>
<span class="sd">        url: The URL to validate and potentially convert</span>

<span class="sd">    Returns:</span>
<span class="sd">        The validated/converted URL</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValidationError: If the URL is not a file URL</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url_parts</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">url_parts</span><span class="o">.</span><span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span>
        <span class="c1"># Already a tag URL, so just return it.</span>
        <span class="k">return</span> <span class="n">url</span>
    <span class="k">elif</span> <span class="p">(</span><span class="ow">not</span> <span class="n">url_parts</span><span class="o">.</span><span class="n">scheme</span><span class="p">)</span> <span class="ow">or</span> <span class="n">url_parts</span><span class="o">.</span><span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;file&quot;</span><span class="p">:</span>
        <span class="c1"># There is no scheme part of the URL, or it is a file URL, so it is a local file path.</span>
        <span class="c1"># Convert to a tag URL.</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;tag://</span><span class="si">{</span><span class="n">gethostname</span><span class="p">()</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="si">}</span><span class="s2">:file://</span><span class="si">{</span><span class="n">url_parts</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;url is not a file URL&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="deriva_ml.core.FileUploadState" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">FileUploadState</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Tracks the state and result of a file upload operation.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.FileUploadState.state">state</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="UploadState (deriva_ml.core.enums.UploadState)" href="#deriva_ml.core.UploadState">UploadState</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current state of the upload (success, failed, etc.).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.FileUploadState.status">status</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Detailed status message.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.FileUploadState.result">result</span></code></td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Upload result data, if any.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.FileUploadState.rid">rid</span></code></td>
            <td>
                  <code><span title="deriva_ml.core.constants.RID">RID</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resource identifier of the uploaded file, if successful.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="quote">
                <summary>Source code in <code>src/deriva_ml/core/ermrest.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FileUploadState</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tracks the state and result of a file upload operation.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        state (UploadState): Current state of the upload (success, failed, etc.).</span>
<span class="sd">        status (str): Detailed status message.</span>
<span class="sd">        result (Any): Upload result data, if any.</span>
<span class="sd">        rid (RID | None): Resource identifier of the uploaded file, if successful.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">UploadState</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">result</span><span class="p">:</span> <span class="n">Any</span>

    <span class="nd">@computed_field</span>
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">rid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RID</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;RID&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="deriva_ml.core.MLAsset" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">MLAsset</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseStrEnum (deriva_ml.core.enums.BaseStrEnum)" href="../deriva_definitions/#deriva_ml.core.definitions.BaseStrEnum">BaseStrEnum</a></code></p>


        <p>Asset type identifiers.</p>
<p>Defines the types of assets that can be associated with executions.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.MLAsset.execution_metadata">execution_metadata</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Metadata about an execution.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.MLAsset.execution_asset">execution_asset</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Asset produced by an execution.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="quote">
                <summary>Source code in <code>src/deriva_ml/core/enums.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MLAsset</span><span class="p">(</span><span class="n">BaseStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Asset type identifiers.</span>

<span class="sd">    Defines the types of assets that can be associated with executions.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        execution_metadata (str): Metadata about an execution.</span>
<span class="sd">        execution_asset (str): Asset produced by an execution.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">execution_metadata</span> <span class="o">=</span> <span class="s2">&quot;Execution_Metadata&quot;</span>
    <span class="n">execution_asset</span> <span class="o">=</span> <span class="s2">&quot;Execution_Asset&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="deriva_ml.core.MLVocab" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">MLVocab</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseStrEnum (deriva_ml.core.enums.BaseStrEnum)" href="../deriva_definitions/#deriva_ml.core.definitions.BaseStrEnum">BaseStrEnum</a></code></p>


        <p>Controlled vocabulary type identifiers.</p>
<p>Defines the names of controlled vocabulary tables used in DerivaML for various types
of entities and attributes.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.MLVocab.dataset_type">dataset_type</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dataset classification vocabulary.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.MLVocab.workflow_type">workflow_type</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Workflow classification vocabulary.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.MLVocab.asset_type">asset_type</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Asset classification vocabulary.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.MLVocab.asset_role">asset_role</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Asset role classification vocabulary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="quote">
                <summary>Source code in <code>src/deriva_ml/core/enums.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MLVocab</span><span class="p">(</span><span class="n">BaseStrEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Controlled vocabulary type identifiers.</span>

<span class="sd">    Defines the names of controlled vocabulary tables used in DerivaML for various types</span>
<span class="sd">    of entities and attributes.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        dataset_type (str): Dataset classification vocabulary.</span>
<span class="sd">        workflow_type (str): Workflow classification vocabulary.</span>
<span class="sd">        asset_type (str): Asset classification vocabulary.</span>
<span class="sd">        asset_role (str): Asset role classification vocabulary.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dataset_type</span> <span class="o">=</span> <span class="s2">&quot;Dataset_Type&quot;</span>
    <span class="n">workflow_type</span> <span class="o">=</span> <span class="s2">&quot;Workflow_Type&quot;</span>
    <span class="n">asset_type</span> <span class="o">=</span> <span class="s2">&quot;Asset_Type&quot;</span>
    <span class="n">asset_role</span> <span class="o">=</span> <span class="s2">&quot;Asset_Role&quot;</span>
    <span class="n">feature_name</span> <span class="o">=</span> <span class="s2">&quot;Feature_Name&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="deriva_ml.core.TableDefinition" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TableDefinition</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Defines a complete table structure in ERMrest.</p>
<p>Provides a Pydantic model for defining tables with their columns, keys, and relationships.
Maps to deriva_py's Table.define functionality.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.TableDefinition.name">name</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the table.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.TableDefinition.column_defs">column_defs</span></code></td>
            <td>
                  <code><span title="typing.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" title="ColumnDefinition (deriva_ml.core.ermrest.ColumnDefinition)" href="#deriva_ml.core.ColumnDefinition">ColumnDefinition</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Column definitions.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.TableDefinition.key_defs">key_defs</span></code></td>
            <td>
                  <code><span title="typing.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" title="KeyDefinition (deriva_ml.core.ermrest.KeyDefinition)" href="../deriva_definitions/#deriva_ml.core.definitions.KeyDefinition">KeyDefinition</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Key constraint definitions.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.TableDefinition.fkey_defs">fkey_defs</span></code></td>
            <td>
                  <code><span title="typing.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" title="ForeignKeyDefinition (deriva_ml.core.ermrest.ForeignKeyDefinition)" href="../deriva_definitions/#deriva_ml.core.definitions.ForeignKeyDefinition">ForeignKeyDefinition</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Foreign key relationship definitions.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.TableDefinition.comment">comment</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Description of the table's purpose.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.TableDefinition.acls">acls</span></code></td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Access control lists.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.TableDefinition.acl_bindings">acl_bindings</span></code></td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dynamic access control bindings.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.TableDefinition.annotations">annotations</span></code></td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional metadata annotations.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>table = TableDefinition(
...     name="experiment",
...     column_defs=[
...         ColumnDefinition(name="id", type=BuiltinTypes.text),
...         ColumnDefinition(name="date", type=BuiltinTypes.date)
...     ],
...     comment="Experimental data records"
... )</p>
</blockquote>
</blockquote>
</blockquote>
</details>







              <details class="quote">
                <summary>Source code in <code>src/deriva_ml/core/ermrest.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TableDefinition</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Defines a complete table structure in ERMrest.</span>

<span class="sd">    Provides a Pydantic model for defining tables with their columns, keys, and relationships.</span>
<span class="sd">    Maps to deriva_py&#39;s Table.define functionality.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name (str): Name of the table.</span>
<span class="sd">        column_defs (Iterable[ColumnDefinition]): Column definitions.</span>
<span class="sd">        key_defs (Iterable[KeyDefinition]): Key constraint definitions.</span>
<span class="sd">        fkey_defs (Iterable[ForeignKeyDefinition]): Foreign key relationship definitions.</span>
<span class="sd">        comment (str | None): Description of the table&#39;s purpose.</span>
<span class="sd">        acls (dict): Access control lists.</span>
<span class="sd">        acl_bindings (dict): Dynamic access control bindings.</span>
<span class="sd">        annotations (dict): Additional metadata annotations.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; table = TableDefinition(</span>
<span class="sd">        ...     name=&quot;experiment&quot;,</span>
<span class="sd">        ...     column_defs=[</span>
<span class="sd">        ...         ColumnDefinition(name=&quot;id&quot;, type=BuiltinTypes.text),</span>
<span class="sd">        ...         ColumnDefinition(name=&quot;date&quot;, type=BuiltinTypes.date)</span>
<span class="sd">        ...     ],</span>
<span class="sd">        ...     comment=&quot;Experimental data records&quot;</span>
<span class="sd">        ... )</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">column_defs</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ColumnDefinition</span><span class="p">]</span>
    <span class="n">key_defs</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KeyDefinition</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">fkey_defs</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ForeignKeyDefinition</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">acls</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">acl_bindings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">annotations</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="nd">@model_serializer</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">serialize_table_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">em</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">define</span><span class="p">(</span>
            <span class="n">tname</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">column_defs</span><span class="o">=</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">column_defs</span><span class="p">],</span>
            <span class="n">key_defs</span><span class="o">=</span><span class="p">[</span><span class="n">k</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">key_defs</span><span class="p">],</span>
            <span class="n">fkey_defs</span><span class="o">=</span><span class="p">[</span><span class="n">fk</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="k">for</span> <span class="n">fk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fkey_defs</span><span class="p">],</span>
            <span class="n">comment</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">comment</span><span class="p">,</span>
            <span class="n">acls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">acls</span><span class="p">,</span>
            <span class="n">acl_bindings</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">acl_bindings</span><span class="p">,</span>
            <span class="n">annotations</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">annotations</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="deriva_ml.core.UploadState" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">UploadState</span>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>File upload operation states.</p>
<p>Represents the various states a file upload operation can be in, from initiation to completion.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.UploadState.success">success</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Upload completed successfully.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.UploadState.failed">failed</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Upload failed.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.UploadState.pending">pending</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Upload is queued.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.UploadState.running">running</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Upload is in progress.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.UploadState.paused">paused</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Upload is temporarily paused.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.UploadState.aborted">aborted</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Upload was aborted.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.UploadState.cancelled">cancelled</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Upload was cancelled.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="deriva_ml.core.UploadState.timeout">timeout</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Upload timed out.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="quote">
                <summary>Source code in <code>src/deriva_ml/core/enums.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">UploadState</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;File upload operation states.</span>

<span class="sd">    Represents the various states a file upload operation can be in, from initiation to completion.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        success (int): Upload completed successfully.</span>
<span class="sd">        failed (int): Upload failed.</span>
<span class="sd">        pending (int): Upload is queued.</span>
<span class="sd">        running (int): Upload is in progress.</span>
<span class="sd">        paused (int): Upload is temporarily paused.</span>
<span class="sd">        aborted (int): Upload was aborted.</span>
<span class="sd">        cancelled (int): Upload was cancelled.</span>
<span class="sd">        timeout (int): Upload timed out.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">success</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">failed</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">pending</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">running</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">paused</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">aborted</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">cancelled</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">timeout</span> <span class="o">=</span> <span class="mi">7</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../Notebooks/DerivaML%20Vocabulary/" class="md-footer__link md-footer__link--prev" aria-label="Previous: DerivaML Vocabulary">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                DerivaML Vocabulary
              </div>
            </div>
          </a>
        
        
          
          <a href="../dataset_aux_classes/" class="md-footer__link md-footer__link--next" aria-label="Next: DatasetBag Auxiliary Classes">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                DatasetBag Auxiliary Classes
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.expand", "navigation.footer"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>